/*! For license information please see main.08072820.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},309:function(e,t,n){"use strict";e.exports=n(746)},758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),u=new t(512),c=new t(512);function l(e){return s.get(e)||s.set(e,f(e).map((function(e){return e.replace(o,"$2")})))}function f(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:f,normalizePath:l,setter:function(e){var t=l(e);return u.get(e)||u.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:f(e),t,n)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case T:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,xe=null;function Te(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Se(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Ee||null!==xe)&&(Ie(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,Et,xt,Tt,St=!1,Ct=[],At=null,It=null,Nt=null,Rt=new Map,Ot=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Bt(){St=!1,null!==At&&jt(At)&&(At=null),null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),Rt.forEach(Ut),Ot.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Qt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Qt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return It=Mt(It,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=gi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return xn}var Sn=F({},fn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Sn),An=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Rn),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Qn=null;function Gn(e){jr(e,0)}function Yn(e){if(Q(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Hn(t,Qn,e,_e(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},xr={};function Tr(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=Tr("animationend"),Cr=Tr("animationiteration"),Ar=Tr("animationstart"),Ir=Tr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),u(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Dr=Rr[Pr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=_e(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Sr:case Cr:case Ar:u=mn;break;case Ir:u=Nn;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Qr(d))p++;for(d=0,v=h;v;v=Qr(v))d++;for(;0<p-d;)l=Qr(l),p--;for(;0<d-p;)h=Qr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Qr(l),h=Qr(h)}l=null}else l=null;null!==u&&Gr(o,s,u,l,!1),null!==c&&null!==f&&Gr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Xn;else if(Wn(s))if(Jn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(m=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Oe(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var wi=[],Ei=-1;function xi(e){return{current:e}}function Ti(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Si(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Ci={},Ai=xi(Ci),Ii=xi(!1),Ni=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ii),Ti(Ai)}function Di(e,t,n){if(Ai.current!==Ci)throw Error(a(168));Si(Ai,t),Si(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=Ai.current,Si(Ai,e),Si(Ii,Ii.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ii),Ti(Ai),Si(Ai,e)):Ti(Ii),Si(Ii,n)}var ji=null,Ui=!1,Bi=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Bi&&null!==ji){Bi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Qe(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Qi=[],Gi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Qi[Gi++]=Xi,Qi[Gi++]=Ji,Qi[Gi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Qi[--Gi],Qi[Gi]=null,Ji=Qi[--Gi],Qi[Gi]=null,Xi=Qi[--Gi],Qi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=xi(null),ga=null,ka=null,ba=null;function _a(){ba=ka=ga=null}function wa(e){var t=ma.current;Ti(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ca(e){null===Sa?Sa=[e]:Sa.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Oi(t)?Ni:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Oi(t)?Ni:Ai.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Qa(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===s.length)return n(i,f),ia&&$i(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&$i(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&$i(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return ia&&$i(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),$a={},Za=xi($a),eo=xi($a),to=xi($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Za),Si(Za,t)}function io(){Ti(Za),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ti(Za),Ti(eo))}var so=xi(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Ao(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Fu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Oo(e,t){var n=vo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ia(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Co().memoizedState}function Vo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Qo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Aa(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ca(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Aa(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ta,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Nu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Io,useRef:Bo,useState:function(){return Io(Ao)},useDebugValue:Yo,useDeferredValue:function(e){return $o(Co(),yo.memoizedState,e)},useTransition:function(){return[Io(Ao)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Bo,useState:function(){return No(Ao)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:$o(t,yo.memoizedState,e)},useTransition:function(){return[No(Ao)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),hs(0,t)},n}function vs(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Qu?Qu=new Set([this]):Qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=To(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Cs(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Du,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Du,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Du,Pu),Pu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Du,Pu),Pu|=r;return _s(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Oi(n)?Ni:Ai.current;return a=Ri(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=To(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function As(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(xa(t,i),null===t.stateNode)Ws(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ri(t,c=Oi(n)?Ni:Ai.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ii.current||Na?("function"===typeof l&&(Ba(t,n,l,r),u=t.memoizedState),(s=Na||za(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ta(u):u=Ri(t,u=Oi(n)?Ni:Ai.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Wa(t,o,r,u),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ii.current||Na?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,a,i)}function Is(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var Os,Ps,Ds,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),rc(r,e,i,-1))}return yc(),Bs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Gi++]=Xi,Qi[Gi++]=Ji,Qi[Gi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qs(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Qs(t),null;case 3:return r=t.stateNode,io(),Ti(Ii),Ti(Ai),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ps(e,t),Qs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Qs(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Qs(t),null;case 13:if(Ti(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qs(t),null);case 4:return io(),Ps(e,t),null===e&&zr(t.stateNode.containerInfo),Qs(t),null;case 10:return wa(t.type._context),Qs(t),null;case 19:if(Ti(so),null===(o=t.memoizedState))return Qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Qs(t),null}else 2*Je()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Qs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Qs(t),6&t.subtreeFlags&&(t.flags|=8192)):Qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ii),Ti(Ai),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Js&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,du(e,t,n),Js=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Tc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(y){Tc(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Tc(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Tc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Tc(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Tc(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Tc(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Je())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||f,yu(t,e),Js=l):yu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Tc(r,n,y)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){wu(h);continue}}null!==p?(p.return=d,Zs=p):wu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Tc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Tc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Tc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Xs;var c=Js;if(Xs=o,(Js=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Eu(i):null!==u?(u.return=o,Zs=u):Eu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Xs=s,Js=c}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):_u(e)}}function _u(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Js||512&t.flags&&au(t)}catch(d){Tc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Tc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Tc(t,i,u)}}var a=t.return;try{au(t)}catch(u){Tc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Tc(t,o,u)}}}catch(u){Tc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xu,Tu=Math.ceil,Su=b.ReactCurrentDispatcher,Cu=b.ReactCurrentOwner,Au=b.ReactCurrentBatchConfig,Iu=0,Nu=null,Ru=null,Ou=0,Pu=0,Du=xi(0),Lu=0,Mu=null,Fu=0,ju=0,Uu=0,Bu=null,Vu=null,zu=0,qu=1/0,Wu=null,Hu=!1,Ku=null,Qu=null,Gu=!1,Yu=null,Xu=0,Ju=0,$u=null,Zu=-1,ec=0;function tc(){return 0!==(6&Iu)?Je():-1!==Zu?Zu:Zu=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ou?Ou&-Ou:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,$u=null,Error(a(185));mt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(ju|=n),4===Lu&&uc(e,Ou)),ic(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(qu=Je()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Nu?Ou:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Iu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Iu;Iu|=2;var o=vc();for(Nu===e&&Ou===t||(Wu=null,qu=Je()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}_a(),Su.current=o,Iu=i,null!==Ru?t=0:(Nu=null,Ou=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,Wu),t);break}wc(e,Vu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,Wu),r);break}wc(e,Vu,Wu);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vu,Vu=n,null!==t&&sc(t)),e}function sc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Iu))throw Error(a(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,Wu),ic(e,Je()),null}function lc(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(qu=Je()+500,Ui&&zi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&Ec();var t=Iu;Iu|=1;var n=Au.transition,r=kt;try{if(Au.transition=null,kt=1,e)return e()}finally{kt=r,Au.transition=n,0===(6&(Iu=t))&&zi()}}function hc(){Pu=Du.current,Ti(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ti(Ii),Ti(Ai),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Ru=e=Dc(e.current,null),Ou=Pu=t,Lu=0,Mu=null,Uu=ju=Fu=0,Vu=Bu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(_a(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Cu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ou,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Qu||!Qu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function yc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Nu||0===(268435455&Fu)&&0===(268435455&ju)||uc(Nu,Ou)}function mc(e,t){var n=Iu;Iu|=2;var r=vc();for(Nu===e&&Ou===t||(Wu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(_a(),Iu=n,Su.current=r,null!==Ru)throw Error(a(261));return Nu=null,Ou=0,Lu}function gc(){for(;null!==Ru;)bc(Ru)}function kc(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=xu(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?_c(e):Ru=t,Cu.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Pu)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function wc(e,t,n){var r=kt,i=Au.transition;try{Au.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==Yu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Ru=Nu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Au.transition,Au.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Cu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Xe(),Iu=u,kt=s,Au.transition=o}else e.current=n;if(Gu&&(Gu=!1,Yu=e,Xu=i),o=e.pendingLanes,0===o&&(Qu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!==(1&Xu)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===$u?Ju++:(Ju=0,$u=e):Ju=0,zi()}(e,t,n,r)}finally{Au.transition=i,kt=r}return null}function Ec(){if(null!==Yu){var e=bt(Xu),t=Au.transition,n=kt;try{if(Au.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Xu=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(w){Tc(u,u.return,w)}if(u===s){Zs=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Zs=_;break e}Zs=u.return}}if(Iu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Au.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qu||!Qu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ou&n)===n&&(4===Lu||3===Lu&&(130023424&Ou)===Ou&&500>Je()-zu?dc(e,0):Uu|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ia(e,t))&&(mt(e,t,n),ic(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Qe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case x:s=8,i|=8;break;case T:return(e=Oc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case I:return(e=Oc(13,n,t,i)).elementType=I,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case A:s=11;break e;case R:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Bc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Si(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ri(t,Ai.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Ta(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Es(e,t,r,i=ya(r.type,i),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ws(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,xa(t,n),qa(t,r,i),Ha(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Iu)&&(qu=Je()+500,zi()))}break;case 13:fc((function(){var t=Ia(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Qc(e,1)}},wt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)rc(t,e,134217728,tc());Qc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Ia(e,t);if(null!==n)rc(n,e,t,tc());Qc(e,t)}},xt=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));Q(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=lc,Ie=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,_i,Se,Ce,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},77:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var s,u,c,l=t(e),f=t(o);if(l&&f){if((u=e.length)!=o.length)return!1;for(s=u;0!==s--;)if(!a(e[s],o[s]))return!1;return!0}if(l!=f)return!1;var h=e instanceof Date,d=o instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var y=n(e);if((u=y.length)!==n(o).length)return!1;for(s=u;0!==s--;)if(!r.call(o,y[s]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(s=u;0!==s--;)if(("_owner"!==(c=y[s])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+A(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+A(s=e[c],c);u+=I(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,l=a+A(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(w);else{var t=r(l);null!==t&&D(_,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&D(_,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,T=null,S=-1,C=5,A=-1;function I(){return!(t.unstable_now()-A<C)}function N(){if(null!==T){var e=t.unstable_now();A=e;var n=!0;try{n=T(!0,e)}finally{n?E():(x=!1,T=null)}}else x=!1}if("function"===typeof k)E=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=N,E=function(){O.postMessage(null)}}else E=function(){m(N,0)};function P(e){T=e,x||(x=!0,E())}function D(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,D(_,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,P(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},564:function(e){var t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=function(e){return e.match(t)||[]},r=function(e){return e[0].toUpperCase()+e.slice(1)},i=function(e,t){return n(e).join(t).toLowerCase()},a=function(e){return n(e).reduce((function(e,t){return"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())}),"")};e.exports={words:n,upperFirst:r,camelCase:a,pascalCase:function(e){return r(a(e))},snakeCase:function(e){return i(e,"_")},kebabCase:function(e){return i(e,"-")},sentenceCase:function(e){return r(i(e," "))},titleCase:function(e){return n(e).map(r).join(" ")}}},514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||u(e[a],a,new Set);return r;function u(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var f=l[--t];u(f,s.get(f),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=s(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/bookShelf/",function(){"use strict";var e,t=n(250);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||i(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t=v();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,n)}}function g(e){if(Array.isArray(e))return e}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){return g(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||k()}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=v.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var c=f(e[r],e,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==u(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),c(k,s,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function w(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(mT){return void n(mT)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,s,"next",e)}function s(e){w(a,r,i,o,s,"throw",e)}o(void 0)}))}}function x(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n){return T=v()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},T.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},S(e)}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var I,N="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function O(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),A({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(t,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,f=e.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=e.Pop;var t=p(),n=null==t?null:t-d;d=t,h&&h({action:f,location:m.location,delta:n})}function y(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:L(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(A({},l.state,{idx:d}),""));var m={get action(){return f},get location(){return t(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(N,v),h=e,function(){s.removeEventListener(N,v),h=null}},createHref:function(e){return n(s,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;var i=D(m.location,t,n);r&&r(i,t);var a=P(i,d=p()+1),o=m.createHref(i);try{l.pushState(a,"",o)}catch(mT){s.location.assign(o)}c&&h&&h({action:f,location:m.location,delta:1})},replace:function(t,n){f=e.Replace;var i=D(m.location,t,n);r&&r(i,t);var a=P(i,d=p()),o=m.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}function j(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=new Set),e.map((function(e,r){var i=[].concat(o(t),[r]),a="string"===typeof e.id?e.id:i.join("-");return R(!0!==e.index||!e.children,"Cannot specify children on an index route"),R(!n.has(a),'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),n.add(a),function(e){return!0===e.index}(e)?A({},e,{id:a}):A({},e,{id:a,children:e.children?j(e.children,i,n):void 0})}))}function U(e,t,n){void 0===n&&(n="/");var r=Z(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=X(i[o],$(r));return a}function B(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(R(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ie([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),B(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Y(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=C(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n,r=g(n=t)||i(n)||a(n)||k(),s=r[0],u=r.slice(1),c=s.endsWith("?"),l=s.replace(/\?$/,"");if(0===u.length)return c?[l,""]:[l];var f=V(u.join("/")),h=[];return h.push.apply(h,o(f.map((function(e){return""===e?l:[l,e].join("/")})))),c&&h.push.apply(h,o(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(I||(I={}));var z=/^:\w+$/,q=3,W=2,H=1,K=10,Q=-2,G=function(e){return"*"===e};function Y(e,t){var n=e.split("/"),r=n.length;return n.some(G)&&(r+=Q),t&&(r+=W),n.filter((function(e){return!G(e)})).reduce((function(e,t){return e+(z.test(t)?q:""===t?H:K)}),r)}function X(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=J({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:ie([i,l.pathname]),pathnameBase:ae(ie([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ie([i,l.pathnameBase]))}return a}function J(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ee("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=b(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(mT){return ee(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+mT+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function $(e){try{return decodeURI(e)}catch(mT){return ee(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+mT+")."),e}}function Z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ee(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function te(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ne(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function re(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(R(!(i=A({},e)).pathname||!i.pathname.includes("?"),te("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),te("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),te("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:oe(a),hash:se(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ie=function(e){return e.join("/").replace(/\/\/+/g,"/")},ae=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},oe=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},se=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ue=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n)}(S(Error)),ce=function(){function e(t,n){var r,i=this;s(this,e),this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],R(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise((function(e,t){return r=t})),this.controller=new AbortController;var a=function(){return r(new ue("Deferred data aborted"))};this.unlistenAbortSignal=function(){return i.controller.signal.removeEventListener("abort",a)},this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((function(e,t){var n=b(t,2),r=n[0],a=n[1];return Object.assign(e,x({},r,i.trackPromise(r,a)))}),{}),this.done&&this.unlistenAbortSignal(),this.init=n}return f(e,[{key:"trackPromise",value:function(e,t){var n=this;if(!(t instanceof Promise))return t;this.deferredKeys.push(e),this.pendingKeysSet.add(e);var r=Promise.race([t,this.abortPromise]).then((function(t){return n.onSettle(r,e,null,t)}),(function(t){return n.onSettle(r,e,t)}));return r.catch((function(){})),Object.defineProperty(r,"_tracked",{get:function(){return!0}}),r}},{key:"onSettle",value:function(e,t,n,r){return this.controller.signal.aborted&&n instanceof ue?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:function(){return n}}),Promise.reject(n)):(this.pendingKeysSet.delete(t),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(e,"_error",{get:function(){return n}}),this.emit(!1,t),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:function(){return r}}),this.emit(!1,t),r))}},{key:"emit",value:function(e,t){this.subscribers.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e){var t=this;return this.subscribers.add(e),function(){return t.subscribers.delete(e)}}},{key:"cancel",value:function(){var e=this;this.controller.abort(),this.pendingKeysSet.forEach((function(t,n){return e.pendingKeysSet.delete(n)})),this.emit(!0)}},{key:"resolveData",value:function(){var e=E(_().mark((function e(t){var n,r,i=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,this.done){e.next=7;break}return r=function(){return i.cancel()},t.addEventListener("abort",r),e.next=6,new Promise((function(e){i.subscribe((function(n){t.removeEventListener("abort",r),(n||i.done)&&e(n)}))}));case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"done",get:function(){return 0===this.pendingKeysSet.size}},{key:"unwrappedData",get:function(){return R(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((function(e,t){var n=b(t,2),r=n[0],i=n[1];return Object.assign(e,x({},r,function(e){if(!function(e){return e instanceof Promise&&!0===e._tracked}(e))return e;if(e._error)throw e._error;return e._data}(i)))}),{})}},{key:"pendingKeys",get:function(){return Array.from(this.pendingKeysSet)}}]),e}();var le=f((function e(t,n,r,i){s(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function fe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var he=["post","put","patch","delete"],de=new Set(he),pe=["get"].concat(he),ve=new Set(pe),ye=new Set([301,302,303,307,308]),me=new Set([307,308]),ge={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ke={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},be={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=!we;function xe(t){R(t.routes.length>0,"You must provide a non-empty routes array to createRouter");var n=j(t.routes),r=null,i=new Set,a=null,s=null,u=null,c=null!=t.hydrationData,l=U(n,t.history.location,t.basename),f=null;if(null==l){var h=Ue(404,{pathname:t.history.location.pathname}),d=je(n);l=d.matches,f=x({},d.route.id,h)}var p,v,y=!l.some((function(e){return e.route.loader}))||null!=t.hydrationData,m={historyAction:t.history.action,location:t.history.location,matches:l,initialized:y,navigation:ge,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||f,fetchers:new Map,blockers:new Map},g=e.Pop,k=!1,w=!1,T=!1,S=[],N=[],O=new Map,P=0,L=-1,M=new Map,F=new Set,B=new Map,V=new Map,z=new Map,q=!1;function W(e){m=A({},m,e),i.forEach((function(e){return e(m)}))}function H(n,r){var i,a,o,s=null!=m.actionData&&null!=m.navigation.formMethod&&Ge(m.navigation.formMethod)&&"loading"===m.navigation.state&&!0!==(null==(i=n.state)?void 0:i._isRedirect);o=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:s?m.actionData:null;var u,c=r.loaderData?Me(m.loaderData,r.loaderData,r.matches||[],r.errors):m.loaderData,l=C(z);try{for(l.s();!(u=l.n()).done;){ve(b(u.value,1)[0])}}catch(h){l.e(h)}finally{l.f()}var f=!0===k||null!=m.navigation.formMethod&&Ge(m.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);W(A({},r,{actionData:o,loaderData:c,historyAction:g,location:n,initialized:!0,navigation:ge,revalidation:"idle",restoreScrollPosition:Ie(n,r.matches||m.matches),preventScrollReset:f,blockers:new Map(m.blockers)})),w||g===e.Pop||(g===e.Push?t.history.push(n,n.state):g===e.Replace&&t.history.replace(n,n.state)),g=e.Pop,k=!1,w=!1,T=!1,S=[],N=[]}function K(e,t){return Q.apply(this,arguments)}function Q(){return Q=E(_().mark((function n(r,i){var a,o,s,u,c,l,f,h,d,p;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("number"!==typeof r){n.next=3;break}return t.history.go(r),n.abrupt("return");case 3:if(a=Te(r,i),o=a.path,s=a.submission,u=a.error,c=m.location,l=A({},l=D(m.location,o,i&&i.state),t.history.encodeLocation(l)),f=i&&null!=i.replace?i.replace:void 0,h=e.Push,!0===f?h=e.Replace:!1===f||null!=s&&Ge(s.formMethod)&&s.formAction===m.location.pathname+m.location.search&&(h=e.Replace),d=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,!(p=xe({currentLocation:c,nextLocation:l,historyAction:h}))){n.next=15;break}return ye(p,{state:"blocked",location:l,proceed:function(){ye(p,{state:"proceeding",proceed:void 0,reset:void 0,location:l}),K(r,i)},reset:function(){ve(p),W({blockers:new Map(m.blockers)})}}),n.abrupt("return");case 15:return n.next=17,G(h,l,{submission:s,pendingError:u,preventScrollReset:d,replace:i&&i.replace});case 17:return n.abrupt("return",n.sent);case 18:case"end":return n.stop()}}),n)}))),Q.apply(this,arguments)}function G(e,t,n){return Y.apply(this,arguments)}function Y(){return Y=E(_().mark((function e(r,i,a){var o,s,u,c,l,f,h,d,p,y,b,E,T,S,C;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&v.abort(),v=null,g=r,w=!0===(a&&a.startUninterruptedRevalidation),Ae(m.location,m.matches),k=!0===(a&&a.preventScrollReset),o=a&&a.overrideNavigation,s=U(n,i,t.basename)){e.next=14;break}return u=Ue(404,{pathname:i.pathname}),c=je(n),l=c.matches,f=c.route,Se(),H(i,{matches:l,loaderData:{},errors:x({},f.id,u)}),e.abrupt("return");case 14:if(!ze(m.location,i)||a&&a.submission&&Ge(a.submission.formMethod)){e.next=17;break}return H(i,{matches:s}),e.abrupt("return");case 17:if(v=new AbortController,h=Oe(t.history,i,v.signal,a&&a.submission),!a||!a.pendingError){e.next=23;break}p=x({},Fe(s).route.id,a.pendingError),e.next=34;break;case 23:if(!(a&&a.submission&&Ge(a.submission.formMethod))){e.next=34;break}return e.next=26,X(h,i,a.submission,s,{replace:a.replace});case 26:if(!(y=e.sent).shortCircuited){e.next=29;break}return e.abrupt("return");case 29:d=y.pendingActionData,p=y.pendingActionError,b=A({state:"loading",location:i},a.submission),o=b,h=new Request(h.url,{signal:h.signal});case 34:return e.next=36,$(h,i,s,o,a&&a.submission,a&&a.replace,d,p);case 36:if(E=e.sent,T=E.shortCircuited,S=E.loaderData,C=E.errors,!T){e.next=42;break}return e.abrupt("return");case 42:v=null,H(i,A({matches:s},d?{actionData:d}:{},{loaderData:S,errors:C}));case 44:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function X(e,t,n,r,i){return J.apply(this,arguments)}function J(){return J=E(_().mark((function t(n,r,i,a,o){var s,u,c,l;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ue(),W({navigation:A({state:"submitting",location:r},i)}),(u=tt(a,r)).route.action){t.next=8;break}s={type:I.error,error:Ue(405,{method:n.method,pathname:r.pathname,routeId:u.route.id})},t.next=13;break;case 8:return t.next=10,Ne("action",n,u,a,p.basename);case 10:if(s=t.sent,!n.signal.aborted){t.next=13;break}return t.abrupt("return",{shortCircuited:!0});case 13:if(!He(s)){t.next=18;break}return c=o&&null!=o.replace?o.replace:s.location===m.location.pathname+m.location.search,t.next=17,ie(m,s,{submission:i,replace:c});case 17:return t.abrupt("return",{shortCircuited:!0});case 18:if(!We(s)){t.next=22;break}return l=Fe(a,u.route.id),!0!==(o&&o.replace)&&(g=e.Push),t.abrupt("return",{pendingActionData:{},pendingActionError:x({},l.route.id,s.error)});case 22:if(!qe(s)){t.next=24;break}throw Ue(400,{type:"defer-action"});case 24:return t.abrupt("return",{pendingActionData:x({},u.route.id,s.data)});case 25:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function $(e,t,n,r,i,a,o,s){return Z.apply(this,arguments)}function Z(){return Z=E(_().mark((function e(n,r,i,a,o,s,u,c){var l,f,h,d,p,y,g,k,E,x,C,I,R,D,M,F,j;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((l=a)||(f=A({state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},o),l=f),h=o||(l.formMethod&&l.formAction&&l.formData&&l.formEncType?{formMethod:l.formMethod,formAction:l.formAction,formData:l.formData,formEncType:l.formEncType}:void 0),d=Ce(t.history,m,i,h,r,T,S,N,u,c,B),p=b(d,2),y=p[0],g=p[1],Se((function(e){return!(i&&i.some((function(t){return t.route.id===e})))||y&&y.some((function(t){return t.route.id===e}))})),0!==y.length||0!==g.length){e.next=8;break}return H(r,A({matches:i,loaderData:{},errors:c||null},u?{actionData:u}:{})),e.abrupt("return",{shortCircuited:!0});case 8:return w||(g.forEach((function(e){var t=m.fetchers.get(e.key),n={state:"loading",data:t&&t.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};m.fetchers.set(e.key,n)})),k=u||m.actionData,W(A({navigation:l},k?0===Object.keys(k).length?{actionData:null}:{actionData:k}:{},g.length>0?{fetchers:new Map(m.fetchers)}:{}))),L=++P,g.forEach((function(e){return O.set(e.key,v)})),e.next=13,oe(m.matches,i,y,g,n);case 13:if(E=e.sent,x=E.results,C=E.loaderResults,I=E.fetcherResults,!n.signal.aborted){e.next=19;break}return e.abrupt("return",{shortCircuited:!0});case 19:if(g.forEach((function(e){return O.delete(e.key)})),!(R=Be(x))){e.next=25;break}return e.next=24,ie(m,R,{replace:s});case 24:return e.abrupt("return",{shortCircuited:!0});case 25:return D=Le(m,i,y,C,c,g,I,V),M=D.loaderData,F=D.errors,V.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&V.delete(t)}))})),de(),j=pe(L),e.abrupt("return",A({loaderData:M,errors:F},j||g.length>0?{fetchers:new Map(m.fetchers)}:{}));case 30:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function te(e){return m.fetchers.get(e)||ke}function ne(){return ne=E(_().mark((function e(r,i,a,o,s,u){var c,l,f,h,d,y,k,w,E,C,I,D,j,z,q,K,Q,G,Y,X,J,$,Z,ee,te,ne;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(),B.delete(r),o.route.action){e.next=6;break}return c=Ue(405,{method:u.formMethod,pathname:a,routeId:i}),ce(r,i,c),e.abrupt("return");case 6:return l=m.fetchers.get(r),f=A({state:"submitting"},u,{data:l&&l.data," _hasFetcherDoneAnything ":!0}),m.fetchers.set(r,f),W({fetchers:new Map(m.fetchers)}),h=new AbortController,d=Oe(t.history,a,h.signal,u),O.set(r,h),e.next=15,Ne("action",d,o,s,p.basename);case 15:if(y=e.sent,!d.signal.aborted){e.next=19;break}return O.get(r)===h&&O.delete(r),e.abrupt("return");case 19:if(!He(y)){e.next=26;break}return O.delete(r),F.add(r),k=A({state:"loading"},u,{data:void 0," _hasFetcherDoneAnything ":!0}),m.fetchers.set(r,k),W({fetchers:new Map(m.fetchers)}),e.abrupt("return",ie(m,y,{isFetchActionRedirect:!0}));case 26:if(!We(y)){e.next=29;break}return ce(r,i,y.error),e.abrupt("return");case 29:if(!qe(y)){e.next=31;break}throw Ue(400,{type:"defer-action"});case 31:return w=m.navigation.location||m.location,E=Oe(t.history,w,h.signal),R(C="idle"!==m.navigation.state?U(n,m.navigation.location,t.basename):m.matches,"Didn't find any matches after fetcher action"),I=++P,M.set(r,I),D=A({state:"loading",data:y.data},u,{" _hasFetcherDoneAnything ":!0}),m.fetchers.set(r,D),j=Ce(t.history,m,C,u,w,T,S,N,x({},o.route.id,y.data),void 0,B),z=b(j,2),q=z[0],(K=z[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=m.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};m.fetchers.set(t,r),O.set(t,h)})),W({fetchers:new Map(m.fetchers)}),e.next=44,oe(m.matches,C,q,K,E);case 44:if(Q=e.sent,G=Q.results,Y=Q.loaderResults,X=Q.fetcherResults,!h.signal.aborted){e.next=50;break}return e.abrupt("return");case 50:if(M.delete(r),O.delete(r),K.forEach((function(e){return O.delete(e.key)})),!(J=Be(G))){e.next=56;break}return e.abrupt("return",ie(m,J));case 56:$=Le(m,m.matches,q,Y,void 0,K,X,V),Z=$.loaderData,ee=$.errors,te={state:"idle",data:y.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},m.fetchers.set(r,te),ne=pe(I),"loading"===m.navigation.state&&I>L?(R(g,"Expected pending action"),v&&v.abort(),H(m.navigation.location,{matches:C,loaderData:Z,errors:ee,fetchers:new Map(m.fetchers)})):(W(A({errors:ee,loaderData:Me(m.loaderData,Z,C,ee)},ne?{fetchers:new Map(m.fetchers)}:{})),T=!1);case 61:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(){return re=E(_().mark((function e(n,r,i,a,o,s){var u,c,l,f,h,d,v;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=m.fetchers.get(n),c=A({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},s,{data:u&&u.data," _hasFetcherDoneAnything ":!0}),m.fetchers.set(n,c),W({fetchers:new Map(m.fetchers)}),l=new AbortController,f=Oe(t.history,i,l.signal),O.set(n,l),e.next=9,Ne("loader",f,a,o,p.basename);case 9:if(!qe(h=e.sent)){e.next=17;break}return e.next=13,Je(h,f.signal,!0);case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0=h;case 16:h=e.t0;case 17:if(O.get(n)===l&&O.delete(n),!f.signal.aborted){e.next=20;break}return e.abrupt("return");case 20:if(!He(h)){e.next=24;break}return e.next=23,ie(m,h);case 23:return e.abrupt("return");case 24:if(!We(h)){e.next=29;break}return d=Fe(m.matches,r),m.fetchers.delete(n),W({fetchers:new Map(m.fetchers),errors:x({},d.route.id,h.error)}),e.abrupt("return");case 29:R(!qe(h),"Unhandled fetcher deferred data"),v={state:"idle",data:h.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},m.fetchers.set(n,v),W({fetchers:new Map(m.fetchers)});case 33:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ie(e,t,n){return ae.apply(this,arguments)}function ae(){return ae=E(_().mark((function n(r,i,a){var o,s,u,c,l,f,h,d,p,y,m,g,b;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(s=void 0===a?{}:a).submission,c=s.replace,l=s.isFetchActionRedirect,i.revalidate&&(T=!0),R(f=D(r.location,i.location,A({_isRedirect:!0},l?{_isFetchActionRedirect:!0}:{})),"Expected a location on the redirect navigation"),!_e.test(i.location)||!we||"undefined"===typeof(null==(o=window)?void 0:o.location)){n.next=9;break}if(h=t.history.createURL(i.location).origin,window.location.origin===h){n.next=9;break}return c?window.location.replace(i.location):window.location.assign(i.location),n.abrupt("return");case 9:if(v=null,d=!0===c?e.Replace:e.Push,p=r.navigation,y=p.formMethod,m=p.formAction,g=p.formEncType,b=p.formData,!u&&y&&m&&b&&g&&(u={formMethod:y,formAction:m,formEncType:g,formData:b}),!(me.has(i.status)&&u&&Ge(u.formMethod))){n.next=18;break}return n.next=16,G(d,f,{submission:A({},u,{formAction:i.location}),preventScrollReset:k});case 16:n.next=20;break;case 18:return n.next=20,G(d,f,{overrideNavigation:{state:"loading",location:f,formMethod:u?u.formMethod:void 0,formAction:u?u.formAction:void 0,formEncType:u?u.formEncType:void 0,formData:u?u.formData:void 0},preventScrollReset:k});case 20:case"end":return n.stop()}}),n)}))),ae.apply(this,arguments)}function oe(e,t,n,r,i){return se.apply(this,arguments)}function se(){return se=E(_().mark((function e(n,r,i,a,s){var u,c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([].concat(o(i.map((function(e){return Ne("loader",s,e,r,p.basename)}))),o(a.map((function(e){return Ne("loader",Oe(t.history,e.path,s.signal),e.match,e.matches,p.basename)})))));case 2:return u=e.sent,c=u.slice(0,i.length),l=u.slice(i.length),e.next=7,Promise.all([Ye(n,i,c,s.signal,!1,m.loaderData),Ye(n,a.map((function(e){return e.match})),l,s.signal,!0)]);case 7:return e.abrupt("return",{results:u,loaderResults:c,fetcherResults:l});case 8:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ue(){var e;T=!0,(e=S).push.apply(e,o(Se())),B.forEach((function(e,t){O.has(t)&&(N.push(t),fe(t))}))}function ce(e,t,n){var r=Fe(m.matches,t);le(e),W({errors:x({},r.route.id,n),fetchers:new Map(m.fetchers)})}function le(e){O.has(e)&&fe(e),B.delete(e),M.delete(e),F.delete(e),m.fetchers.delete(e)}function fe(e){var t=O.get(e);R(t,"Expected fetch controller: "+e),t.abort(),O.delete(e)}function he(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={state:"idle",data:te(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};m.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function de(){var e,t=[],n=C(F);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=m.fetchers.get(r);R(i,"Expected fetcher: "+r),"loading"===i.state&&(F.delete(r),t.push(r))}}catch(a){n.e(a)}finally{n.f()}he(t)}function pe(e){var t,n=[],r=C(M);try{for(r.s();!(t=r.n()).done;){var i=b(t.value,2),a=i[0];if(i[1]<e){var o=m.fetchers.get(a);R(o,"Expected fetcher: "+a),"loading"===o.state&&(fe(a),M.delete(a),n.push(a))}}}catch(s){r.e(s)}finally{r.f()}return he(n),n.length>0}function ve(e){m.blockers.delete(e),z.delete(e)}function ye(e,t){var n=m.blockers.get(e)||be;R("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state),m.blockers.set(e,t),W({blockers:new Map(m.blockers)})}function xe(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==z.size){z.size>1&&ee(!1,"A router only supports one blocker at a time");var i=Array.from(z.entries()),a=b(i[i.length-1],2),o=a[0],s=a[1],u=m.blockers.get(o);if(!u||"proceeding"!==u.state)return s({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}}function Se(e){var t=[];return V.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),V.delete(r))})),t}function Ae(e,t){if(a&&s&&u){var n=t.map((function(e){return et(e,m.loaderData)})),r=s(e,n)||e.key;a[r]=u()}}function Ie(e,t){if(a&&s&&u){var n=t.map((function(e){return et(e,m.loaderData)})),r=s(e,n)||e.key,i=a[r];if("number"===typeof i)return i}return null}return p={get basename(){return t.basename},get state(){return m},get routes(){return n},initialize:function(){return r=t.history.listen((function(e){var n=e.action,r=e.location,i=e.delta;if(!q){ee(0===z.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=xe({currentLocation:m.location,nextLocation:r,historyAction:n});return a&&null!=i?(q=!0,t.history.go(-1*i),void ye(a,{state:"blocked",location:r,proceed:function(){ye(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.history.go(i)},reset:function(){ve(a),W({blockers:new Map(p.state.blockers)})}})):G(n,r)}q=!1})),m.initialized||G(e.Pop,m.location),p},subscribe:function(e){return i.add(e),function(){return i.delete(e)}},enableScrollRestoration:function(e,t,n){if(a=e,u=t,s=n||function(e){return e.key},!c&&m.navigation===ge){c=!0;var r=Ie(m.location,m.matches);null!=r&&W({restoreScrollPosition:r})}return function(){a=null,u=null,s=null}},navigate:K,fetch:function(e,r,i,a){if(Ee)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");O.has(e)&&fe(e);var o=U(n,i,t.basename);if(o){var s=Te(i,a,!0),u=s.path,c=s.submission,l=tt(o,u);k=!0===(a&&a.preventScrollReset),c&&Ge(c.formMethod)?function(e,t,n,r,i,a){ne.apply(this,arguments)}(e,r,u,l,o,c):(B.set(e,{routeId:r,path:u,match:l,matches:o}),function(e,t,n,r,i,a){re.apply(this,arguments)}(e,r,u,l,o,c))}else ce(e,r,Ue(404,{pathname:i}))},revalidate:function(){ue(),W({revalidation:"loading"}),"submitting"!==m.navigation.state&&("idle"!==m.navigation.state?G(g||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation}):G(m.historyAction,m.location,{startUninterruptedRevalidation:!0}))},createHref:function(e){return t.history.createHref(e)},encodeLocation:function(e){return t.history.encodeLocation(e)},getFetcher:te,deleteFetcher:le,dispose:function(){r&&r(),i.clear(),v&&v.abort(),m.fetchers.forEach((function(e,t){return le(t)})),m.blockers.forEach((function(e,t){return ve(t)}))},getBlocker:function(e,t){var n=m.blockers.get(e)||be;return z.get(e)!==t&&z.set(e,t),n},deleteBlocker:ve,_internalFetchControllers:O,_internalActiveDeferreds:V},p}Symbol("deferred");function Te(e,t,n){void 0===n&&(n=!1);var r,i="string"===typeof e?e:L(e);if(!t||!function(e){return null!=e&&"formData"in e}(t))return{path:i};if(t.formMethod&&!Qe(t.formMethod))return{path:i,error:Ue(405,{method:t.formMethod})};if(t.formData&&Ge((r={formMethod:t.formMethod||"get",formAction:Ve(i),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}).formMethod))return{path:i,submission:r};var a=M(i),o=Pe(t.formData);return n&&a.search&&Ze(a.search)&&o.append("index",""),a.search="?"+o,{path:L(a),submission:r}}function Se(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function Ce(e,t,n,r,i,a,o,s,u,c,l){var f=c?Object.values(c)[0]:u?Object.values(u)[0]:void 0,h=e.createURL(t.location),d=e.createURL(i),p=a||h.toString()===d.toString()||h.search!==d.search,v=c?Object.keys(c)[0]:void 0,y=Se(n,v).filter((function(e,n){if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||o.some((function(t){return t===e.route.id})))return!0;var i=t.matches[n],a=e;return Ie(e,A({currentUrl:h,currentParams:i.params,nextUrl:d,nextParams:a.params},r,{actionResult:f,defaultShouldRevalidate:p||Ae(i,a)}))})),m=[];return l&&l.forEach((function(e,i){n.some((function(t){return t.route.id===e.routeId}))&&((s.includes(i)||Ie(e.match,A({currentUrl:h,currentParams:t.matches[t.matches.length-1].params,nextUrl:d,nextParams:n[n.length-1].params},r,{actionResult:f,defaultShouldRevalidate:p})))&&m.push(A({key:i},e)))})),[y,m]}function Ae(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ie(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Ne(e,t,n,r,i,a,o,s){return Re.apply(this,arguments)}function Re(){return Re=E(_().mark((function e(t,n,r,i,a,o,s,u){var c,l,f,h,d,p,v,y,m,g,k,b,w,E,x,T;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a="/"),void 0===o&&(o=!1),void 0===s&&(s=!1),h=new Promise((function(e,t){return f=t})),d=function(){return f()},n.signal.addEventListener("abort",d),e.prev=6,R(p=r.route[t],"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=11,Promise.race([p({request:n,params:r.params,context:u}),h]);case 11:R(void 0!==(l=e.sent),"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),c=I.error,l=e.t0;case 19:return e.prev=19,n.signal.removeEventListener("abort",d),e.finish(19);case 22:if(!Ke(l)){e.next=47;break}if(v=l.status,!ye.has(v)){e.next=32;break}if(R(y=l.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),_e.test(y)?o||(w=new URL(n.url),(E=y.startsWith("//")?new URL(w.protocol+y):new URL(y)).origin===w.origin&&(y=E.pathname+E.search+E.hash)):(m=i.slice(0,i.indexOf(r)+1),g=ne(m).map((function(e){return e.pathnameBase})),R(L(k=re(y,g,new URL(n.url).pathname)),"Unable to resolve redirect location: "+y),a&&(b=k.pathname,k.pathname="/"===b?a:ie([a,b])),y=L(k)),!o){e.next=31;break}throw l.headers.set("Location",y),l;case 31:return e.abrupt("return",{type:I.redirect,status:v,location:y,revalidate:null!==l.headers.get("X-Remix-Revalidate")});case 32:if(!s){e.next=34;break}throw{type:c||I.data,response:l};case 34:if(!(T=l.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(T)){e.next=41;break}return e.next=38,l.json();case 38:x=e.sent,e.next=44;break;case 41:return e.next=43,l.text();case 43:x=e.sent;case 44:if(c!==I.error){e.next=46;break}return e.abrupt("return",{type:c,error:new le(v,l.statusText,x),headers:l.headers});case 46:return e.abrupt("return",{type:I.data,data:x,statusCode:l.status,headers:l.headers});case 47:if(c!==I.error){e.next=49;break}return e.abrupt("return",{type:c,error:l});case 49:if(!(l instanceof ce)){e.next=51;break}return e.abrupt("return",{type:I.deferred,deferredData:l});case 51:return e.abrupt("return",{type:I.data,data:l});case 52:case"end":return e.stop()}}),e,null,[[6,15,19,22]])}))),Re.apply(this,arguments)}function Oe(e,t,n,r){var i=e.createURL(Ve(t)).toString(),a={signal:n};if(r&&Ge(r.formMethod)){var o=r.formMethod,s=r.formEncType,u=r.formData;a.method=o.toUpperCase(),a.body="application/x-www-form-urlencoded"===s?Pe(u):u}return new Request(i,a)}function Pe(e){var t,n=new URLSearchParams,r=C(e.entries());try{for(r.s();!(t=r.n()).done;){var i=b(t.value,2),a=i[0],o=i[1];n.append(a,o instanceof File?o.name:o)}}catch(s){r.e(s)}finally{r.f()}return n}function De(e,t,n,r,i){var a,o={},s=null,u=!1,c={};return n.forEach((function(n,l){var f=t[l].route.id;if(R(!He(n),"Cannot handle redirect results in processLoaderData"),We(n)){var h=Fe(e,f),d=n.error;r&&(d=Object.values(r)[0],r=void 0),null==(s=s||{})[h.route.id]&&(s[h.route.id]=d),o[f]=void 0,u||(u=!0,a=fe(n.error)?n.error.status:500),n.headers&&(c[f]=n.headers)}else qe(n)?(i.set(f,n.deferredData),o[f]=n.deferredData.data):o[f]=n.data,null==n.statusCode||200===n.statusCode||u||(a=n.statusCode),n.headers&&(c[f]=n.headers)})),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:c}}function Le(e,t,n,r,i,a,o,s){for(var u=De(t,n,r,i,s),c=u.loaderData,l=u.errors,f=0;f<a.length;f++){var h=a[f],d=h.key,p=h.match;R(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var v=o[f];if(We(v)){var y=Fe(e.matches,p.route.id);l&&l[y.route.id]||(l=A({},l,x({},y.route.id,v.error))),e.fetchers.delete(d)}else if(He(v))R(!1,"Unhandled fetcher revalidation redirect");else if(qe(v))R(!1,"Unhandled fetcher deferred data");else{var m={state:"idle",data:v.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function Me(e,t,n,r){var i,a=A({},t),o=C(n);try{for(o.s();!(i=o.n()).done;){var s=i.value.route.id;if(t.hasOwnProperty(s)?void 0!==t[s]&&(a[s]=t[s]):void 0!==e[s]&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(u){o.e(u)}finally{o.f()}return a}function Fe(e,t){var n=t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):o(e);return n.reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function je(e){var t=e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ue(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o=n.type,s="Unknown Server Error",u="Unknown @remix-run/router error";return 400===e?(s="Bad Request",a&&r&&i?u="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o&&(u="defer() is not supported in actions")):403===e?(s="Forbidden",u='Route "'+i+'" does not match URL "'+r+'"'):404===e?(s="Not Found",u='No route matches URL "'+r+'"'):405===e&&(s="Method Not Allowed",a&&r&&i?u="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new le(e||500,s,new Error(u),!0)}function Be(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(He(n))return n}}function Ve(e){return L(A({},"string"===typeof e?M(e):e,{hash:""}))}function ze(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function qe(e){return e.type===I.deferred}function We(e){return e.type===I.error}function He(e){return(e&&e.type)===I.redirect}function Ke(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Qe(e){return ve.has(e)}function Ge(e){return de.has(e)}function Ye(e,t,n,r,i,a){return Xe.apply(this,arguments)}function Xe(){return Xe=E(_().mark((function e(t,n,r,i,a,o){var s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=_().mark((function e(s){var u,c,l,f;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r[s],c=n[s],l=t.find((function(e){return e.route.id===c.route.id})),f=null!=l&&!Ae(l,c)&&void 0!==(o&&o[c.route.id]),!qe(u)||!a&&!f){e.next=7;break}return e.next=7,Je(u,i,a).then((function(e){e&&(r[s]=e||r[s])}));case 7:case"end":return e.stop()}}),e)})),u=0;case 2:if(!(u<r.length)){e.next=7;break}return e.delegateYield(s(u),"t0",4);case 4:u++,e.next=2;break;case 7:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function Je(e,t,n){return $e.apply(this,arguments)}function $e(){return $e=E(_().mark((function e(t,n,r){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:I.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:I.error,error:e.t0});case 14:return e.abrupt("return",{type:I.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),$e.apply(this,arguments)}function Ze(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function et(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function tt(e,t){var n="string"===typeof t?M(t).search:t.search;if(e[e.length-1].route.index&&Ze(n||""))return e[e.length-1];var r=ne(e);return r[r.length-1]}var nt=n(791),rt=n.t(nt,2);function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(this,arguments)}var at="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ot=nt.useState,st=nt.useEffect,ut=nt.useLayoutEffect,ct=nt.useDebugValue;function lt(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!at(n,r)}catch(mT){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var ft=function(e){return e.useSyncExternalStore}(rt),ht=nt.createContext(null);var dt=nt.createContext(null);var pt=nt.createContext(null);var vt=nt.createContext(null);var yt=nt.createContext(null);var mt=nt.createContext({outlet:null,matches:[]});var gt=nt.createContext(null);function kt(){return null!=nt.useContext(yt)}function bt(){return kt()||R(!1),nt.useContext(yt).location}function _t(){kt()||R(!1);var e=nt.useContext(vt),t=e.basename,n=e.navigator,r=nt.useContext(mt).matches,i=bt().pathname,a=JSON.stringify(ne(r).map((function(e){return e.pathnameBase}))),o=nt.useRef(!1);nt.useEffect((function(){o.current=!0}));var s=nt.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=re(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:ie([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}else n.go(e)}),[t,n,a,i]);return s}var wt=nt.createContext(null);function Et(){var e=nt.useContext(mt).matches,t=e[e.length-1];return t?t.params:{}}function xt(e,t){var n=(void 0===t?{}:t).relative,r=nt.useContext(mt).matches,i=bt().pathname,a=JSON.stringify(ne(r).map((function(e){return e.pathnameBase})));return nt.useMemo((function(){return re(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function Tt(){var e=Pt(),t=fe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return nt.createElement(nt.Fragment,null,nt.createElement("h2",null,"Unexpected Application Error!"),nt.createElement("h3",{style:{fontStyle:"italic"}},t),n?nt.createElement("pre",{style:i},n):null,null)}var St,Ct,At=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return f(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?nt.createElement(mt.Provider,{value:this.props.routeContext},nt.createElement(gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(nt.Component);function It(e){var t=e.routeContext,n=e.match,r=e.children,i=nt.useContext(ht);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),nt.createElement(mt.Provider,{value:t},r)}function Nt(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||R(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((function(e,a,o){var s=a.route.id?null==i?void 0:i[a.route.id]:null,u=n?a.route.errorElement||nt.createElement(Tt,null):null,c=t.concat(r.slice(0,o+1)),l=function(){return nt.createElement(It,{match:a,routeContext:{outlet:e,matches:c}},s?u:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===o)?nt.createElement(At,{location:n.location,component:u,error:s,children:l(),routeContext:{outlet:null,matches:c}}):l()}),null)}function Rt(e){var t=nt.useContext(dt);return t||R(!1),t}function Ot(e){var t=function(e){var t=nt.useContext(mt);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}function Pt(){var e,t=nt.useContext(gt),n=Rt(Ct.UseRouteError),r=Ot(Ct.UseRouteError);return t||(null==(e=n.errors)?void 0:e[r])}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(St||(St={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ct||(Ct={}));var Dt;function Lt(e){var t=e.fallbackElement,n=e.router,r=ft(n.subscribe,(function(){return n.state}),(function(){return n.state})),i=nt.useMemo((function(){return{createHref:n.createHref,encodeLocation:n.encodeLocation,go:function(e){return n.navigate(e)},push:function(e,t,r){return n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})},replace:function(e,t,r){return n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}}}),[n]),a=n.basename||"/";return nt.createElement(nt.Fragment,null,nt.createElement(ht.Provider,{value:{router:n,navigator:i,static:!1,basename:a}},nt.createElement(dt.Provider,{value:r},nt.createElement(jt,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?nt.createElement(Ut,null):t))),null)}function Mt(e){return function(e){var t=nt.useContext(mt).outlet;return t?nt.createElement(wt.Provider,{value:e},t):t}(e.context)}function Ft(e){R(!1)}function jt(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?e.Pop:s,c=t.navigator,l=t.static,f=void 0!==l&&l;kt()&&R(!1);var h=r.replace(/^\/*/,"/"),d=nt.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=M(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,_=p.state,w=void 0===_?null:_,E=p.key,x=void 0===E?"default":E,T=nt.useMemo((function(){var e=Z(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:w,key:x}}),[h,y,g,b,w,x]);return null==T?null:nt.createElement(vt.Provider,{value:d},nt.createElement(yt.Provider,{children:a,value:{location:T,navigationType:u}}))}function Ut(t){var n=t.children,r=t.location,i=nt.useContext(ht);return function(t,n){kt()||R(!1);var r,i=nt.useContext(vt).navigator,a=nt.useContext(dt),o=nt.useContext(mt).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,bt());if(n){var f,h="string"===typeof n?M(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||R(!1),r=h}else r=l;var d=r.pathname||"/",p=U(t,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=Nt(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:ie([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ie([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?nt.createElement(yt.Provider,{value:{location:it({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:e.Pop}},v):v}(i&&!n?i.router.routes:Vt(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Dt||(Dt={}));var Bt=new Promise((function(){}));nt.Component;function Vt(e,t){void 0===t&&(t=[]);var n=[];return nt.Children.forEach(e,(function(e,r){if(nt.isValidElement(e))if(e.type!==nt.Fragment){e.type!==Ft&&R(!1),e.props.index&&e.props.children&&R(!1);var i=[].concat(o(t),[r]),a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=Vt(e.props.children,i)),n.push(a)}else n.push.apply(n,Vt(e.props.children,t))})),n}function zt(e){return e.map((function(e){var t=it({},e);return null==t.hasErrorBoundary&&(t.hasErrorBoundary=null!=t.errorElement),t.children&&(t.children=zt(t.children)),t}))}var qt={header:"styles_header__DnUxZ",userLink:"styles_userLink__ecnP+",menuBtn:"styles_menuBtn__1SOKh",showMenu:"styles_showMenu__greGP"};function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Kt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Qt=["aria-current","caseSensitive","className","end","style","to","children"];function Gt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Wt({},t,{errors:Yt(t.errors)})),t}function Yt(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=b(r[n],2),a=i[0],o=i[1];if(o&&"RouteErrorResponse"===o.__type)t[a]=new le(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){var s=new Error(o.message);s.stack="",t[a]=s}else t[a]=o}return t}var Xt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Jt=nt.forwardRef((function(e,t){var n,r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,f=Ht(e,Kt),h=!1;if(Xt&&"string"===typeof c&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(c)){n=c;var d=new URL(window.location.href),p=c.startsWith("//")?new URL(d.protocol+c):new URL(c);p.origin===d.origin?c=p.pathname+p.search+p.hash:h=!0}var v=function(e,t){var n=(void 0===t?{}:t).relative;kt()||R(!1);var r=nt.useContext(vt),i=r.basename,a=r.navigator,o=xt(e,{relative:n}),s=o.hash,u=o.pathname,c=o.search,l=u;return"/"!==i&&(l="/"===u?i:ie([i,u])),a.createHref({pathname:l,search:c,hash:s})}(c,{relative:i}),y=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,a=n.state,o=n.preventScrollReset,s=n.relative,u=_t(),c=bt(),l=xt(e,{relative:s});return nt.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==i?i:L(c)===L(l);u(e,{replace:n,state:a,preventScrollReset:o,relative:s})}}),[c,u,l,i,a,r,e,o,s])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return nt.createElement("a",Wt({},f,{href:n||v,onClick:h||a?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:u}))}));var $t=nt.forwardRef((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.caseSensitive,a=void 0!==i&&i,o=e.className,s=void 0===o?"":o,u=e.end,c=void 0!==u&&u,l=e.style,f=e.to,h=e.children,d=Ht(e,Qt),p=xt(f,{relative:d.relative}),v=bt(),y=nt.useContext(dt),m=nt.useContext(vt).navigator,g=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,k=v.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(k=k.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase());var _,w=k===g||!c&&k.startsWith(g)&&"/"===k.charAt(g.length),E=null!=b&&(b===g||!c&&b.startsWith(g)&&"/"===b.charAt(g.length)),x=w?r:void 0;_="function"===typeof s?s({isActive:w,isPending:E}):[s,w?"active":null,E?"pending":null].filter(Boolean).join(" ");var T="function"===typeof l?l({isActive:w,isPending:E}):l;return nt.createElement(Jt,Wt({},d,{"aria-current":x,className:_,ref:t,style:T,to:f}),"function"===typeof h?h({isActive:w,isPending:E}):h)}));var Zt,en;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Zt||(Zt={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(en||(en={}));var tn=n(694),nn=n.n(tn),rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAUUlEQVR4nO3YgQnAQAzDQI3ezdUlCt83OsgIBhFIkpygPguHI3AEjsARzIw9SZJQxv8OjsAROILT+V3GJ0nyJVcedI7AETgCR3B6pGV8knCzFysxbeBnpwXzAAAAAElFTkSuQmCC",an="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVR4nO3ZzYtPURjA8YNoZJRRNlbyluQvIDaz04i1Igp/gZcsLNn9YiHZGS+RkoYoNSszFMVGMSsmZTETY2GjMD66dRc/0wy/+7tn5hy63zp17+LU8+28PPd5bggNDf8WWIcDOIXzaOE0+rEs5AwW4zBe+zPvMRByBGvwXOd8xy3sCbmAPrzSPQ+xMgeRK+ozlMOh/iEO/SlFTojHzZQiQxFFPqQUqXPIZ/IzWY7pIGdUpe9/WJGC3lQiL8XjcxKJUuR2RJEXKUXORBS5nlJkX0SRYylF9kcUOZhS5GlEkScpRcYiirxJKXI3osidlCJFRRiLQylFluJxBImR5LV8EQAmakhMZNOQwGANkcGQC9hRQ2RnyAk86EJiOOQG1uJjBYkvRc0fcgTPKoiMhVxRrT7JWuRSBZFWyBUsL1uhf+NqNrmjHWwruu9t77twA+P4Wo53uIbtMz5xtobUYCMulk1p5fOqDuatbtuG33AZWxYm6t9/HwzgEaZn2TafyiB3YxNWlGNzOa8IemqOvtYw9mLJfAr04jjemn/GcTJqlx6LcASTFp5JHC1iqCtRbIl70nO/iKXOVToqH0bQ043IBfnRqiqxYY4bKTXTWF9F5Jx8OZuqXxWb0SoisyWsXJiqclvlTk/Hq9LQ0BB+AW9RdDwJNj/EAAAAAElFTkSuQmCC",on="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVR4nO2aQUrDQBhG/5Vb0aW40626EVcurIeynsCqeABRi5cQLyBCF/EEbtteoJTS1ZORERpJNNNI802ctwsh5Ht8M2EyjAFrwBUwRocRcOmyWVX8A6r0QkSUmvjOOEREGksiYlhqRAxLjYhhqZHmeQSOgUPgJtZGbisHFxc58JnugSdgPVaRXZ/pzV8PKsugRddn2gbeg2TQYgZ0lpJBjylwWiDjhttmTCJfMp0gGXSZAieVZdBmspDz5zmDOJbPWt5MjXfMgTNgy1YIZc3U/eY3AUUyNUQ+mwBeaZ7BX4i8ELnIeVuG1tzJtGGyrwQrl8iAjcWbykx+bSLiJUqWayLSRWNWKBHZMj4rlRAUmbXlx6q7lISgyE5bNh/2fKYH4Dnm7aC7ysHFRRx94AjYB65jFsmRRNSwNLTEsNSIGPYfGxmhyzBEpIcuFyEi7uCZk1FqZugkQg6efQCALY5rs2gmEwAAAABJRU5ErkJggg==",sn=n(248),un=n(327),cn=n(164);var ln=function(e){e()},fn=function(){return ln},hn=(0,nt.createContext)(null);function dn(){return(0,nt.useContext)(hn)}var pn=function(){throw new Error("uSES not initialized!")},vn=pn,yn=function(e,t){return e===t};function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=e===hn?dn:function(){return(0,nt.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;var r=t(),i=r.store,a=r.subscription,o=r.getServerState,s=vn(a.addNestedSub,i.getState,o||i.getState,e,n);return(0,nt.useDebugValue)(s),s}}var gn=mn(),kn=n(110),bn=n.n(kn);n(900);var _n={notify:function(){},get:function(){return[]}};function wn(e,t){var n,r=_n;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=fn(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=_n)},getListeners:function(){return r}};return o}var En=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?nt.useLayoutEffect:nt.useEffect;var xn=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,a=(0,nt.useMemo)((function(){var e=wn(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0}}),[t,i]),o=(0,nt.useMemo)((function(){return t.getState()}),[t]);En((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,o]);var s=n||hn;return nt.createElement(s.Provider,{value:a},r)};function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=e===hn?dn:function(){return(0,nt.useContext)(e)};return function(){return t().store}}var Sn=Tn();function Cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=e===hn?Sn:Tn(e);return function(){return t().dispatch}}var An,In=Cn();!function(e){vn=e}(un.useSyncExternalStoreWithSelector),function(e){e}(sn.useSyncExternalStore),An=cn.unstable_batchedUpdates,ln=An;var Nn=function(){return In()},Rn=gn;function On(){var e=Rn((function(e){return e.account.user})),t=e.id,n=e.email;return{isAuth:!!n,id:t,email:n}}function Pn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Dn(e){return!!e&&!!e[Er]}function Ln(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===xr}(e)||Array.isArray(e)||!!e[wr]||!!(null===(t=e.constructor)||void 0===t?void 0:t[wr])||zn(e)||qn(e))}function Mn(e,t,n){void 0===n&&(n=!1),0===Fn(e)?(n?Object.keys:Tr)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Fn(e){var t=e[Er];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:zn(e)?2:qn(e)?3:0}function jn(e,t){return 2===Fn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Un(e,t){return 2===Fn(e)?e.get(t):e[t]}function Bn(e,t,n){var r=Fn(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Vn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function zn(e){return gr&&e instanceof Map}function qn(e){return kr&&e instanceof Set}function Wn(e){return e.o||e.t}function Hn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Sr(e);delete t[Er];for(var n=Tr(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Kn(e,t){return void 0===t&&(t=!1),Gn(e)||Dn(e)||!Ln(e)||(Fn(e)>1&&(e.set=e.add=e.clear=e.delete=Qn),Object.freeze(e),t&&Mn(e,(function(e,t){return Kn(t,!0)}),!0)),e}function Qn(){Pn(2)}function Gn(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Yn(e){var t=Cr[e];return t||Pn(18,e),t}function Xn(e,t){Cr[e]||(Cr[e]=t)}function Jn(){return yr}function $n(e,t){t&&(Yn("Patches"),e.u=[],e.s=[],e.v=t)}function Zn(e){er(e),e.p.forEach(nr),e.p=null}function er(e){e===yr&&(yr=e.l)}function tr(e){return yr={p:[],l:yr,h:e,m:!0,_:0}}function nr(e){var t=e[Er];0===t.i||1===t.i?t.j():t.O=!0}function rr(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Yn("ES5").S(t,e,r),r?(n[Er].P&&(Zn(t),Pn(4)),Ln(e)&&(e=ir(t,e),t.l||or(t,e)),t.u&&Yn("Patches").M(n[Er].t,e,t.u,t.s)):e=ir(t,n,[]),Zn(t),t.u&&t.v(t.u,t.s),e!==_r?e:void 0}function ir(e,t,n){if(Gn(t))return t;var r=t[Er];if(!r)return Mn(t,(function(i,a){return ar(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return or(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Hn(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),Mn(a,(function(t,a){return ar(e,r,i,t,a,n,o)})),or(e,i,!1),n&&e.u&&Yn("Patches").N(r,n,e.u,e.s)}return r.o}function ar(e,t,n,r,i,a,o){if(Dn(i)){var s=ir(e,i,a&&t&&3!==t.i&&!jn(t.R,r)?a.concat(r):void 0);if(Bn(n,r,s),!Dn(s))return;e.m=!1}else o&&n.add(i);if(Ln(i)&&!Gn(i)){if(!e.h.D&&e._<1)return;ir(e,i),t&&t.A.l||or(e,i)}}function or(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Kn(t,n)}function sr(e,t){var n=e[Er];return(n?Wn(n):e)[t]}function ur(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function cr(e){e.P||(e.P=!0,e.l&&cr(e.l))}function lr(e){e.o||(e.o=Hn(e.t))}function fr(e,t,n){var r=zn(t)?Yn("MapSet").F(t,n):qn(t)?Yn("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Jn(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Ar;n&&(i=[r],a=Ir);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):Yn("ES5").J(t,n);return(n?n.A:Jn()).p.push(r),r}function hr(e){return Dn(e)||Pn(22,e),function e(t){if(!Ln(t))return t;var n,r=t[Er],i=Fn(t);if(r){if(!r.P&&(r.i<4||!Yn("ES5").K(r)))return r.t;r.I=!0,n=dr(t,i),r.I=!1}else n=dr(t,i);return Mn(n,(function(t,i){r&&Un(r.t,t)===i||Bn(n,t,e(i))})),3===i?new Set(n):n}(e)}function dr(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Hn(e)}function pr(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Er];return Ar.get(t,e)},set:function(t){var n=this[Er];Ar.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Er];if(!i.P)switch(i.i){case 5:r(i)&&cr(i);break;case 4:n(i)&&cr(i)}}}function n(e){for(var t=e.t,n=e.k,r=Tr(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Er){var o=t[a];if(void 0===o&&!jn(t,a))return!0;var s=n[a],u=s&&s[Er];if(u?u.t!==o:!Vn(s,o))return!0}}var c=!!t[Er];return r.length!==Tr(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Xn("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Sr(n);delete a[Er];for(var o=Tr(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Jn(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Er,{value:a,writable:!0}),i},S:function(e,n,i){i?Dn(n)&&n[Er].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Er];if(n){var i=n.t,a=n.k,o=n.R,s=n.i;if(4===s)Mn(a,(function(t){t!==Er&&(void 0!==i[t]||jn(i,t)?o[t]||e(a[t]):(o[t]=!0,cr(n)))})),Mn(i,(function(e){void 0!==a[e]||jn(a,e)||(o[e]=!1,cr(n))}));else if(5===s){if(r(n)&&(cr(n),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var vr,yr,mr="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),gr="undefined"!=typeof Map,kr="undefined"!=typeof Set,br="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_r=mr?Symbol.for("immer-nothing"):((vr={})["immer-nothing"]=!0,vr),wr=mr?Symbol.for("immer-draftable"):"__$immer_draftable",Er=mr?Symbol.for("immer-state"):"__$immer_state",xr=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Tr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Sr=Object.getOwnPropertyDescriptors||function(e){var t={};return Tr(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Cr={},Ar={get:function(e,t){if(t===Er)return e;var n=Wn(e);if(!jn(n,t))return function(e,t,n){var r,i=ur(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Ln(r)?r:r===sr(e.t,t)?(lr(e),e.o[t]=fr(e.A.h,r,e)):r},has:function(e,t){return t in Wn(e)},ownKeys:function(e){return Reflect.ownKeys(Wn(e))},set:function(e,t,n){var r=ur(Wn(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=sr(Wn(e),t),a=null==i?void 0:i[Er];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Vn(n,i)&&(void 0!==n||jn(e.t,t)))return!0;lr(e),cr(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==sr(e.t,t)||t in e.t?(e.R[t]=!1,lr(e),cr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Wn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Pn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Pn(12)}},Ir={};Mn(Ar,(function(e,t){Ir[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ir.deleteProperty=function(e,t){return Ir.set.call(this,e,t,void 0)},Ir.set=function(e,t,n){return Ar.set.call(this,e[0],t,n,e[0])};var Nr=function(){function e(e){var t=this;this.g=br,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Pn(6),void 0!==r&&"function"!=typeof r&&Pn(7),Ln(e)){var s=tr(t),u=fr(t,e,void 0),c=!0;try{o=n(u),c=!1}finally{c?Zn(s):er(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return $n(s,r),rr(e,s)}),(function(e){throw Zn(s),e})):($n(s,r),rr(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===_r&&(o=void 0),t.D&&Kn(o,!0),r){var l=[],f=[];Yn("Patches").M(e,o,l,f),r(l,f)}return o}Pn(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Ln(e)||Pn(8),Dn(e)&&(e=hr(e));var t=tr(this),n=fr(this,e,void 0);return n[Er].C=!0,er(t),n},t.finishDraft=function(e,t){var n=(e&&e[Er]).A;return $n(n,t),rr(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!br&&Pn(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Yn("Patches").$;return Dn(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Rr=new Nr,Or=Rr.produce,Pr=(Rr.produceWithPatches.bind(Rr),Rr.setAutoFreeze.bind(Rr),Rr.setUseProxies.bind(Rr),Rr.applyPatches.bind(Rr),Rr.createDraft.bind(Rr),Rr.finishDraft.bind(Rr),Or);function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Fr="function"===typeof Symbol&&Symbol.observable||"@@observable",jr=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ur={INIT:"@@redux/INIT"+jr(),REPLACE:"@@redux/REPLACE"+jr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jr()}};function Br(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Vr(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Mr(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Mr(1));return n(Vr)(e,t)}if("function"!==typeof e)throw new Error(Mr(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(Mr(3));return a}function f(e){if("function"!==typeof e)throw new Error(Mr(4));if(u)throw new Error(Mr(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(Mr(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!Br(e))throw new Error(Mr(7));if("undefined"===typeof e.type)throw new Error(Mr(8));if(u)throw new Error(Mr(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Ur.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Mr(10));i=e,h({type:Ur.REPLACE})}})[Fr]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Mr(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Fr]=function(){return this},e},r}function zr(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Ur.INIT}))throw new Error(Mr(12));if("undefined"===typeof n(void 0,{type:Ur.PROBE_UNKNOWN_ACTION()}))throw new Error(Mr(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Mr(14))}i[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function qr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Wr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Mr(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=qr.apply(void 0,a)(n.dispatch),Lr(Lr({},n),{},{dispatch:r})}}}function Hr(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Kr=Hr();Kr.withExtraArgument=Hr;var Qr=Kr,Gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yr=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Xr=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Jr=Object.defineProperty,$r=Object.defineProperties,Zr=Object.getOwnPropertyDescriptors,ei=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable,ri=function(e,t,n){return t in e?Jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ii=function(e,t){for(var n in t||(t={}))ti.call(t,n)&&ri(e,n,t[n]);if(ei)for(var r=0,i=ei(t);r<i.length;r++){n=i[r];ni.call(t,n)&&ri(e,n,t[n])}return e},ai=function(e,t){return $r(e,Zr(t))},oi=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(t){i(t)}},o=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},si="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?qr:qr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ui(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var ci=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Gr(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Xr([void 0],e[0].concat(this)))):new(t.bind.apply(t,Xr([void 0],e.concat(this))))},t}(Array);function li(e){return Ln(e)?Pr(e,(function(){})):e}function fi(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new ci);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Qr.withExtraArgument(n.extraArgument)):r.push(Qr));0;return r}(e)}}var hi=!0;function di(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ii(ii({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function pi(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function vi(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:li(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},u={};function c(){var t="function"===typeof e.extraReducers?pi(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,u=t[2],c=void 0===u?void 0:u,l=ii(ii({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?pi(t):[t,n,r],o=a[0],s=a[1],u=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return li(e())};else{var c=li(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=Xr([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(Dn(e))return void 0===(r=n(e,t))?e:r;if(Ln(e))return Pr(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[c]=n,u[e]=r?di(c,r):di(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:u,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var yi=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},mi=["name","message","stack","code"],gi=function(e,t){this.payload=e,this.meta=t},ki=function(e,t){this.payload=e,this.meta=t},bi=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=mi;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},_i=function(){function e(e,t,n){var r=di(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:ai(ii({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=di(e+"/pending",(function(e,t,n){return{payload:void 0,meta:ai(ii({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=di(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||bi)(e||"Rejected"),meta:ai(ii({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,u,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):yi(),h=new o;function d(e){l=e,h.abort()}var p=function(){return oi(this,null,(function(){var o,p,v,y,m,g;return Yr(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:u,extra:c}),null===(b=y)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,y];case 1:y=k.sent(),k.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),s(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:u,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:u,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new gi(e,t)},fulfillWithValue:function(e,t){return new ki(e,t)}})).then((function(t){if(t instanceof gi)throw t;return t instanceof ki?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof gi?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||s(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(wi)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function wi(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Ei="listenerMiddleware";di(Ei+"/add"),di(Ei+"/removeAll"),di(Ei+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var xi,Ti=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ti(10);pr();var Si={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ci=function(e,t){if(!e)throw Ai(t)},Ai=function(e){return new Error("Firebase Database ("+Si.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},Ii=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ni={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ii(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ri=function(e){var t=Ii(e);return Ni.encodeByteArray(t,!0)},Oi=function(e){return Ri(e).replace(/\./g,"")},Pi=function(e){try{return Ni.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Di(e){return Li(void 0,e)}function Li(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Li(e[n],t[n]));return e}var Mi=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Fi=function(){try{return Mi()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/bookShelf",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBdYLyrEZ-laggH8VLBm5CyF2AgWYw_SJ4",REACT_APP_FIREBASE_APP_ID:"1:857447729693:web:bc8a31bf38c47efc9354f4",REACT_APP_FIREBASE_AUTH_DOMAIN:"bookshelf-3479c.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://bookshelf-3479c-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"857447729693",REACT_APP_FIREBASE_PROJECT_ID:"bookshelf-3479c",REACT_APP_FIREBASE_STORAGE_BUCKET:"bookshelf-3479c.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Pi(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ji=function(e){var t,n;return null===(n=null===(t=Fi())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ui=function(e){var t=ji(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Bi=function(){var e;return null===(e=Fi())||void 0===e?void 0:e.config},Vi=function(e){var t;return null===(t=Fi())||void 0===t?void 0:t["_".concat(e)]},zi=function(){function e(){var t=this;s(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function qi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oi(JSON.stringify({alg:"none",type:"JWT"})),Oi(JSON.stringify(a)),""].join(".")}function Wi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Hi(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wi())}function Ki(){var e,t=null===(e=Fi())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Qi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Gi(){return!0===Si.NODE_CLIENT||!0===Si.NODE_ADMIN}function Yi(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Xi="FirebaseError",Ji=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=Xi,Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),$i.prototype.create),a}return f(n)}(S(Error)),$i=function(){function e(t,n,r){s(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Zi,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ji(n,a,t)}}]),e}();var Zi=/\{\$([^}]+)}/g;function ea(e){return JSON.parse(e)}function ta(e){return JSON.stringify(e)}var na=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ea(Pi(a[0])||""),n=ea(Pi(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ra(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ia(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function aa(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function oa(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function sa(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ua(s)&&ua(u)){if(!sa(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ua(e){return null!==e&&"object"===typeof e}function ca(e){for(var t=[],n=function(){var e=b(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function la(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=b(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function fa(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ha=function(){function e(){s(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var da=function(){function e(t,n){var r=this;s(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return f(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pa),void 0===r.error&&(r.error=pa),void 0===r.complete&&(r.complete=pa);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pa(){}function va(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ya=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ma(e){return e&&e._delegate?e._delegate:e}var ga=function(){function e(t,n,r){s(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ka="[DEFAULT]",ba=function(){function e(t,n){s(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new zi;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch(u){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=b(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(o(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),o(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=b(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Bm){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ka?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Bm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.component?this.component.multipleInstances?e:ka:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var _a,wa,Ea=function(){function e(t){s(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ba(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),xa=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wa||(wa={}));var Ta={debug:wa.DEBUG,verbose:wa.VERBOSE,info:wa.INFO,warn:wa.WARN,error:wa.ERROR,silent:wa.SILENT},Sa=wa.INFO,Ca=(x(_a={},wa.DEBUG,"log"),x(_a,wa.VERBOSE,"log"),x(_a,wa.INFO,"info"),x(_a,wa.WARN,"warn"),x(_a,wa.ERROR,"error"),_a),Aa=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ca[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ia=function(){function e(t){s(this,e),this.name=t,this._logLevel=Sa,this._logHandler=Aa,this._userLogHandler=null,xa.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in wa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ta[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.DEBUG].concat(t)),this._logHandler.apply(this,[this,wa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,wa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.INFO].concat(t)),this._logHandler.apply(this,[this,wa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.WARN].concat(t)),this._logHandler.apply(this,[this,wa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.ERROR].concat(t)),this._logHandler.apply(this,[this,wa.ERROR].concat(t))}}]),e}();var Na,Ra,Oa=function(e,t){return t.some((function(t){return e instanceof t}))};var Pa=new WeakMap,Da=new WeakMap,La=new WeakMap,Ma=new WeakMap,Fa=new WeakMap;var ja={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Da.get(e);if("objectStoreNames"===t)return e.objectStoreNames||La.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Va(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ua(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ra||(Ra=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(za(this),n),Va(Pa.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Va(e.apply(za(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[za(this),t].concat(r));return La.set(a,t.sort?t.sort():[t]),Va(a)}}function Ba(e){return"function"===typeof e?Ua(e):(e instanceof IDBTransaction&&function(e){if(!Da.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Da.set(e,t)}}(e),Oa(e,Na||(Na=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ja):e)}function Va(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Va(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Pa.set(t,e)})).catch((function(){})),Fa.set(t,e),t}(e);if(Ma.has(e))return Ma.get(e);var t=Ba(e);return t!==e&&(Ma.set(e,t),Fa.set(t,e)),t}var za=function(e){return Fa.get(e)};var qa,Wa,Ha=["get","getKey","getAll","getAllKeys","count"],Ka=["put","add","delete","clear"],Qa=new Map;function Ga(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Qa.get(t))return Qa.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ka.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ha.includes(n))){var a=function(){var e=E(_().mark((function e(t){var a,o,s,u,c,l,f=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Qa.set(t,a),a}}}ja=function(e){return Lr(Lr({},e),{},{get:function(t,n,r){return Ga(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ga(t,n)||e.has(t,n)}})}(ja);var Ya=function(){function e(t){s(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Xa="@firebase/app",Ja="0.9.3",$a=new Ia("@firebase/app"),Za="[DEFAULT]",eo=(x(qa={},Xa,"fire-core"),x(qa,"@firebase/app-compat","fire-core-compat"),x(qa,"@firebase/analytics","fire-analytics"),x(qa,"@firebase/analytics-compat","fire-analytics-compat"),x(qa,"@firebase/app-check","fire-app-check"),x(qa,"@firebase/app-check-compat","fire-app-check-compat"),x(qa,"@firebase/auth","fire-auth"),x(qa,"@firebase/auth-compat","fire-auth-compat"),x(qa,"@firebase/database","fire-rtdb"),x(qa,"@firebase/database-compat","fire-rtdb-compat"),x(qa,"@firebase/functions","fire-fn"),x(qa,"@firebase/functions-compat","fire-fn-compat"),x(qa,"@firebase/installations","fire-iid"),x(qa,"@firebase/installations-compat","fire-iid-compat"),x(qa,"@firebase/messaging","fire-fcm"),x(qa,"@firebase/messaging-compat","fire-fcm-compat"),x(qa,"@firebase/performance","fire-perf"),x(qa,"@firebase/performance-compat","fire-perf-compat"),x(qa,"@firebase/remote-config","fire-rc"),x(qa,"@firebase/remote-config-compat","fire-rc-compat"),x(qa,"@firebase/storage","fire-gcs"),x(qa,"@firebase/storage-compat","fire-gcs-compat"),x(qa,"@firebase/firestore","fire-fst"),x(qa,"@firebase/firestore-compat","fire-fst-compat"),x(qa,"fire-js","fire-js"),x(qa,"firebase","fire-js-all"),qa),to=new Map,no=new Map;function ro(e,t){try{e.container.addComponent(t)}catch(n){$a.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function io(e){var t=e.name;if(no.has(t))return $a.debug("There were multiple attempts to register component ".concat(t,".")),!1;no.set(t,e);var n,r=C(to.values());try{for(r.s();!(n=r.n()).done;){ro(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ao(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var oo=(x(Wa={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),x(Wa,"bad-app-name","Illegal App name: '{$appName}"),x(Wa,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),x(Wa,"app-deleted","Firebase App named '{$appName}' already deleted"),x(Wa,"no-options","Need to provide options, when not being deployed to hosting via source."),x(Wa,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),x(Wa,"invalid-log-argument","First argument to `onLog` must be null or a function."),x(Wa,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),x(Wa,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),x(Wa,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),x(Wa,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Wa),so=new $i("app","Firebase",oo),uo=function(){function e(t,n,r){var i=this;s(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",(function(){return i}),"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}]),e}(),co="9.17.1";function lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Za,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw so.create("bad-app-name",{appName:String(i)});if(n||(n=Bi()),!n)throw so.create("no-options");var a=to.get(i);if(a){if(sa(n,a.options)&&sa(r,a.config))return a;throw so.create("duplicate-app",{appName:i})}var o,s=new Ea(i),u=C(no.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new uo(n,r,s);return to.set(i,l),l}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=to.get(e);if(!t&&e===Za)return lo();if(!t)throw so.create("no-app",{appName:e});return t}function ho(e,t,n){var r,i=null!==(r=eo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void $a.warn(s.join(" "))}io(new ga("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var po="firebase-heartbeat-database",vo=1,yo="firebase-heartbeat-store",mo=null;function go(){return mo||(mo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Va(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Va(s.result),e.oldVersion,e.newVersion,Va(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}(po,vo,{upgrade:function(e,t){if(0===t)e.createObjectStore(yo)}}).catch((function(e){throw so.create("idb-open",{originalErrorMessage:e.message})}))),mo}function ko(e){return bo.apply(this,arguments)}function bo(){return bo=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,go();case 3:return n=e.sent,e.abrupt("return",n.transaction(yo).objectStore(yo).get(Eo(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ji?$a.warn(e.t0.message):(r=so.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),$a.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),bo.apply(this,arguments)}function _o(e,t){return wo.apply(this,arguments)}function wo(){return wo=E(_().mark((function e(t,n){var r,i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,go();case 3:return r=e.sent,i=r.transaction(yo,"readwrite"),a=i.objectStore(yo),e.next=8,a.put(n,Eo(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ji?$a.warn(e.t0.message):(o=so.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),$a.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),wo.apply(this,arguments)}function Eo(e){return"".concat(e.name,"!").concat(e.options.appId)}var xo=1024,To=function(){function e(t){var n=this;s(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Io(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return f(e,[{key:"triggerHeartbeat",value:function(){var e=E(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=So(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=E(_().mark((function e(){var t,n,r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=So(),n=Co(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Oi(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function So(){return(new Date).toISOString().substring(0,10)}function Co(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xo,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),No(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),No(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ao,Io=function(){function e(t){s(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return f(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yi()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(mT){t(mT)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ko(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_o(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_o(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(o(r.heartbeats),o(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function No(e){return Oi(JSON.stringify({version:2,heartbeats:e})).length}Ao="",io(new ga("platform-logger",(function(e){return new Ya(e)}),"PRIVATE")),io(new ga("heartbeat",(function(e){return new To(e)}),"PRIVATE")),ho(Xa,Ja,Ao),ho(Xa,Ja,"esm2017"),ho("fire-js","");function Ro(){return Ro="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ro.apply(this,arguments)}ho("firebase","9.17.1","app");var Oo,Po="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Do={},Lo=Lo||{},Mo=Po||self;function Fo(){}function jo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Uo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Bo="closure_uid_"+(1e9*Math.random()>>>0),Vo=0;function zo(e,t,n){return e.call.apply(e.bind,arguments)}function qo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Wo(e,t,n){return(Wo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zo:qo).apply(null,arguments)}function Ho(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ko(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Qo(){this.s=this.s,this.o=this.o}Qo.prototype.s=!1,Qo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Bo)&&e[Bo]||(e[Bo]=++Vo)}(this)},Qo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Go=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Yo(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Xo(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(jo(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Jo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jo.prototype.h=function(){this.defaultPrevented=!0};var $o=function(){if(!Mo.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Mo.addEventListener("test",Fo,t),Mo.removeEventListener("test",Fo,t)}catch(Vn){}return e}();function Zo(e){return/^[\s\xa0]*$/.test(e)}var es=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ts(e,t){return e<t?-1:e>t?1:0}function ns(){var e=Mo.navigator;return e&&(e=e.userAgent)?e:""}function rs(e){return-1!=ns().indexOf(e)}function is(e){return is[" "](e),e}is[" "]=Fo;var as,os=rs("Opera"),ss=rs("Trident")||rs("MSIE"),us=rs("Edge"),cs=us||ss,ls=rs("Gecko")&&!(-1!=ns().toLowerCase().indexOf("webkit")&&!rs("Edge"))&&!(rs("Trident")||rs("MSIE"))&&!rs("Edge"),fs=-1!=ns().toLowerCase().indexOf("webkit")&&!rs("Edge");function hs(){var e=Mo.document;return e?e.documentMode:void 0}e:{var ds="",ps=function(){var e=ns();return ls?/rv:([^\);]+)(\)|;)/.exec(e):us?/Edge\/([\d\.]+)/.exec(e):ss?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fs?/WebKit\/(\S+)/.exec(e):os?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ps&&(ds=ps?ps[1]:""),ss){var vs=hs();if(null!=vs&&vs>parseFloat(ds)){as=String(vs);break e}}as=ds}var ys,ms={};function gs(){return function(e){var t=ms;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=es(String(as)).split("."),n=es("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ts(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ts(0==a[2].length,0==o[2].length)||ts(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Mo.document&&ss){var ks=hs();ys=ks||(parseInt(as,10)||void 0)}else ys=void 0;var bs=ys;function _s(e,t){if(Jo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ls){e:{try{is(t.nodeName);var i=!0;break e}catch(Bn){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ws[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_s.X.h.call(this)}}Ko(_s,Jo);var ws={2:"touch",3:"pen",4:"mouse"};_s.prototype.h=function(){_s.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Es="closure_listenable_"+(1e6*Math.random()|0),xs=0;function Ts(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++xs,this.ba=this.ea=!1}function Ss(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Cs(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function As(e){var t={};for(var n in e)t[n]=e[n];return t}var Is="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ns(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Is.length;a++)n=Is[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Rs(e){this.src=e,this.g={},this.h=0}function Os(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Go(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ss(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ps(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Rs.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ps(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Ts(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Ds="closure_lm_"+(1e6*Math.random()|0),Ls={};function Ms(e,t,n,r,i){if(r&&r.once)return js(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ms(e,t[a],n,r,i);return null}return n=Hs(n),e&&e[Es]?e.N(t,n,Uo(r)?!!r.capture:!!r,i):Fs(e,t,n,!1,r,i)}function Fs(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Uo(i)?!!i.capture:!!i,s=qs(e);if(s||(e[Ds]=s=new Rs(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=zs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$o||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Vs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function js(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)js(e,t[a],n,r,i);return null}return n=Hs(n),e&&e[Es]?e.O(t,n,Uo(r)?!!r.capture:!!r,i):Fs(e,t,n,!0,r,i)}function Us(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Us(e,t[a],n,r,i);else r=Uo(r)?!!r.capture:!!r,n=Hs(n),e&&e[Es]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ps(a=e.g[t],n,r,i))&&(Ss(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=qs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ps(t,n,r,i)),(n=-1<e?t[e]:null)&&Bs(n))}function Bs(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Es])Os(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Vs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qs(t))?(Os(n,e),0==n.h&&(n.src=null,t[Ds]=null)):Ss(e)}}}function Vs(e){return e in Ls?Ls[e]:Ls[e]="on"+e}function zs(e,t){if(e.ba)e=!0;else{t=new _s(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Bs(e),e=n.call(r,t)}return e}function qs(e){return(e=e[Ds])instanceof Rs?e:null}var Ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hs(e){return"function"===typeof e?e:(e[Ws]||(e[Ws]=function(t){return e.handleEvent(t)}),e[Ws])}function Ks(){Qo.call(this),this.i=new Rs(this),this.P=this,this.I=null}function Qs(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Jo(t,e);else if(t instanceof Jo)t.target=t.target||e;else{var i=t;Ns(t=new Jo(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Gs(o,r,!0,t)&&i}if(i=Gs(o=t.g=e,r,!0,t)&&i,i=Gs(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Gs(o=t.g=n[a],r,!1,t)&&i}function Gs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Os(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ko(Ks,Qo),Ks.prototype[Es]=!0,Ks.prototype.removeEventListener=function(e,t,n,r){Us(this,e,t,n,r)},Ks.prototype.M=function(){if(Ks.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ss(n[r]);delete t.g[e],t.h--}}this.I=null},Ks.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ks.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ys=Mo.JSON.stringify;function Xs(){var e=iu,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Js,$s=function(){function e(){s(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=Zs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Zs=new(function(){function e(t,n){s(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new eu}),(function(e){return e.reset()})),eu=function(){function e(){s(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function tu(e){Mo.setTimeout((function(){throw e}),0)}function nu(e,t){Js||function(){var e=Mo.Promise.resolve(void 0);Js=function(){e.then(au)}}(),ru||(Js(),ru=!0),iu.add(e,t)}var ru=!1,iu=new $s;function au(){for(var e;e=Xs();){try{e.h.call(e.g)}catch(Vn){tu(Vn)}var t=Zs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ru=!1}function ou(e,t){Ks.call(this),this.h=e||1,this.g=t||Mo,this.j=Wo(this.lb,this),this.l=Date.now()}function su(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function uu(e,t,n){if("function"===typeof e)n&&(e=Wo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Wo(e.handleEvent,e)}return 2147483647<Number(t)?-1:Mo.setTimeout(e,t||0)}function cu(e){e.g=uu((function(){e.g=null,e.i&&(e.i=!1,cu(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ko(ou,Ks),(Oo=ou.prototype).ca=!1,Oo.R=null,Oo.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qs(this,"tick"),this.ca&&(su(this),this.start()))}},Oo.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oo.M=function(){ou.X.M.call(this),su(this),delete this.g};var lu=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:cu(this)}},{key:"M",value:function(){Ro(p(n.prototype),"M",this).call(this),this.g&&(Mo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Qo);function fu(e){Qo.call(this),this.h=e,this.g={}}Ko(fu,Qo);var hu=[];function du(e,t,n,r){Array.isArray(n)||(n&&(hu[0]=n.toString()),n=hu);for(var i=0;i<n.length;i++){var a=Ms(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function pu(e){Cs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Bs(e)}),e),e.g={}}function vu(){this.g=!0}function yu(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ys(n)}catch(Pn){return t}}(e,n)+(r?" "+r:"")}))}fu.prototype.M=function(){fu.X.M.call(this),pu(this)},fu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vu.prototype.Aa=function(){this.g=!1},vu.prototype.info=function(){};var mu={},gu=null;function ku(){return gu=gu||new Ks}function bu(e){Jo.call(this,mu.Pa,e)}function _u(e){var t=ku();Qs(t,new bu(t))}function wu(e,t){Jo.call(this,mu.STAT_EVENT,e),this.stat=t}function Eu(e){var t=ku();Qs(t,new wu(t,e))}function xu(e,t){Jo.call(this,mu.Qa,e),this.size=t}function Tu(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Mo.setTimeout((function(){e()}),t)}mu.Pa="serverreachability",Ko(bu,Jo),mu.STAT_EVENT="statevent",Ko(wu,Jo),mu.Qa="timingevent",Ko(xu,Jo);var Su={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Cu={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Au(){}function Iu(e){return e.h||(e.h=e.i())}function Nu(){}Au.prototype.h=null;var Ru,Ou={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Pu(){Jo.call(this,"d")}function Du(){Jo.call(this,"c")}function Lu(){}function Mu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new fu(this),this.O=ju,e=cs?125:void 0,this.T=new ou(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Fu}function Fu(){this.i=null,this.g="",this.h=!1}Ko(Pu,Jo),Ko(Du,Jo),Ko(Lu,Au),Lu.prototype.g=function(){return new XMLHttpRequest},Lu.prototype.i=function(){return{}},Ru=new Lu;var ju=45e3,Uu={},Bu={};function Vu(e,t,n){e.K=1,e.v=oc(tc(t)),e.s=n,e.P=!0,zu(e,null)}function zu(e,t){e.F=Date.now(),Ku(e),e.A=tc(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),kc(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Fu,e.g=kl(e.l,n?t:null,!e.s),0<e.N&&(e.L=new lu(Wo(e.La,e,e.g),e.N)),du(e.S,e.g,"readystatechange",e.ib),t=e.H?As(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),_u(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function qu(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Wu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Hu(e,n))==Bu){4==t&&(e.o=4,Eu(14),i=!1),yu(e.j,e.m,null,"[Incomplete Response]");break}if(r==Uu){e.o=4,Eu(15),yu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}yu(e.j,e.m,r,null),Ju(e,r)}qu(e)&&r!=Bu&&r!=Uu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Eu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),fl(t),t.K=!0,Eu(11))):(yu(e.j,e.m,n,"[Invalid Chunked Response]"),Xu(e),Yu(e))}function Hu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Bu:(n=Number(t.substring(n,r)),isNaN(n)?Uu:(r+=1)+n>t.length?Bu:(t=t.substr(r,n),e.C=r+n,t))}function Ku(e){e.V=Date.now()+e.O,Qu(e,e.O)}function Qu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Tu(Wo(e.gb,e),t)}function Gu(e){e.B&&(Mo.clearTimeout(e.B),e.B=null)}function Yu(e){0==e.l.G||e.I||pl(e.l,e)}function Xu(e){Gu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,su(e.T),pu(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ju(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Sc(n.h,e)))if(!e.J&&Sc(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dl(n),rl(n)}ll(n),Eu(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Tu(Wo(n.cb,n),6e3));if(1>=Tc(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else yl(n,11)}else if((e.J||n.g==e)&&dl(n),!Zo(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Cc(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,ac(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=gl(r,r.H?r.ka:null,r.V),d.J){Ac(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Gu(p),Ku(p)),r.g=d}else cl(r);0<n.i.length&&al(n)}else"stop"!=a[0]&&"close"!=a[0]||yl(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?yl(n,7):nl(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}_u()}catch(a){}}function $u(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(jo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(jo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(jo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Oo=Mu.prototype).setTimeout=function(e){this.O=e},Oo.ib=function(e){e=e.target;var t=this.L;t&&3==Xc(e)?t.l():this.La(e)},Oo.La=function(e){try{if(e==this.g)e:{var t=Xc(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||cs||this.g&&(this.h.h||this.g.fa()||Jc(this.g)))){this.I||4!=t||7==n||_u(),Gu(this);var r=this.g.aa();this.Y=r;t:if(qu(this)){var i=Jc(this.g);e="";var a=i.length,o=4==Xc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xu(this),Yu(this);var s="";break t}this.h.i=new Mo.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zo(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Eu(12),Xu(this),Yu(this);break e}yu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ju(this,r)}this.P?(Wu(this,t,s),cs&&this.i&&3==t&&(du(this.S,this.T,"tick",this.hb),this.T.start())):(yu(this.j,this.m,s,null),Ju(this,s)),4==t&&Xu(this),this.i&&!this.I&&(4==t?pl(this.l,this):(this.i=!1,Ku(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Eu(12)):(this.o=0,Eu(13)),Xu(this),Yu(this)}}}catch(t){}},Oo.hb=function(){if(this.g){var e=Xc(this.g),t=this.g.fa();this.C<t.length&&(Gu(this),Wu(this,e,t),this.i&&4!=e&&Ku(this))}},Oo.cancel=function(){this.I=!0,Xu(this)},Oo.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(_u(),Eu(17)),Xu(this),this.o=2,Yu(this)):Qu(this,this.V-e)};var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ec(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ec){this.h=void 0!==t?t:e.h,nc(this,e.j),this.s=e.s,this.g=e.g,rc(this,e.m),this.l=e.l,t=e.i;var n=new vc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ic(this,n),this.o=e.o}else e&&(n=String(e).match(Zu))?(this.h=!!t,nc(this,n[1]||"",!0),this.s=sc(n[2]||""),this.g=sc(n[3]||"",!0),rc(this,n[4]),this.l=sc(n[5]||"",!0),ic(this,n[6]||"",!0),this.o=sc(n[7]||"")):(this.h=!!t,this.i=new vc(null,this.h))}function tc(e){return new ec(e)}function nc(e,t,n){e.j=n?sc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function rc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ic(e,t,n){t instanceof vc?(e.i=t,function(e,t){t&&!e.j&&(yc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mc(this,t),kc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=uc(t,dc)),e.i=new vc(t,e.h))}function ac(e,t,n){e.i.set(t,n)}function oc(e){return ac(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function sc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function uc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,cc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ec.prototype.toString=function(){var e=[],t=this.j;t&&e.push(uc(t,lc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(uc(t,lc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(uc(n,"/"==n.charAt(0)?hc:fc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",uc(n,pc)),e.join("")};var lc=/[#\/\?@]/g,fc=/[#\?:]/g,hc=/[#\?]/g,dc=/[#\?@]/g,pc=/#/g;function vc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function mc(e,t){yc(e),t=bc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function gc(e,t){return yc(e),t=bc(e,t),e.g.has(t)}function kc(e,t,n){mc(e,t),0<n.length&&(e.i=null,e.g.set(bc(e,t),Yo(n)),e.h+=n.length)}function bc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Oo=vc.prototype).add=function(e,t){yc(this),this.i=null,e=bc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Oo.forEach=function(e,t){yc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Oo.oa=function(){yc(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Oo.W=function(e){yc(this);var t=[];if("string"===typeof e)gc(this,e)&&(t=t.concat(this.g.get(bc(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Oo.set=function(e,t){return yc(this),this.i=null,gc(this,e=bc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Oo.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Oo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var _c=f((function e(t,n){s(this,e),this.h=t,this.g=n}));function wc(e){this.l=e||Ec,Mo.PerformanceNavigationTiming?e=0<(e=Mo.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Mo.g&&Mo.g.Ga&&Mo.g.Ga()&&Mo.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ec=10;function xc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Tc(e){return e.h?1:e.g?e.g.size:0}function Sc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Cc(e,t){e.g?e.g.add(t):e.h=t}function Ac(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ic(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Yo(e.i)}function Nc(){}function Rc(){this.g=new Nc}function Oc(e,t,n){var r=n||"";try{$u(e,(function(e,n){var i=e;Uo(e)&&(i=Ys(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Bn){}}function Dc(e){this.l=e.ac||null,this.j=e.jb||!1}function Lc(e,t){Ks.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Mc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wc.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Nc.prototype.stringify=function(e){return Mo.JSON.stringify(e,void 0)},Nc.prototype.parse=function(e){return Mo.JSON.parse(e,void 0)},Ko(Dc,Au),Dc.prototype.g=function(){return new Lc(this.l,this.j)},Dc.prototype.i=function(e){return function(){return e}}({}),Ko(Lc,Ks);var Mc=0;function Fc(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function jc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Uc(e)}function Uc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Oo=Lc.prototype).open=function(e,t){if(this.readyState!=Mc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Uc(this)},Oo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Mo).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Oo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jc(this)),this.readyState=Mc},Oo.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Uc(this)),this.g&&(this.readyState=3,Uc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Mo.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fc(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Oo.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jc(this):Uc(this),3==this.readyState&&Fc(this)}},Oo.Va=function(e){this.g&&(this.response=this.responseText=e,jc(this))},Oo.Ua=function(e){this.g&&(this.response=e,jc(this))},Oo.ga=function(){this.g&&jc(this)},Oo.setRequestHeader=function(e,t){this.v.append(e,t)},Oo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Oo.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Bc=Mo.JSON.parse;function Vc(e){Ks.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zc,this.K=this.L=!1}Ko(Vc,Ks);var zc="",qc=/^https?$/i,Wc=["POST","PUT"];function Hc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Kc(e),Gc(e)}function Kc(e){e.D||(e.D=!0,Qs(e,"complete"),Qs(e,"error"))}function Qc(e){if(e.h&&"undefined"!=typeof Lo&&(!e.C[1]||4!=Xc(e)||2!=e.aa()))if(e.v&&4==Xc(e))uu(e.Ha,0,e);else if(Qs(e,"readystatechange"),4==Xc(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Zu)[1]||null;if(!a&&Mo.self&&Mo.self.location){var o=Mo.self.location.protocol;a=o.substr(0,o.length-1)}i=!qc.test(a?a.toLowerCase():"")}t=i}if(t)Qs(e,"complete"),Qs(e,"success");else{e.m=6;try{var s=2<Xc(e)?e.g.statusText:""}catch(jn){s=""}e.j=s+" ["+e.aa()+"]",Kc(e)}}finally{Gc(e)}}}function Gc(e,t){if(e.g){Yc(e);var n=e.g,r=e.C[0]?Fo:null;e.g=null,e.C=null,t||Qs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Yc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Mo.clearTimeout(e.A),e.A=null)}function Xc(e){return e.g?e.g.readyState:0}function Jc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case zc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Yn){return null}}function $c(e){var t="";return Cs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$c(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ac(e,t,n))}function el(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tl(e){this.Ca=0,this.i=[],this.j=new vu,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=el("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=el("baseRetryDelayMs",5e3,e),this.bb=el("retryDelaySeedMs",1e4,e),this.$a=el("forwardChannelMaxRetries",2,e),this.ta=el("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new wc(e&&e.concurrentRequestLimit),this.Fa=new Rc,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function nl(e){if(il(e),3==e.G){var t=e.U++,n=tc(e.F);ac(n,"SID",e.I),ac(n,"RID",t),ac(n,"TYPE","terminate"),sl(e,n),(t=new Mu(e,e.j,t,void 0)).K=2,t.v=oc(tc(n)),n=!1,Mo.navigator&&Mo.navigator.sendBeacon&&(n=Mo.navigator.sendBeacon(t.v.toString(),"")),!n&&Mo.Image&&((new Image).src=t.v,n=!0),n||(t.g=kl(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ku(t)}ml(e)}function rl(e){e.g&&(fl(e),e.g.cancel(),e.g=null)}function il(e){rl(e),e.u&&(Mo.clearTimeout(e.u),e.u=null),dl(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Mo.clearTimeout(e.m),e.m=null)}function al(e){xc(e.h)||e.m||(e.m=!0,nu(e.Ja,e),e.C=0)}function ol(e,t){var n;n=t?t.m:e.U++;var r=tc(e.F);ac(r,"SID",e.I),ac(r,"RID",n),ac(r,"AID",e.T),sl(e,r),e.o&&e.s&&Zc(r,e.o,e.s),n=new Mu(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=ul(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Cc(e.h,n),Vu(n,r,t)}function sl(e,t){e.ia&&Cs(e.ia,(function(e,n){ac(t,n,e)})),e.l&&$u({},(function(e,n){ac(t,n,e)}))}function ul(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Wo(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Oc(l,o,"req"+c+"_")}catch(pr){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function cl(e){e.g||e.u||(e.Z=1,nu(e.Ia,e),e.A=0)}function ll(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Tu(Wo(e.Ia,e),vl(e,e.A)),e.A++,!0)}function fl(e){null!=e.B&&(Mo.clearTimeout(e.B),e.B=null)}function hl(e){e.g=new Mu(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=tc(e.sa);ac(t,"RID","rpc"),ac(t,"SID",e.I),ac(t,"CI",e.L?"0":"1"),ac(t,"AID",e.T),ac(t,"TYPE","xmlhttp"),sl(e,t),e.o&&e.s&&Zc(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=oc(tc(t)),n.s=null,n.P=!0,zu(n,e)}function dl(e){null!=e.v&&(Mo.clearTimeout(e.v),e.v=null)}function pl(e,t){var n=null;if(e.g==t){dl(e),fl(e),e.g=null;var r=2}else{if(!Sc(e.h,t))return;n=t.D,Ac(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Qs(r=ku(),new xu(r,n)),al(e)}else cl(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Tc(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Tu(Wo(e.Ja,e,t),vl(e,e.C)),e.C++,!0))}(e,t)||2==r&&ll(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:yl(e,5);break;case 4:yl(e,10);break;case 3:yl(e,6);break;default:yl(e,2)}}function vl(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function yl(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Wo(e.kb,e);n||(n=new ec("//www.google.com/images/cleardot.gif"),Mo.location&&"http"==Mo.location.protocol||nc(n,"https"),oc(n)),function(e,t){var n=new vu;if(Mo.Image){var r=new Image;r.onload=Ho(Pc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ho(Pc,n,r,"TestLoadImage: error",!1,t),r.onabort=Ho(Pc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ho(Pc,n,r,"TestLoadImage: timeout",!1,t),Mo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Eu(2);e.G=0,e.l&&e.l.va(t),ml(e),il(e)}function ml(e){if(e.G=0,e.la=[],e.l){var t=Ic(e.h);0==t.length&&0==e.i.length||(Xo(e.la,t),Xo(e.la,e.i),e.h.i.length=0,Yo(e.i),e.i.length=0),e.l.ua()}}function gl(e,t,n){var r=n instanceof ec?tc(n):new ec(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),rc(r,r.m);else{var i=Mo.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ec(null,void 0);r&&nc(a,r),t&&(a.g=t),i&&rc(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&ac(r,n,t),ac(r,"VER",e.ma),sl(e,r),r}function kl(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Vc(new Dc({jb:!0})):new Vc(e.ra)).Ka(e.H),t}function bl(){}function _l(){if(ss&&!(10<=Number(bs)))throw Error("Environmental error: no available transport.")}function wl(e,t){Ks.call(this),this.g=new tl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Zo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zo(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Tl(this)}function El(e){Pu.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xl(){Du.call(this),this.status=1}function Tl(e){this.g=e}(Oo=Vc.prototype).Ka=function(e){this.L=e},Oo.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ru.g(),this.C=this.u?Iu(this.u):Iu(Ru),this.g.onreadystatechange=Wo(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Hc(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Mo.FormData&&e instanceof Mo.FormData,!(0<=Go(Wc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=C(n);try{for(c.s();!(u=c.n()).done;){var l=b(u.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yc(this),0<this.B&&((this.K=function(e){return ss&&gs()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wo(this.qa,this)):this.A=uu(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Hc(this,s)}},Oo.qa=function(){"undefined"!=typeof Lo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},Oo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qs(this,"complete"),Qs(this,"abort"),Gc(this))},Oo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gc(this,!0)),Vc.X.M.call(this)},Oo.Ha=function(){this.s||(this.F||this.v||this.l?Qc(this):this.fb())},Oo.fb=function(){Qc(this)},Oo.aa=function(){try{return 2<Xc(this)?this.g.status:-1}catch(Un){return-1}},Oo.fa=function(){try{return this.g?this.g.responseText:""}catch(Un){return""}},Oo.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bc(t)}},Oo.Ea=function(){return this.m},Oo.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Oo=tl.prototype).ma=8,Oo.G=1,Oo.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Mu(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Ns(n=As(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ul(this,t,r),ac(i=tc(this.F),"RID",e),ac(i,"CVER",22),this.D&&ac(i,"X-HTTP-Session-Id",this.D),sl(this,i),n&&(this.N?r="headers="+encodeURIComponent(String($c(n)))+"&"+r:this.o&&Zc(i,this.o,n)),Cc(this.h,t),this.Ya&&ac(i,"TYPE","init"),this.O?(ac(i,"$req",r),ac(i,"SID","null"),t.Z=!0,Vu(t,i,null)):Vu(t,i,r),this.G=2}}else 3==this.G&&(e?ol(this,e):0==this.i.length||xc(this.h)||ol(this))},Oo.Ia=function(){if(this.u=null,hl(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Tu(Wo(this.eb,this),e)}},Oo.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Eu(10),rl(this),hl(this))},Oo.cb=function(){null!=this.v&&(this.v=null,rl(this),ll(this),Eu(19))},Oo.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Eu(2)):(this.j.info("Failed to ping google.com"),Eu(1))},(Oo=bl.prototype).xa=function(){},Oo.wa=function(){},Oo.va=function(){},Oo.ua=function(){},Oo.Ra=function(){},_l.prototype.g=function(e,t){return new wl(e,t)},Ko(wl,Ks),wl.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Eu(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=gl(e,null,e.V),al(e)},wl.prototype.close=function(){nl(this.g)},wl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ys(e),e=n);t.i.push(new _c(t.ab++,e)),3==t.G&&al(t)},wl.prototype.M=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,wl.X.M.call(this)},Ko(El,Pu),Ko(xl,Du),Ko(Tl,bl),Tl.prototype.xa=function(){Qs(this.g,"a")},Tl.prototype.wa=function(e){Qs(this.g,new El(e))},Tl.prototype.va=function(e){Qs(this.g,new xl)},Tl.prototype.ua=function(){Qs(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,wl.prototype.send=wl.prototype.u,wl.prototype.open=wl.prototype.m,wl.prototype.close=wl.prototype.close,Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,Cu.COMPLETE="complete",Nu.EventType=Ou,Ou.OPEN="a",Ou.CLOSE="b",Ou.ERROR="c",Ou.MESSAGE="d",Ks.prototype.listen=Ks.prototype.N,Vc.prototype.listenOnce=Vc.prototype.O,Vc.prototype.getLastError=Vc.prototype.Oa,Vc.prototype.getLastErrorCode=Vc.prototype.Ea,Vc.prototype.getStatus=Vc.prototype.aa,Vc.prototype.getResponseJson=Vc.prototype.Sa,Vc.prototype.getResponseText=Vc.prototype.fa,Vc.prototype.send=Vc.prototype.da,Vc.prototype.setWithCredentials=Vc.prototype.Ka;var Sl=Do.createWebChannelTransport=function(){return new _l},Cl=Do.getStatEventTarget=function(){return ku()},Al=Do.ErrorCode=Su,Il=Do.EventType=Cu,Nl=Do.Event=mu,Rl=Do.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ol=Do.FetchXmlHttpFactory=Dc,Pl=Do.WebChannel=Nu,Dl=Do.XhrIo=Vc,Ll="@firebase/firestore",Ml=function(){function e(t){s(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ml.UNAUTHENTICATED=new Ml(null),Ml.GOOGLE_CREDENTIALS=new Ml("google-credentials-uid"),Ml.FIRST_PARTY=new Ml("first-party-uid"),Ml.MOCK_USER=new Ml("mock-user");var Fl="9.17.1",jl=new Ia("@firebase/firestore");function Ul(){return jl.logLevel}function Bl(e){if(jl.logLevel<=wa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ql);jl.debug.apply(jl,["Firestore (".concat(Fl,"): ").concat(e)].concat(o(i)))}}function Vl(e){if(jl.logLevel<=wa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ql);jl.error.apply(jl,["Firestore (".concat(Fl,"): ").concat(e)].concat(o(i)))}}function zl(e){if(jl.logLevel<=wa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ql);jl.warn.apply(jl,["Firestore (".concat(Fl,"): ").concat(e)].concat(o(i)))}}function ql(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Fl,") INTERNAL ASSERTION FAILED: ")+e;throw Vl(t),new Error(t)}function Hl(e,t){e||Wl()}function Kl(e,t){return e}var Ql={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gl=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return f(n)}(Ji),Yl=f((function e(){var t=this;s(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xl=f((function e(t,n){s(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Jl=function(){function e(){s(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ml.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),$l=function(){function e(t){s(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Zl=function(){function e(t){s(this,e),this.t=t,this.currentUser=Ml.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Yl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Yl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Bl("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Bl("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Yl)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Bl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Hl("string"==typeof n.accessToken),new Xl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Hl(null===e||"string"==typeof e),new Ml(e)}}]),e}(),ef=function(){function e(t,n,r,i){s(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ml.FIRST_PARTY,this.p=new Map}return f(e,[{key:"I",value:function(){return this.g?this.g():(Hl(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),tf=function(){function e(t,n,r,i){s(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new ef(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ml.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),nf=f((function e(t){s(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),rf=function(){function e(t){s(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Bl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Bl("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Bl("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Bl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Hl("string"==typeof t.token),e.A=t.token,new nf(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function af(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var of=function(){function e(){s(this,e)}return f(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=af(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function sf(e,t){return e<t?-1:e>t?1:0}function uf(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var cf=function(){function e(t,n){if(s(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Gl(Ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Gl(Ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Gl(Ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gl(Ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?sf(this.nanoseconds,e.nanoseconds):sf(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),lf=function(){function e(t){s(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new cf(0,0))}},{key:"max",value:function(){return new e(new cf(253402300799,999999999))}}]),e}(),ff=function(){function e(t,n,r){s(this,e),void 0===n?n=0:n>t.length&&Wl(),void 0===r?r=t.length-n:r>t.length-n&&Wl(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),hf=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,s=r;a<s.length;a++){var u=s[a];if(u.indexOf("//")>=0)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,o(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ff),df=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pf=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return df.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Gl(Ql.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gl(Ql.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Gl(Ql.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ff),vf=function(){function e(t){s(this,e),this.path=t}return f(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===hf.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(hf.fromString(t))}},{key:"fromName",value:function(t){return new e(hf.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(hf.emptyPath())}},{key:"comparator",value:function(e,t){return hf.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new hf(t.slice()))}}]),e}(),yf=f((function e(t,n,r,i){s(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));yf.UNKNOWN_ID=-1;function mf(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=lf.fromTimestamp(1e9===r?new cf(n+1,0):new cf(n,r));return new kf(i,vf.empty(),t)}function gf(e){return new kf(e.readTime,e.key,-1)}var kf=function(){function e(t,n,r){s(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return f(e,null,[{key:"min",value:function(){return new e(lf.min(),vf.empty(),-1)}},{key:"max",value:function(){return new e(lf.max(),vf.empty(),-1)}}]),e}();function bf(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=vf.comparator(e.documentKey,t.documentKey))?n:sf(e.largestBatchId,t.largestBatchId)}var _f="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wf=function(){function e(){s(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ef(e){return xf.apply(this,arguments)}function xf(){return xf=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ql.FAILED_PRECONDITION&&t.message===_f){e.next=2;break}throw t;case 2:Bl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),xf.apply(this,arguments)}var Tf=function(){function e(t){var n=this;s(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Wl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Sf(e){return"IndexedDbTransactionError"===e.name}var Cf=function(){function e(t,n){var r=this;s(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Cf.at=-1;var Af=f((function e(t,n,r,i,a,o,u,c){s(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=c})),If=function(){function e(t,n){s(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Nf(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rf(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Of(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Pf(e){return null==e}function Df(e){return 0===e&&1/e==-1/0}function Lf(e){return"number"==typeof e&&Number.isInteger(e)&&!Df(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Mf=function(e){function t(e){s(this,t),this.binaryString=e}return f(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return sf(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Mf.EMPTY_BYTE_STRING=new Mf("");var Ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jf(e){if(Hl(!!e),"string"==typeof e){var t=0,n=Ff.exec(e);if(Hl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Uf(e.seconds),nanos:Uf(e.nanos)}}function Uf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bf(e){return"string"==typeof e?Mf.fromBase64String(e):Mf.fromUint8Array(e)}function Vf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zf(e){var t=e.mapValue.fields.__previous_value__;return Vf(t)?zf(t):t}function qf(e){var t=jf(e.mapValue.fields.__local_write_time__.timestampValue);return new cf(t.seconds,t.nanos)}var Wf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vf(e)?4:ah(e)?9007199254740991:10:Wl()}function Kf(e,t){if(e===t)return!0;var n=Hf(e);if(n!==Hf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qf(e).isEqual(qf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=jf(e.timestampValue),r=jf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bf(e.bytesValue).isEqual(Bf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Uf(e.geoPointValue.latitude)===Uf(t.geoPointValue.latitude)&&Uf(e.geoPointValue.longitude)===Uf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Uf(e.integerValue)===Uf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Uf(e.doubleValue),r=Uf(t.doubleValue);return n===r?Df(n)===Df(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uf(e.arrayValue.values||[],t.arrayValue.values||[],Kf);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nf(n)!==Nf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Kf(n[i],r[i])))return!1;return!0}(e,t);default:return Wl()}}function Qf(e,t){return void 0!==(e.values||[]).find((function(e){return Kf(e,t)}))}function Gf(e,t){if(e===t)return 0;var n=Hf(e),r=Hf(t);if(n!==r)return sf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sf(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Uf(e.integerValue||e.doubleValue),r=Uf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yf(e.timestampValue,t.timestampValue);case 4:return Yf(qf(e),qf(t));case 5:return sf(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Bf(e),r=Bf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=sf(n[i],r[i]);if(0!==a)return a}return sf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=sf(Uf(e.latitude),Uf(t.latitude));return 0!==n?n:sf(Uf(e.longitude),Uf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gf(n[i],r[i]);if(a)return a}return sf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wf.mapValue&&t===Wf.mapValue)return 0;if(e===Wf.mapValue)return 1;if(t===Wf.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=sf(r[o],a[o]);if(0!==s)return s;var u=Gf(n[r[o]],i[a[o]]);if(0!==u)return u}return sf(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Wl()}}function Yf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sf(e,t);var n=jf(e),r=jf(t),i=sf(n.seconds,r.seconds);return 0!==i?i:sf(n.nanos,r.nanos)}function Xf(e){return Jf(e)}function Jf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=jf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Bf(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vf.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Jf(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Jf(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Wl();var t,n}function $f(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zf(e){return!!e&&"integerValue"in e}function eh(e){return!!e&&"arrayValue"in e}function th(e){return!!e&&"nullValue"in e}function nh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rh(e){return!!e&&"mapValue"in e}function ih(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rf(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ih(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ih(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ah(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var oh=f((function e(t,n){s(this,e),this.position=t,this.inclusive=n}));function sh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?vf.comparator(vf.fromName(o.referenceValue),n.key):Gf(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function uh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Kf(e.position[n],t.position[n]))return!1;return!0}var ch=f((function e(){s(this,e)})),lh=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gf(t,this.value)):null!==t&&Hf(this.value)===Hf(t)&&this.matchesComparison(Gf(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wl()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gh(e,t,r):"array-contains"===t?new wh(e,r):"in"===t?new Eh(e,r):"not-in"===t?new xh(e,r):"array-contains-any"===t?new Th(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new kh(e,n):new bh(e,n)}}]),n}(ch),fh=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return f(n,[{key:"matches",value:function(e){return hh(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=C(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(ch);function hh(e){return"and"===e.op}function dh(e){return ph(e)&&hh(e)}function ph(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fh)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function vh(e){if(e instanceof lh)return e.field.canonicalString()+e.op.toString()+Xf(e.value);if(dh(e))return e.filters.map((function(e){return vh(e)})).join(",");var t=e.filters.map((function(e){return vh(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function yh(e,t){return e instanceof lh?function(e,t){return t instanceof lh&&e.op===t.op&&e.field.isEqual(t.field)&&Kf(e.value,t.value)}(e,t):e instanceof fh?function(e,t){return t instanceof fh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&yh(n,t.filters[r])}),!0)}(e,t):void Wl()}function mh(e){return e instanceof lh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Xf(e.value))}(e):e instanceof fh?function(e){return e.op.toString()+" {"+e.getFilters().map(mh).join(" ,")+"}"}(e):"Filter"}var gh=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,i)).key=vf.fromName(i.referenceValue),a}return f(n,[{key:"matches",value:function(e){var t=vf.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(lh),kh=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"in",r)).keys=_h("in",r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(lh),bh=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"not-in",r)).keys=_h("not-in",r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(lh);function _h(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vf.fromName(e.referenceValue)}))}var wh=function(e){d(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return eh(t)&&Qf(t.arrayValue,this.value)}}]),n}(lh),Eh=function(e){d(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qf(this.value.arrayValue,t)}}]),n}(lh),xh=function(e){d(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(Qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qf(this.value.arrayValue,t)}}]),n}(lh),Th=function(e){d(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qf(t.value.arrayValue,e)}))}}]),n}(lh),Sh=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";s(this,e),this.field=t,this.dir=n}));function Ch(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ah=function(){function e(t,n){s(this,e),this.comparator=t,this.root=n||Nh.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nh.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nh.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ih(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ih(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ih(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ih(this.root,e,this.comparator,!0)}}]),e}(),Ih=function(){function e(t,n,r,i){s(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Nh=function(){function e(t,n,r,i,a){s(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Wl();if(this.right.isRed())throw Wl();var e=this.left.check();if(e!==this.right.check())throw Wl();return e+(this.isRed()?0:1)}}]),e}();Nh.EMPTY=null,Nh.RED=!0,Nh.BLACK=!1,Nh.EMPTY=new(function(){function e(){s(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw Wl()}},{key:"value",get:function(){throw Wl()}},{key:"color",get:function(){throw Wl()}},{key:"left",get:function(){throw Wl()}},{key:"right",get:function(){throw Wl()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Nh(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Rh=function(){function e(t){s(this,e),this.comparator=t,this.data=new Ah(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Oh(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Oh(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Oh=function(){function e(t){s(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Ph=function(){function e(t){s(this,e),this.fields=t,t.sort(pf.comparator)}return f(e,[{key:"unionWith",value:function(t){var n,r=new Rh(pf.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=C(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return uf(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Dh=function(){function e(t){s(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rh(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(t)}},{key:"setAll",value:function(e){var t=this,n=pf.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ih(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Kf(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rf(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ih(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Lh(e){var t=[];return Rf(e.fields,(function(e,n){var r=new pf([e]);if(rh(n)){var i=Lh(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Ph(t)}var Mh=function(){function e(t,n,r,i,a,o,u){s(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(lf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Dh.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Dh.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=lf.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,lf.min(),lf.min(),lf.min(),Dh.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,lf.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,lf.min(),lf.min(),Dh.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,lf.min(),lf.min(),Dh.empty(),2)}}]),e}(),Fh=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;s(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function jh(e){return new Fh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Uh(e){var t=Kl(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return vh(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Pf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Xf(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Xf(e)})).join(",")),t.ft=n}return t.ft}function Bh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ch(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!yh(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uh(e.startAt,t.startAt)&&uh(e.endAt,t.endAt)}function Vh(e){return vf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var zh=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;s(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}));function qh(e,t,n,r,i,a,o,s){return new zh(e,t,n,r,i,a,o,s)}function Wh(e){return new zh(e)}function Hh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Qh(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Gh(e){return null!==e.collectionGroup}function Yh(e){var t=Kl(e);if(null===t.dt){t.dt=[];var n=Qh(t),r=Kh(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Sh(n)),t.dt.push(new Sh(pf.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Sh(pf.keyField(),u))}}}return t.dt}function Xh(e){var t=Kl(e);if(!t._t)if("F"===t.limitType)t._t=jh(t.path,t.collectionGroup,Yh(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(Yh(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Sh(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new oh(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new oh(t.startAt.position,t.startAt.inclusive):null;t._t=jh(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function Jh(e,t){t.getFirstInequalityField(),Qh(e);var n=e.filters.concat([t]);return new zh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $h(e,t,n){return new zh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zh(e,t){return Bh(Xh(e),Xh(t))&&e.limitType===t.limitType}function ed(e){return"".concat(Uh(Xh(e)),"|lt:").concat(e.limitType)}function td(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return mh(e)})).join(", "),"]")),Pf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Xf(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Xf(e)})).join(",")),"Target(".concat(t,")")}(Xh(e)),"; limitType=").concat(e.limitType,")")}function nd(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(Yh(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Yh(e),t))&&!(e.endAt&&!function(e,t,n){var r=sh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Yh(e),t))}(e,t)}function rd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function id(e){return function(t,n){var r,i=!1,a=C(Yh(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=ad(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function ad(e,t,n){var r=e.field.isKeyField()?vf.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gf(r,i):Wl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wl()}}function od(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(t)?"-0":t}}function sd(e){return{integerValue:""+e}}function ud(e,t){return Lf(t)?sd(t):od(e,t)}var cd=f((function e(){s(this,e),this._=void 0}));function ld(e,t,n){return e instanceof dd?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof pd?vd(e,t):e instanceof yd?md(e,t):function(e,t){var n=hd(e,t),r=kd(n)+kd(e.gt);return Zf(n)&&Zf(e.gt)?sd(r):od(e.yt,r)}(e,t)}function fd(e,t,n){return e instanceof pd?vd(e,t):e instanceof yd?md(e,t):n}function hd(e,t){return e instanceof gd?Zf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var dd=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n)}(cd),pd=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return f(n)}(cd);function vd(e,t){var n,r=bd(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Kf(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yd=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return f(n)}(cd);function md(e,t){var n,r=bd(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Kf(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gd=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return f(n)}(cd);function kd(e){return Uf(e.integerValue||e.doubleValue)}function bd(e){return eh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _d=f((function e(t,n){s(this,e),this.field=t,this.transform=n}));var wd=f((function e(t,n){s(this,e),this.version=t,this.transformResults=n})),Ed=function(){function e(t,n){s(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function xd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Td=f((function e(){s(this,e)}));function Sd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jd(e.key,Ed.none()):new Rd(e.key,e.data,Ed.none());var n,r=e.data,i=Dh.empty(),a=new Rh(pf.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Od(e.key,i,new Ph(a.toArray()),Ed.none())}function Cd(e,t,n){e instanceof Rd?function(e,t,n){var r=e.value.clone(),i=Dd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Od?function(e,t,n){if(xd(e.precondition,t)){var r=Dd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ad(e,t,n,r){return e instanceof Rd?function(e,t,n,r){if(!xd(e.precondition,t))return n;var i=e.value.clone(),a=Ld(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Od?function(e,t,n,r){if(!xd(e.precondition,t))return n;var i=Ld(e.fieldTransforms,r,t),a=t.data;return a.setAll(Pd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return xd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Id(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=hd(a.transform,o||null);null!=s&&(null===r&&(r=Dh.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Nd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uf(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pd&&t instanceof pd||e instanceof yd&&t instanceof yd?uf(e.elements,t.elements,Kf):e instanceof gd&&t instanceof gd?Kf(e.gt,t.gt):e instanceof dd&&t instanceof dd}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Rd=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return s(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Td),Od=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return s(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return f(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Td);function Pd(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Dd(e,t,n){var r=new Map;Hl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,fd(o,s,n[i]))}return r}function Ld(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ld(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Md,Fd,jd=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Td),Ud=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Td),Bd=f((function e(t){s(this,e),this.count=t}));function Vd(e){switch(e){default:return Wl();case Ql.CANCELLED:case Ql.UNKNOWN:case Ql.DEADLINE_EXCEEDED:case Ql.RESOURCE_EXHAUSTED:case Ql.INTERNAL:case Ql.UNAVAILABLE:case Ql.UNAUTHENTICATED:return!1;case Ql.INVALID_ARGUMENT:case Ql.NOT_FOUND:case Ql.ALREADY_EXISTS:case Ql.PERMISSION_DENIED:case Ql.FAILED_PRECONDITION:case Ql.ABORTED:case Ql.OUT_OF_RANGE:case Ql.UNIMPLEMENTED:case Ql.DATA_LOSS:return!0}}function zd(e){if(void 0===e)return Vl("GRPC error has no .code"),Ql.UNKNOWN;switch(e){case Md.OK:return Ql.OK;case Md.CANCELLED:return Ql.CANCELLED;case Md.UNKNOWN:return Ql.UNKNOWN;case Md.DEADLINE_EXCEEDED:return Ql.DEADLINE_EXCEEDED;case Md.RESOURCE_EXHAUSTED:return Ql.RESOURCE_EXHAUSTED;case Md.INTERNAL:return Ql.INTERNAL;case Md.UNAVAILABLE:return Ql.UNAVAILABLE;case Md.UNAUTHENTICATED:return Ql.UNAUTHENTICATED;case Md.INVALID_ARGUMENT:return Ql.INVALID_ARGUMENT;case Md.NOT_FOUND:return Ql.NOT_FOUND;case Md.ALREADY_EXISTS:return Ql.ALREADY_EXISTS;case Md.PERMISSION_DENIED:return Ql.PERMISSION_DENIED;case Md.FAILED_PRECONDITION:return Ql.FAILED_PRECONDITION;case Md.ABORTED:return Ql.ABORTED;case Md.OUT_OF_RANGE:return Ql.OUT_OF_RANGE;case Md.UNIMPLEMENTED:return Ql.UNIMPLEMENTED;case Md.DATA_LOSS:return Ql.DATA_LOSS;default:return Wl()}}(Fd=Md||(Md={}))[Fd.OK=0]="OK",Fd[Fd.CANCELLED=1]="CANCELLED",Fd[Fd.UNKNOWN=2]="UNKNOWN",Fd[Fd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fd[Fd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fd[Fd.NOT_FOUND=5]="NOT_FOUND",Fd[Fd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fd[Fd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fd[Fd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fd[Fd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fd[Fd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fd[Fd.ABORTED=10]="ABORTED",Fd[Fd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fd[Fd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fd[Fd.INTERNAL=13]="INTERNAL",Fd[Fd.UNAVAILABLE=14]="UNAVAILABLE",Fd[Fd.DATA_LOSS=15]="DATA_LOSS";var qd=function(){function e(t,n){s(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return f(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rf(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Of(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Wd=new Ah(vf.comparator);function Hd(){return Wd}var Kd=new Ah(vf.comparator);function Qd(){for(var e=Kd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Gd(e){var t=Kd;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Yd(){return Jd()}function Xd(){return Jd()}function Jd(){return new qd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var $d=new Ah(vf.comparator),Zd=new Rh(vf.comparator);function ep(){for(var e=Zd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var tp=new Rh(sf);function np(){return tp}var rp=function(){function e(t,n,r,i,a){s(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ip.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(lf.min(),i,np(),Hd(),ep())}}]),e}(),ip=function(){function e(t,n,r,i,a){s(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,ep(),ep(),ep())}}]),e}(),ap=f((function e(t,n,r,i){s(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),op=f((function e(t,n){s(this,e),this.targetId=t,this.Et=n})),sp=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mf.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),up=function(){function e(){s(this,e),this.At=0,this.Rt=fp(),this.bt=Mf.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return f(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=ep(),t=ep(),n=ep();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wl()}})),new ip(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=fp()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),cp=function(){function e(t){s(this,e),this.$t=t,this.Bt=new Map,this.Lt=Hd(),this.qt=lp(),this.Ut=new Rh(sf)}return f(e,[{key:"Kt",value:function(e){var t,n=C(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Wl()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Vh(i))if(0===n){var a=new vf(i.path);this.Qt(t,a,Mh.newNoDocument(a,lf.min()))}else Hl(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Vh(a.target)){var o=new vf(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Mh.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=ep();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new rp(e,n,this.Ut,this.Lt,r);return this.Lt=Hd(),this.qt=lp(),this.Ut=new Rh(sf),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new up,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Rh(sf),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Bl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new up),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function lp(){return new Ah(vf.comparator)}function fp(){return new Ah(vf.comparator)}var hp={asc:"ASCENDING",desc:"DESCENDING"},dp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pp={and:"AND",or:"OR"},vp=f((function e(t,n){s(this,e),this.databaseId=t,this.wt=n}));function yp(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mp(e,t){return e.wt?t.toBase64():t.toUint8Array()}function gp(e,t){return yp(e,t.toTimestamp())}function kp(e){return Hl(!!e),lf.fromTimestamp(function(e){var t=jf(e);return new cf(t.seconds,t.nanos)}(e))}function bp(e,t){return function(e){return new hf(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _p(e){var t=hf.fromString(e);return Hl(Vp(t)),t}function wp(e,t){return bp(e.databaseId,t.path)}function Ep(e,t){var n=_p(t);if(n.get(1)!==e.databaseId.projectId)throw new Gl(Ql.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gl(Ql.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vf(Cp(n))}function xp(e,t){return bp(e.databaseId,t)}function Tp(e){var t=_p(e);return 4===t.length?hf.emptyPath():Cp(t)}function Sp(e){return new hf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Cp(e){return Hl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ap(e,t,n){return{name:wp(e,t),fields:n.value.mapValue.fields}}function Ip(e,t){var n;if(t instanceof Rd)n={update:Ap(e,t.key,t.value)};else if(t instanceof jd)n={delete:wp(e,t.key)};else if(t instanceof Od)n={update:Ap(e,t.key,t.data),updateMask:Bp(t.fieldMask)};else{if(!(t instanceof Ud))return Wl();n={verify:wp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof dd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Wl()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wl()}(e,t.precondition)),n}function Np(e,t){return{documents:[xp(e,t.path)]}}function Rp(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=xp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=xp(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Up(fh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Fp(e.field),direction:Dp(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.wt||Pf(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Op(e){var t=Tp(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Pp(e);return t instanceof fh&&dh(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Sh(jp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Pf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new oh(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new oh(n,t)}(n.endAt)),qh(t,i,s,o,u,"F",c,l)}function Pp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jp(e.unaryFilter.field);return lh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jp(e.unaryFilter.field);return lh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jp(e.unaryFilter.field);return lh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jp(e.unaryFilter.field);return lh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wl()}}(e):void 0!==e.fieldFilter?function(e){return lh.create(jp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fh.create(e.compositeFilter.filters.map((function(e){return Pp(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wl()}}(e.compositeFilter.op))}(e):Wl()}function Dp(e){return hp[e]}function Lp(e){return dp[e]}function Mp(e){return pp[e]}function Fp(e){return{fieldPath:e.canonicalString()}}function jp(e){return pf.fromServerFormat(e.fieldPath)}function Up(e){return e instanceof lh?function(e){if("=="===e.op){if(nh(e.value))return{unaryFilter:{field:Fp(e.field),op:"IS_NAN"}};if(th(e.value))return{unaryFilter:{field:Fp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nh(e.value))return{unaryFilter:{field:Fp(e.field),op:"IS_NOT_NAN"}};if(th(e.value))return{unaryFilter:{field:Fp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fp(e.field),op:Lp(e.op),value:e.value}}}(e):e instanceof fh?function(e){var t=e.getFilters().map((function(e){return Up(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Mp(e.op),filters:t}}}(e):Wl()}function Bp(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Vp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var zp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qp=([].concat(o(zp),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Wp=qp;[].concat(Wp,["indexConfiguration","indexState","indexEntries"]);var Hp=function(){function e(t,n,r,i){s(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Cd(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ad(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Ad(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Xd();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Sd(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(lf.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ep())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&uf(this.mutations,e.mutations,(function(e,t){return Nd(e,t)}))&&uf(this.baseMutations,e.baseMutations,(function(e,t){return Nd(e,t)}))}}]),e}(),Kp=function(){function e(t,n,r,i){s(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){Hl(t.mutations.length===r.length);for(var i=$d,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Qp=function(){function e(t,n){s(this,e),this.largestBatchId=t,this.mutation=n}return f(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Gp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lf.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:lf.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mf.EMPTY_BYTE_STRING;s(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Yp=f((function e(t){s(this,e),this.ie=t}));function Xp(e){var t=Op({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$h(t,t.limit,"L"):t}var Jp=function(){function e(){s(this,e)}return f(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Uf(e.integerValue));else if("doubleValue"in e){var n=Uf(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Df(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Bf(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?ah(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Wl()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),vf.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();Jp.Ie=new Jp;var $p=function(){function e(){s(this,e),this.Je=new Zp}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),Tf.resolve()}},{key:"getCollectionParents",value:function(e,t){return Tf.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Tf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Tf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Tf.resolve(null)}},{key:"getIndexType",value:function(e,t){return Tf.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Tf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Tf.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Tf.resolve(kf.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Tf.resolve(kf.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Tf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Tf.resolve()}}]),e}(),Zp=function(){function e(){s(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rh(hf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Rh(hf.comparator)).toArray()}}]),e}();new Uint8Array(0);var ev=function(){function e(t,n,r){s(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();ev.DEFAULT_COLLECTION_PERCENTILE=10,ev.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ev.DEFAULT=new ev(41943040,ev.DEFAULT_COLLECTION_PERCENTILE,ev.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ev.DISABLED=new ev(-1,0,0);var tv=function(){function e(t){s(this,e),this.bn=t}return f(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var nv=function(){function e(){s(this,e),this.changes=new qd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return f(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Mh.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Tf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var rv=f((function e(t,n){s(this,e),this.overlayedDocument=t,this.mutatedFields=n})),iv=function(){function e(t,n,r,i){s(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return f(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ad(r.mutation,e,Ph.empty(),cf.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,ep()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ep(),i=Yd();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Qd();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Yd();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,ep())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Hd(),a=Jd(),o=Jd();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Od)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ad(o.mutation,t,o.mutation.getFieldMask(),cf.now())):a.set(t.key,Ph.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new rv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Jd(),i=new Ah((function(e,t){return e-t})),a=ep();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ph.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||ep()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Xd();c.forEach((function(e){if(!a.has(e)){var n=Sd(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Tf.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return vf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Tf.resolve(Yd()),s=-1,u=a;return o.next((function(t){return Tf.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Tf.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,ep())})).next((function(e){return{batchId:s,changes:Gd(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new vf(t)).next((function(e){var t=Qd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Qd();return this.indexManager.getCollectionParents(e,i).next((function(o){return Tf.forEach(o,(function(o){var s=function(e,t){return new zh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Mh.newInvalidDocument(r)))}));var n=Qd();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Ad(a.mutation,i,Ph.empty(),cf.now()),nd(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),av=function(){function e(t){s(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return Tf.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:kp(n.createTime)}),Tf.resolve()}},{key:"getNamedQuery",value:function(e,t){return Tf.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Xp(e.bundledQuery),readTime:kp(e.readTime)}}(t)),Tf.resolve()}}]),e}(),ov=function(){function e(){s(this,e),this.overlays=new Ah(vf.comparator),this.es=new Map}return f(e,[{key:"getOverlay",value:function(e,t){return Tf.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Yd();return Tf.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),Tf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Tf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Yd(),i=t.length+1,a=new vf(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Tf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ah((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Yd(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Yd(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Tf.resolve(u)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Qp(t,n));var a=this.es.get(t);void 0===a&&(a=ep(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),sv=function(){function e(){s(this,e),this.ns=new Rh(uv.ss),this.rs=new Rh(uv.os)}return f(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new uv(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new uv(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new vf(new hf([])),r=new uv(n,e),i=new uv(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new vf(new hf([])),n=new uv(t,e),r=new uv(t,e+1),i=ep();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new uv(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),uv=function(){function e(t,n){s(this,e),this.key=t,this._s=n}return f(e,null,[{key:"ss",value:function(e,t){return vf.comparator(e.key,t.key)||sf(e._s,t._s)}},{key:"os",value:function(e,t){return sf(e._s,t._s)||vf.comparator(e.key,t.key)}}]),e}(),cv=function(){function e(t,n){s(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Rh(uv.ss)}return f(e,[{key:"checkEmpty",value:function(e){return Tf.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Hp(i,t,n,r);this.mutationQueue.push(a);var o,s=C(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new uv(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Tf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Tf.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Tf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Tf.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Tf.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new uv(t,0),i=new uv(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Tf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Rh(sf);return t.forEach((function(e){var t=new uv(e,0),i=new uv(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Tf.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;vf.isDocumentKey(i)||(i=i.child(""));var a=new uv(new vf(i),0),o=new Rh(sf);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Tf.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Hl(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Tf.forEach(t.mutations,(function(i){var a=new uv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new uv(t,0),r=this.gs.firstAfterOrEqual(n);return Tf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Tf.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),lv=function(){function e(t){s(this,e),this.Es=t,this.docs=new Ah(vf.comparator),this.size=0}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Tf.resolve(n?n.document.mutableCopy():Mh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Hd();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Mh.newInvalidDocument(e))})),Tf.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Hd(),a=t.path,o=new vf(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||bf(gf(l),n)<=0||(r.has(l.key)||nd(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Tf.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Wl()}},{key:"As",value:function(e,t){return Tf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new fv(this)}},{key:"getSize",value:function(e){return Tf.resolve(this.size)}}]),e}(),fv=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).Yn=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Tf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(nv),hv=function(){function e(t){s(this,e),this.persistence=t,this.Rs=new qd((function(e){return Uh(e)}),Bh),this.lastRemoteSnapshotVersion=lf.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sv,this.targetCount=0,this.vs=tv.Pn()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Tf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Tf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Tf.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Tf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Tf.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new tv(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Tf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Tf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Tf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Tf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Tf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Tf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Tf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Tf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Tf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Tf.resolve(n)}},{key:"containsKey",value:function(e,t){return Tf.resolve(this.Ps.containsKey(t))}}]),e}(),dv=function(){function e(t,n){var r=this;s(this,e),this.Vs={},this.overlays={},this.Ss=new Cf(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new hv(this),this.indexManager=new $p,this.remoteDocumentCache=new lv((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Yp(n),this.Ns=new av(this.yt)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ov,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new cv(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Bl("MemoryPersistence","Starting transaction:",e);var i=new pv(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Tf.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),pv=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return f(n)}(wf),vv=function(){function e(t){s(this,e),this.persistence=t,this.Fs=new sv,this.$s=null}return f(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Wl()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Tf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Tf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Tf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tf.forEach(this.Ls,(function(r){var i=vf.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,lf.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return Tf.or([function(){return Tf.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var yv=function(){function e(t,n,r,i){s(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return f(e,null,[{key:"Ci",value:function(t,n){var r,i=ep(),a=ep(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),mv=function(){function e(){s(this,e),this.xi=!1}return f(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Hh(t))return Tf.resolve(null);var r=Xh(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=$h(t,null,"F"),r=Xh(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=ep.apply(void 0,o(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,$h(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Hh(t)||r.isEqual(lf.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Ul()<=wa.DEBUG&&Bl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),td(t)),i.Bi(e,o,t,mf(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Rh(id(e));return t.forEach((function(t,r){nd(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Ul()<=wa.DEBUG&&Bl("QueryEngine","Using full collection scan to execute query:",td(t)),this.Ni.getDocumentsMatchingQuery(e,t,kf.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),gv=function(){function e(t,n,r,i){s(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Ah(sf),this.Ui=new qd((function(e){return Uh(e)}),Bh),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return f(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function kv(e,t,n,r){return new gv(e,t,n,r)}function bv(e,t){return _v.apply(this,arguments)}function _v(){return _v=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kl(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=ep(),u=C(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=C(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=C(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),_v.apply(this,arguments)}function wv(e,t){var n=Kl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Tf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Hl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=ep(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Ev(e){var t=Kl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function xv(e,t){var n=Kl(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Mf.EMPTY_BYTE_STRING,lf.min()).withLastLimboFreeSnapshotVersion(lf.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var s=Hd(),u=ep();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tv(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual(lf.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Tf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.qi=i,e}))}function Tv(e,t,n){var r=ep(),i=ep();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Hd();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(lf.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Bl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Sv(e,t){var n=Kl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Cv(e,t){var n=Kl(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Tf.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Gp(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function Av(e,t,n){return Iv.apply(this,arguments)}function Iv(){return Iv=E(_().mark((function e(t,n,r){var i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kl(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Sf(e.t1)){e.next=12;break}throw e.t1;case 12:Bl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Iv.apply(this,arguments)}function Nv(e,t,n){var r=Kl(e),i=lf.min(),a=ep();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Kl(e),i=r.Ui.get(n);return void 0!==i?Tf.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,Xh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:lf.min(),n?a:ep())})).next((function(e){return Rv(r,rd(t),e),{documents:e,Hi:a}}))}))}function Rv(e,t,n){var r=e.Ki.get(t)||lf.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var Ov=function(){function e(){s(this,e),this.activeTargetIds=np()}return f(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Pv=function(){function e(){s(this,e),this.Lr=new Ov,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Ov,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Dv=function(){function e(){s(this,e)}return f(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Lv=function(){function e(){var t=this;s(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return f(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Bl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Bl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Mv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Fv=function(){function e(t){s(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return f(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),jv=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return f(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Dl;o.setWithCredentials(!0),o.listenOnce(Il.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Al.NO_ERROR:var t=o.getResponseJson();Bl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Al.TIMEOUT:Bl("Connection",'RPC "'+e+'" timed out'),a(new Gl(Ql.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:var n=o.getStatus();if(Bl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ql).indexOf(t)>=0?t:Ql.UNKNOWN}(s.status);a(new Gl(u,s.message))}else a(new Gl(Ql.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Gl(Ql.UNAVAILABLE,"Connection failed."));break;default:Wl()}}finally{Bl("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Sl(),a=Cl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ol({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");Bl("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new Fv({Hr:function(e){l?Bl("Connection","Not sending because WebChannel is closed:",e):(c||(Bl("Connection","Opening WebChannel transport."),u.open(),c=!0),Bl("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,Pl.EventType.OPEN,(function(){l||Bl("Connection","WebChannel transport opened.")})),h(u,Pl.EventType.CLOSE,(function(){l||(l=!0,Bl("Connection","WebChannel transport closed"),f.io())})),h(u,Pl.EventType.ERROR,(function(e){l||(l=!0,zl("Connection","WebChannel transport errored:",e),f.io(new Gl(Ql.UNAVAILABLE,"The operation could not be completed")))})),h(u,Pl.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Hl(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Bl("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Md[e];if(void 0!==t)return zd(t)}(a),s=i.message;void 0===o&&(o=Ql.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Gl(o,s)),u.close()}else Bl("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Nl.STAT_EVENT,(function(e){e.stat===Rl.PROXY?Bl("Connection","Detected buffering proxy"):e.stat===Rl.NOPROXY&&Bl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){s(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Bl("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Bl("RestConnection","Received: ",e),e}),(function(t){throw zl("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Mv[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Uv(){return"undefined"!=typeof document?document:null}function Bv(e){return new vp(e,!0)}var Vv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;s(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Bl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),zv=function(){function e(t,n,r,i,a,o,u,c){s(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Vv(t,n)}return f(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ql.RESOURCE_EXHAUSTED?(Vl(n.toString()),Vl("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Ql.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=b(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Gl(Ql.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(E(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Bl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Bl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),qv=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,c}return f(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Hl(void 0===t||"string"==typeof t),Mf.fromBase64String(t||"")):(Hl(void 0===t||t instanceof Uint8Array),Mf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ql.UNKNOWN:zd(e.code);return new Gl(t,e.message||"")}(o);n=new sp(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ep(e,u.document.name),l=kp(u.document.updateTime),f=u.document.createTime?kp(u.document.createTime):lf.min(),h=new Dh({mapValue:{fields:u.document.fields}}),d=Mh.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new ap(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Ep(e,y.document),g=y.readTime?kp(y.readTime):lf.min(),k=Mh.newNoDocument(m,g),b=y.removedTargetIds||[];n=new ap([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=Ep(e,_.document),E=_.removedTargetIds||[];n=new ap([],E,w,null)}else{if(!("filter"in t))return Wl();t.filter;var x=t.filter;x.targetId;var T=x.count||0,S=new Bd(T),C=x.targetId;n=new op(C,S)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return lf.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?lf.min():t.readTime?kp(t.readTime):lf.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Sp(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Vh(r)?{documents:Np(e,r)}:{query:Rp(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=mp(e,t.resumeToken):t.snapshotVersion.compareTo(lf.min())>0&&(n.readTime=yp(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Sp(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(zv),Wv=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,c.Jo=!1,c}return f(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Ro(p(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Hl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Hl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?kp(e.updateTime):kp(t);return n.isEqual(lf.min())&&(n=kp(t)),new wd(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=kp(e.commitTime);return this.listener.Zo(n,t)}return Hl(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Sp(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ip(t.yt,e)}))};this.Bo(n)}}]),n}(zv),Hv=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return f(n,[{key:"su",value:function(){if(this.nu)throw new Gl(Ql.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=b(i,2),o=a[0],s=a[1];return r.connection.ao(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ql.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Gl(Ql.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=b(a,2),s=o[0],u=o[1];return i.connection._o(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ql.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Gl(Ql.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return f((function e(){s(this,e)}))}());var Kv=function(){function e(t,n){s(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return f(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Vl(t),this.ou=!1):Bl("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Qv=f((function e(t,n,r,i,a){var o=this;s(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=iy(o),!e.t0){e.next=5;break}return Bl("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kl(t))._u.add(4),e.next=4,Xv(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Gv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Kv(r,i)}));function Gv(e){return Yv.apply(this,arguments)}function Yv(){return Yv=E(_().mark((function e(t){var n,r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!iy(t)){e.next=18;break}n=C(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Yv.apply(this,arguments)}function Xv(e){return Jv.apply(this,arguments)}function Jv(){return Jv=E(_().mark((function e(t){var n,r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Jv.apply(this,arguments)}function $v(e,t){var n=Kl(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),ry(n)?ny(n):Py(n).ko()&&ey(n,t))}function Zv(e,t){var n=Kl(e),r=Py(n);n.du.delete(t),r.ko()&&ty(n,t),0===n.du.size&&(r.ko()?r.Fo():iy(n)&&n.gu.set("Unknown"))}function ey(e,t){e.yu.Ot(t.targetId),Py(e).zo(t)}function ty(e,t){e.yu.Ot(t),Py(e).Ho(t)}function ny(e){e.yu=new cp({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),Py(e).start(),e.gu.uu()}function ry(e){return iy(e)&&!Py(e).No()&&e.du.size>0}function iy(e){return 0===Kl(e)._u.size}function ay(e){e.yu=void 0}function oy(e){return sy.apply(this,arguments)}function sy(){return sy=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){ey(t,e)}));case 1:case"end":return e.stop()}}),e)}))),sy.apply(this,arguments)}function uy(e,t){return cy.apply(this,arguments)}function cy(){return cy=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ay(t),ry(t)?(t.gu.hu(n),ny(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}function ly(e,t,n){return fy.apply(this,arguments)}function fy(){return fy=E(_().mark((function e(t,n,r){var i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof sp&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=E(_().mark((function e(t,n){var r,i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Bl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,hy(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ap?t.yu.Kt(n):n instanceof op?t.yu.Jt(n):t.yu.jt(n),r.isEqual(lf.min())){e.next=29;break}return e.prev=14,e.next=17,Ev(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Mf.EMPTY_BYTE_STRING,n.snapshotVersion)),ty(e,t);var r=new Gp(n.target,t,1,n.sequenceNumber);ey(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Bl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,hy(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),fy.apply(this,arguments)}function hy(e,t,n){return dy.apply(this,arguments)}function dy(){return dy=E(_().mark((function e(t,n,r){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sf(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Xv(t);case 5:t.gu.set("Offline"),r||(r=function(){return Ev(t.localStore)}),t.asyncQueue.enqueueRetryable(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Gv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function py(e,t){return t().catch((function(n){return hy(e,n,t)}))}function vy(e){return yy.apply(this,arguments)}function yy(){return yy=E(_().mark((function e(t){var n,r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Kl(t),r=Dy(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!my(n)){e.next=19;break}return e.prev=3,e.next=6,Sv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,gy(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,hy(n,e.t0);case 17:e.next=2;break;case 19:ky(n)&&by(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),yy.apply(this,arguments)}function my(e){return iy(e)&&e.fu.length<10}function gy(e,t){e.fu.push(t);var n=Dy(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function ky(e){return iy(e)&&!Dy(e).No()&&e.fu.length>0}function by(e){Dy(e).start()}function _y(e){return wy.apply(this,arguments)}function wy(){return wy=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dy(t).eu();case 1:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function Ey(e){return xy.apply(this,arguments)}function xy(){return xy=E(_().mark((function e(t){var n,r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dy(t),r=C(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}function Ty(e,t,n){return Sy.apply(this,arguments)}function Sy(){return Sy=E(_().mark((function e(t,n,r){var i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Kp.from(i,n,r),e.next=3,py(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,vy(t);case 5:case"end":return e.stop()}}),e)}))),Sy.apply(this,arguments)}function Cy(e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Dy(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vd(i=n.code)||i===Ql.ABORTED){e.next=7;break}return r=t.fu.shift(),Dy(t).Mo(),e.next=5,py(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,vy(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ky(t)&&by(t);case 5:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Iy(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Kl(t)).asyncQueue.verifyOperationInProgress(),Bl("RemoteStore","RemoteStore received new credentials"),i=iy(r),r._u.add(3),e.next=6,Xv(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Gv(r);case 12:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Ry(e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kl(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Gv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Xv(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Oy.apply(this,arguments)}function Py(e){return e.pu||(e.pu=function(e,t,n){var r=Kl(e);return r.su(),new qv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:oy.bind(null,e),Zr:uy.bind(null,e),Wo:ly.bind(null,e)}),e.wu.push(function(){var t=E(_().mark((function t(n){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),ry(e)?ny(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:ay(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Dy(e){return e.Iu||(e.Iu=function(e,t,n){var r=Kl(e);return r.su(),new Wv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:_y.bind(null,e),Zr:Cy.bind(null,e),tu:Ey.bind(null,e),Zo:Ty.bind(null,e)}),e.wu.push(function(){var t=E(_().mark((function t(n){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,vy(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Bl("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Ly=function(){function e(t,n,r,i,a){s(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gl(Ql.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function My(e,t){if(Vl("AsyncQueue","".concat(t,": ").concat(e)),Sf(e))return new Gl(Ql.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Fy=function(){function e(t){s(this,e),this.comparator=t?function(e,n){return t(e,n)||vf.comparator(e.key,n.key)}:function(e,t){return vf.comparator(e.key,t.key)},this.keyedMap=Qd(),this.sortedSet=new Ah(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),jy=function(){function e(){s(this,e),this.Tu=new Ah(vf.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Wl():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Uy=function(){function e(t,n,r,i,a,o,u,c,l){s(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Fy.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),By=f((function e(){s(this,e),this.Au=void 0,this.listeners=[]})),Vy=f((function e(){s(this,e),this.queries=new qd((function(e){return ed(e)}),Zh),this.onlineState="Unknown",this.Ru=new Set}));function zy(e,t){return qy.apply(this,arguments)}function qy(){return qy=E(_().mark((function e(t,n){var r,i,a,o,s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kl(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new By),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=My(e.t0,"Initialization of query '".concat(td(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Gy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),qy.apply(this,arguments)}function Wy(e,t){return Hy.apply(this,arguments)}function Hy(){return Hy=E(_().mark((function e(t,n){var r,i,a,o,s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kl(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Hy.apply(this,arguments)}function Ky(e,t){var n,r=Kl(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=C(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&Gy(r)}function Qy(e,t,n){var r=Kl(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Gy(e){e.Ru.forEach((function(e){e.next()}))}var Yy=function(){function e(t,n,r){s(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Uy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var Xy=f((function e(t){s(this,e),this.key=t})),Jy=f((function e(t){s(this,e),this.key=t})),$y=function(){function e(t,n){s(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ep(),this.mutatedKeys=ep(),this.Gu=id(t),this.Qu=new Fy(this.Gu)}return f(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new jy,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=nd(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wl()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==a.length||u?{snapshot:new Uy(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new jy,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=ep(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Jy(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Xy(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=ep();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Uy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),Zy=f((function e(t,n,r){s(this,e),this.query=t,this.targetId=n,this.view=r})),em=f((function e(t){s(this,e),this.key=t,this.nc=!1})),tm=function(){function e(t,n,r,i,a,o){s(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new qd((function(e){return ed(e)}),Zh),this.rc=new Map,this.oc=new Set,this.uc=new Ah(vf.comparator),this.cc=new Map,this.ac=new sv,this.hc={},this.lc=new Map,this.fc=tv.vn(),this.onlineState="Unknown",this.dc=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function nm(e,t){return rm.apply(this,arguments)}function rm(){return rm=E(_().mark((function e(t,n){var r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rm(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Cv(r.localStore,Xh(n));case 8:return s=e.sent,r.isPrimaryClient&&$v(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,im(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}function im(e,t,n,r,i){return am.apply(this,arguments)}function am(){return am=E(_().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=E(_().mark((function e(t,n,r,i){var a,o,s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Nv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Em(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Nv(t.localStore,n,!0);case 3:return o=e.sent,s=new $y(n,o.Hi),u=s.Wu(o.documents),c=ip.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),Em(t,r,l.Xu),f=new Zy(n,r,s),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function om(e,t){return sm.apply(this,arguments)}function sm(){return sm=E(_().mark((function e(t,n){var r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kl(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!Zh(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Av(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Zv(r.remoteStore,i.targetId),_m(r,i.targetId)})).catch(Ef);case 9:e.next=14;break;case 11:return _m(r,i.targetId),e.next=14,Av(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function um(e,t,n){return cm.apply(this,arguments)}function cm(){return cm=E(_().mark((function e(t,n,r){var i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Om(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Kl(e),a=cf.now(),o=t.reduce((function(e,t){return e.add(t.key)}),ep());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Hd(),u=ep();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=C(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Id(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Od(c.key,l,Lh(l.value.mapValue),Ed.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Gd(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Ah(sf)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Sm(i,a.changes);case 9:return e.next=11,vy(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=My(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),cm.apply(this,arguments)}function lm(e,t){return fm.apply(this,arguments)}function fm(){return fm=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kl(t),e.prev=1,e.next=4,xv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Hl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Hl(n.nc):e.removedDocuments.size>0&&(Hl(n.nc),n.nc=!1))})),e.next=8,Sm(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ef(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),fm.apply(this,arguments)}function hm(e,t,n){var r=Kl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Kl(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Gy(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function dm(e,t,n){return pm.apply(this,arguments)}function pm(){return pm=E(_().mark((function e(t,n,r){var i,a,o,s,u,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Kl(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Ah(vf.comparator)).insert(o,Mh.newNoDocument(o,lf.min())),u=ep().add(o),c=new rp(lf.min(),new Map,new Rh(sf),s,u),e.next=9,lm(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Tm(i),e.next=16;break;case 14:return e.next=16,Av(i.localStore,n,!1).then((function(){return _m(i,n,r)})).catch(Ef);case 16:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function vm(e,t){return ym.apply(this,arguments)}function ym(){return ym=E(_().mark((function e(t,n){var r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kl(t),i=n.batch.batchId,e.prev=1,e.next=4,wv(r.localStore,n);case 4:return a=e.sent,bm(r,i,null),km(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Sm(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ef(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ym.apply(this,arguments)}function mm(e,t,n){return gm.apply(this,arguments)}function gm(){return gm=E(_().mark((function e(t,n,r){var i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kl(t),e.prev=1,e.next=4,function(e,t){var n=Kl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Hl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,bm(i,n,r),km(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Sm(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ef(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),gm.apply(this,arguments)}function km(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function bm(e,t,n){var r=Kl(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function _m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||wm(e,t)}))}function wm(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Zv(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Tm(e))}function Em(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Xy?(e.ac.addReference(a.key,t),xm(e,a)):a instanceof Jy?(Bl("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||wm(e,a.key)):Wl()}}catch(o){i.e(o)}finally{i.f()}}function xm(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Bl("SyncEngine","New document in limbo: "+n),e.oc.add(r),Tm(e))}function Tm(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new vf(hf.fromString(t)),r=e.fc.next();e.cc.set(r,new em(n)),e.uc=e.uc.insert(n,r),$v(e.remoteStore,new Gp(Xh(Wh(n.path)),r,2,Cf.at))}}function Sm(e,t,n){return Cm.apply(this,arguments)}function Cm(){return Cm=E(_().mark((function e(t,n,r){var i,a,o,s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kl(t),a=[],o=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){s.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=yv.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kl(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Tf.forEach(n,(function(t){return Tf.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Tf.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Sf(e.t0)){e.next=10;break}throw e.t0;case 10:Bl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qi.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Am(e,t){return Im.apply(this,arguments)}function Im(){return Im=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Kl(t)).currentUser.isEqual(n)){e.next=11;break}return Bl("SyncEngine","User change. New user:",n.toKey()),e.next=5,bv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Gl(Ql.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Sm(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Im.apply(this,arguments)}function Nm(e,t){var n=Kl(e),r=n.cc.get(t);if(r&&r.nc)return ep().add(r.key);var i=ep(),a=n.rc.get(t);if(!a)return i;var o,s=C(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ic.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function Rm(e){var t=Kl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dm.bind(null,t),t.sc.Wo=Ky.bind(null,t.eventManager),t.sc.wc=Qy.bind(null,t.eventManager),t}function Om(e){var t=Kl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mm.bind(null,t),t}var Pm=function(){function e(){s(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Bv(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return kv(this.persistence,new mv,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new dv(vv.Bs,this.yt)}},{key:"gc",value:function(e){return new Pv}},{key:"terminate",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Dm=function(){function e(){s(this,e)}return f(e,[{key:"initialize",value:function(){var e=E(_().mark((function e(t,n){var r=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return hm(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Am.bind(null,this.syncEngine),e.next=12,Ry(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Vy}},{key:"createDatastore",value:function(e){var t,n=Bv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new jv(t));return function(e,t,n,r){return new Hv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return hm(o.syncEngine,e,0)},a=Lv.C()?new Lv:new Dv,new Qv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new tm(e,t,n,r,i,a);return o&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kl(t),Bl("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Xv(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Lm(e,t,n){if(!n)throw new Gl(Ql.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Mm(e){if(!vf.isDocumentKey(e))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fm(e){if(vf.isDocumentKey(e))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function jm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Wl()}function Um(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gl(Ql.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jm(e);throw new Gl(Ql.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Bm=new Map,Vm=function(){function e(t){var n;if(s(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Gl(Ql.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gl(Ql.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Gl(Ql.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),zm=function(){function e(t,n,r,i){s(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1}return f(e,[{key:"app",get:function(){if(!this._app)throw new Gl(Ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Gl(Ql.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jl;switch(e.type){case"gapi":var t=e.client;return new tf(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Gl(Ql.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Bm.get(e);t&&(Bl("ComponentProvider","Removing Datastore"),Bm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function qm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Um(e,zm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&zl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Ml.MOCK_USER;else{o=qi(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Gl(Ql.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ml(u)}e._authCredentials=new $l(new Xl(o,s))}}var Wm=function(){function e(t,n,r){s(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Km(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Hm=function(){function e(t,n,r){s(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Km=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,Wh(i)))._path=i,a.type="collection",a}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Wm(this.firestore,null,new vf(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Hm);function Qm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ma(e),Lm("collection","path",t),e instanceof zm){var a=hf.fromString.apply(hf,[t].concat(r));return Fm(a),new Km(e,null,a)}if(!(e instanceof Wm||e instanceof Km))throw new Gl(Ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hf.fromString.apply(hf,[t].concat(r)));return Fm(o),new Km(e.firestore,null,o)}function Gm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ma(e),1===arguments.length&&(t=of.R()),Lm("doc","path",t),e instanceof zm){var a=hf.fromString.apply(hf,[t].concat(r));return Mm(a),new Wm(e,null,new vf(a))}if(!(e instanceof Wm||e instanceof Km))throw new Gl(Ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hf.fromString.apply(hf,[t].concat(r)));return Mm(o),new Wm(e.firestore,e instanceof Km?e.converter:null,new vf(o))}var Ym=function(){function e(t){s(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Vl("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Xm=function(){function e(t,n,r,i){var a=this;s(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ml.UNAUTHENTICATED,this.clientId=of.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bl("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Bl("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return f(e,[{key:"getConfiguration",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Gl(Ql.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Yl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(E(_().mark((function n(){var r;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=My(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Jm(e,t){return $m.apply(this,arguments)}function $m(){return $m=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Bl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,bv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}function Zm(e,t){return eg.apply(this,arguments)}function eg(){return eg=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tg(t);case 3:return r=e.sent,Bl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Iy(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Iy(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(e){return ng.apply(this,arguments)}function ng(){return ng=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Bl("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Jm(t,new Pm);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e){return ig.apply(this,arguments)}function ig(){return ig=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Bl("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zm(t,new Dm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function ag(e){return rg(e).then((function(e){return e.syncEngine}))}function og(e){return sg.apply(this,arguments)}function sg(){return sg=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=nm.bind(null,n.syncEngine),r.onUnlisten=om.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),sg.apply(this,arguments)}function ug(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yl;return e.asyncQueue.enqueueAndForget(E(_().mark((function i(){return _().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ym({next:function(n){t.enqueueAndForget((function(){return Wy(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Gl(Ql.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Yy(n,a,{includeMetadataChanges:!0,Nu:!0});return zy(e,o)},i.next=3,og(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var cg=function(){function e(){var t=this;s(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Vv(this,"async_queue_retry"),this.Wc=function(){var e=Uv();e&&Bl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Uv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return f(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Uv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new Yl;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=E(_().mark((function e(){var t=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Sf(e.t0)){e.next=12;break}throw e.t0;case 12:Bl("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vl("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Ly.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Wl()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=C(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();var lg=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new cg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||hg(this),this._firestoreClient.terminate()}}]),n}(zm);function fg(e){return e._firestoreClient||hg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hg(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Af(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Xm(e._authCredentials,e._appCheckCredentials,e._queue,r)}var dg=function(){function e(t){s(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Mf.fromBase64String(t))}catch(t){throw new Gl(Ql.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Mf.fromUint8Array(t))}}]),e}(),pg=function(){function e(){s(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pf(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var vg=f((function e(t){s(this,e),this._methodName=t})),yg=function(){function e(t,n){if(s(this,e),!isFinite(t)||t<-90||t>90)throw new Gl(Ql.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Gl(Ql.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return sf(this._lat,e._lat)||sf(this._long,e._long)}}]),e}(),mg=/^__.*__$/,gg=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Od(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rd(e,this.data,t,this.fieldTransforms)}}]),e}(),kg=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new Od(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function bg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wl()}}var _g=function(){function e(t,n,r,i,a,o){s(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return Ug(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bg(this.sa)&&mg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),wg=function(){function e(t,n,r){s(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Bv(t)}return f(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _g({sa:e,methodName:t,fa:n,path:pf.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function Eg(e){var t=e._freezeSettings(),n=Bv(e._databaseId);return new wg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Lg("Data must be an object, but it was:",o,r);var s,u,c=Pg(r,o);if(a.merge)s=new Ph(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=C(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Mg(t,l.value,n);if(!o.contains(d))throw new Gl(Ql.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Bg(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new Ph(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new gg(new Dh(c),s,u)}var Tg=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(vg);function Sg(e,t,n){return new _g({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var Cg=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e))._a=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=Sg(this,e,!0),n=this._a.map((function(e){return Og(e,t)})),r=new pd(n);return new _d(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vg),Ag=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e))._a=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=Sg(this,e,!0),n=this._a.map((function(e){return Og(e,t)})),r=new yd(n);return new _d(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vg);function Ig(e,t,n,r){var i=e.da(1,t,n);Lg("Data must be an object, but it was:",i,r);var a=[],o=Dh.empty();Rf(r,(function(e,r){var s=jg(t,e,n);r=ma(r);var u=i.ca(s);if(r instanceof Tg)a.push(s);else{var c=Og(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Ph(a);return new kg(o,s,i.fieldTransforms)}function Ng(e,t,n,r,i,a){var o=e.da(1,t,n),s=[Mg(t,r,n)],u=[i];if(a.length%2!=0)throw new Gl(Ql.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Mg(t,a[c])),u.push(a[c+1]);for(var l=[],f=Dh.empty(),h=s.length-1;h>=0;--h)if(!Bg(l,s[h])){var d=s[h],p=u[h];p=ma(p);var v=o.ca(d);if(p instanceof Tg)l.push(d);else{var y=Og(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Ph(l);return new kg(f,m,o.fieldTransforms)}function Rg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Og(n,e.da(r?4:3,t))}function Og(e,t){if(Dg(e=ma(e)))return Lg("Unsupported field value:",t,e),Pg(e,t);if(e instanceof vg)return function(e,t){if(!bg(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=Og(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ma(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ud(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=cf.fromDate(e);return{timestampValue:yp(t.yt,n)}}if(e instanceof cf){var r=new cf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yp(t.yt,r)}}if(e instanceof yg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dg)return{bytesValue:mp(t.yt,e._byteString)};if(e instanceof Wm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:bp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(jm(e)))}(e,t)}function Pg(e,t){var n={};return Of(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rf(e,(function(e,r){var i=Og(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Dg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof cf||e instanceof yg||e instanceof dg||e instanceof Wm||e instanceof vg)}function Lg(e,t,n){if(!Dg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=jm(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Mg(e,t,n){if((t=ma(t))instanceof pg)return t._internalPath;if("string"==typeof t)return jg(e,t);throw Ug("Field path arguments must be of type string or ",e,!1,void 0,n)}var Fg=new RegExp("[~\\*/\\[\\]]");function jg(e,t,n){if(t.search(Fg)>=0)throw Ug("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(pg,o(t.split(".")))._internalPath}catch(zn){throw Ug("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ug(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Gl(Ql.INVALID_ARGUMENT,s+e+u)}function Bg(e,t){return e.some((function(e){return e.isEqual(t)}))}var Vg=function(){function e(t,n,r,i,a){s(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Wm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zg=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return Ro(p(n.prototype),"data",this).call(this)}}]),n}(Vg);function qg(e,t){return"string"==typeof t?jg(e,t):t instanceof pg?t._internalPath:t._delegate._internalPath}function Wg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Gl(Ql.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hg=f((function e(){s(this,e)})),Kg=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n)}(Hg);function Qg(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Hg&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Xg})).length,n=e.filter((function(e){return e instanceof Gg})).length;if(t>1||t>0&&n>0)throw new Gl(Ql.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=C(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var Gg=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return f(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Zg(e._query,t),new Hm(e.firestore,e.converter,Jh(e._query,t))}},{key:"_parse",value:function(e){var t=Eg(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){$g(o,a);var u,c=[],l=C(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(Jg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=Jg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||$g(o,a),s=Rg(n,"where",o,"in"===a||"not-in"===a);return lh.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kg);function Yg(e,t,n){var r=t,i=qg("where",e);return Gg._create(i,r,n)}var Xg=function(e){d(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return f(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fh.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=C(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Zg(r,a),r=Jh(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Hm(e.firestore,e.converter,Jh(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hg);function Jg(e,t,n){if("string"==typeof(n=ma(n))){if(""===n)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gh(t)&&-1!==n.indexOf("/"))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(hf.fromString(n));if(!vf.isDocumentKey(r))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $f(e,new vf(r))}if(n instanceof Wm)return $f(e,n._key);throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(jm(n),"."))}function $g(e,t){if(!Array.isArray(e)||0===e.length)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Gl(Ql.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Zg(e,t){if(t.isInequality()){var n=Qh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Kh(e);null!==i&&ek(e,r,i)}var a=function(e,t){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var i,a=C(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Gl(Ql.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Gl(Ql.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function ek(e,t,n){if(!n.isEqual(t))throw new Gl(Ql.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tk=function(){function e(){s(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Uf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wl()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rf(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new yg(Uf(e.latitude),Uf(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=zf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qf(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=jf(e);return new cf(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=hf.fromString(e);Hl(Vp(n));var r=new If(n.get(1),n.get(3)),i=new vf(n.popFirst(5));return r.isEqual(t)||Vl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function nk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rk=function(){function e(t,n){s(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ik=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,r,i,a,u))._firestore=e,c._firestoreImpl=e,c.metadata=o,c}return f(n,[{key:"exists",value:function(){return Ro(p(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ak(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Vg),ak=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ro(p(n.prototype),"data",this).call(this,e)}}]),n}(ik),ok=function(){function e(t,n,r,i){s(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new rk(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ak(n._firestore,n._userDataWriter,r.key,r,new rk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gl(Ql.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ak(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ak(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function sk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wl()}}var uk=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new dg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wm(this.firestore,null,t)}}]),n}(tk);function ck(e){e=Um(e,Hm);var t=Um(e.firestore,lg),n=fg(t),r=new uk(t);return Wg(e._query),ug(n,e._query).then((function(n){return new ok(t,r,e,n)}))}function lk(e,t,n){e=Um(e,Wm);var r=Um(e.firestore,lg),i=nk(e.converter,t,n);return pk(r,[xg(Eg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ed.none())])}function fk(e,t,n){e=Um(e,Wm);for(var r=Um(e.firestore,lg),i=Eg(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return pk(r,[("string"==typeof(t=ma(t))||t instanceof pg?Ng(i,"updateDoc",e._key,t,n,o):Ig(i,"updateDoc",e._key,t)).toMutation(e._key,Ed.exists(!0))])}function hk(e){return pk(Um(e.firestore,lg),[new jd(e._key,Ed.none())])}function dk(e,t){var n=Um(e.firestore,lg),r=Gm(e),i=nk(e.converter,t);return pk(n,[xg(Eg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ed.exists(!1))]).then((function(){return r}))}function pk(e,t){return function(e,t){var n=new Yl;return e.asyncQueue.enqueueAndForget(E(_().mark((function r(){return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=um,r.next=3,ag(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(fg(e),t)}function vk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cg("arrayUnion",t)}function yk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ag("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fl=e}(co),io(new ga("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new lg(new Zl(e.getProvider("auth-internal")),new rf(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gl(Ql.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new If(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ho(Ll,"3.8.3",e),ho(Ll,"3.8.3","esm2017")}();var mk,gk="firebasestorage.googleapis.com",kk="storageBucket",bk=12e4,_k=6e5,wk=1e3,Ek=function(e){d(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s(this,n),(i=t.call(this,xk(e),"Firebase Storage: ".concat(r," (").concat(xk(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(y(i),n.prototype),i}return f(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return xk(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ji);function xk(e){return"storage/"+e}function Tk(){return new Ek(mk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Sk(){return new Ek(mk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ck(){return new Ek(mk.CANCELED,"User canceled the upload/download.")}function Ak(){return new Ek(mk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ik(e){return new Ek(mk.INVALID_ARGUMENT,e)}function Nk(){return new Ek(mk.APP_DELETED,"The Firebase app was deleted.")}function Rk(e,t){return new Ek(mk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ok(e){throw new Ek(mk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(mk||(mk={}));var Pk,Dk=function(){function e(t,n){s(this,e),this.bucket=t,this.path_=n}return f(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Ek(mk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===gk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Ek(mk.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Lk=function(){function e(t){s(this,e),this.promise_=Promise.reject(t)}return f(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Mk(e){return"string"===typeof e||e instanceof String}function Fk(e){return jk()&&e instanceof Blob}function jk(){return"undefined"!==typeof Blob&&!Ki()}function Uk(e,t,n,r){if(r<t)throw Ik("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ik("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Bk(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Vk(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function zk(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Pk||(Pk={}));var qk=function(){function e(t,n,r,i,a,o,u,c,l,f,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];s(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return f(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Tk();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Nk():Ck());else i(Sk())}};this.canceled_?t(0,new Wk(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Wk(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Pk.NO_ERROR,a=r.getStatus();if(!n||zk(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Pk.ABORT;t(!1,new Wk(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new Wk(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Wk=f((function e(t,n,r){s(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Hk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Kk(){for(var e=Hk(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(jk())return new Blob(n);throw new Ek(mk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Qk(e){if("undefined"===typeof atob)throw t="base-64",new Ek(mk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var Gk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Yk=f((function e(t,n){s(this,e),this.data=t,this.contentType=n||null}));function Xk(e,t){switch(e){case Gk.RAW:return new Yk(Jk(t));case Gk.BASE64:case Gk.BASE64URL:return new Yk($k(e,t));case Gk.DATA_URL:return new Yk(function(e){var t=new Zk(e);return t.base64?$k(Gk.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Rk(Gk.DATA_URL,"Malformed data URL.")}return Jk(t)}(t.rest)}(t),new Zk(t).contentType)}throw Tk()}function Jk(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $k(e,t){switch(e){case Gk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Rk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Gk.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Rk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Qk(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Rk(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Zk=f((function e(t){s(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Rk(Gk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var eb=function(){function e(t,n){s(this,e);var r=0,i="";Fk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return f(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Fk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(jk()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Kk.apply(null,i))}var a=n.map((function(e){return Mk(e)?Xk(Gk.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function tb(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function nb(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function rb(e,t){return t}var ib=f((function e(t,n,r,i){s(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||rb})),ab=null;function ob(){if(ab)return ab;var e=[];e.push(new ib("bucket")),e.push(new ib("generation")),e.push(new ib("metageneration")),e.push(new ib("name","fullPath",!0));var t=new ib("name");t.xform=function(e,t){return function(e){return!Mk(e)||e.length<2?e:nb(e)}(t)},e.push(t);var n=new ib("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ib("timeCreated")),e.push(new ib("updated")),e.push(new ib("md5Hash",null,!0)),e.push(new ib("cacheControl",null,!0)),e.push(new ib("contentDisposition",null,!0)),e.push(new ib("contentEncoding",null,!0)),e.push(new ib("contentLanguage",null,!0)),e.push(new ib("contentType",null,!0)),e.push(new ib("metadata","customMetadata",!0)),ab=e}function sb(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Dk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ub(e,t,n){var r=tb(t);return null===r?null:sb(e,r,n)}function cb(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var lb=f((function e(t,n,r,i){s(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function fb(e){if(!e)throw Tk()}function hb(e,t){return function(n,r){var i=ub(e,r,t);return fb(null!==i),i}}function db(e,t){return function(n,r){var i=ub(e,r,t);return fb(null!==i),function(e,t,n,r){var i=tb(t);if(null===i)return null;if(!Mk(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Bk("/b/"+o(i)+"/o/"+o(a),n,r)+Vk({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function pb(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ek(mk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ek(mk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Ek(mk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ek(mk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function vb(e){var t=pb(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Ek(mk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function yb(e,t,n){var r=Bk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new lb(r,"GET",hb(e,n),i);return a.errorHandler=vb(t),a}function mb(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function gb(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=mb(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+cb(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=eb.getBlob(c,r,l);if(null===f)throw Ak();var h={name:u.fullPath},d=Bk(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new lb(d,"POST",hb(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=pb(t),v}var kb=f((function e(t,n,r,i){s(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function bb(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){fb(!1)}return fb(!!n&&-1!==(t||["active"]).indexOf(n)),n}var _b=262144;function wb(e,t,n,r,i,a,o,s){var u=new kb(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Ek(mk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw Ak();var v=t.maxUploadRetryTime,y=new lb(n,"POST",(function(e,n){var i,o=bb(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?hb(t,a)(e,n):null,new kb(s,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=pb(e),y}var Eb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xb(e){switch(e){case"running":case"pausing":case"canceling":return Eb.RUNNING;case"paused":return Eb.PAUSED;case"success":return Eb.SUCCESS;case"canceled":return Eb.CANCELED;default:return Eb.ERROR}}var Tb=f((function e(t,n,r){s(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Sb(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Cb=null,Ab=function(){function e(){var t=this;s(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pk.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Pk.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Pk.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return f(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Ok("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Ok("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Ok("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Ok("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Ok("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Ib=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Ab);function Nb(){return Cb?Cb():new Ib}var Rb=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=ob(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(mk.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(zk(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,wk),r._needToFetchStatus=!0,void r.completeTransitions_();e=Sk()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(mk.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return f(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=b(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=mb(t,r,i),s={name:o.fullPath},u=Bk(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=cb(o,n),f=e.maxUploadRetryTime,h=new lb(u,"POST",(function(e){var t;bb(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){fb(!1)}return fb(Mk(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=pb(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new lb(n,"POST",(function(e){var t=bb(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){fb(!1)}n||fb(!1);var i=Number(n);return fb(!isNaN(i)),new kb(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=pb(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Nb,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=_b*this._chunkMultiplier,n=new kb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=wb(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,Nb,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(_b*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=yb(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=gb(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Nb,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ck(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=xb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Tb(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(xb(this._state)){case Eb.SUCCESS:Sb(this._resolve.bind(null,this.snapshot))();break;case Eb.CANCELED:case Eb.ERROR:Sb(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(xb(this._state)){case Eb.RUNNING:case Eb.PAUSED:e.next&&Sb(e.next.bind(e,this.snapshot))();break;case Eb.SUCCESS:e.complete&&Sb(e.complete.bind(e))();break;case Eb.CANCELED:case Eb.ERROR:default:e.error&&Sb(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Ob=function(){function e(t,n){s(this,e),this._service=t,this._location=n instanceof Dk?n:Dk.makeFromUrl(n,t.host)}return f(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Dk(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return nb(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Dk(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Ek(mk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function Pb(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Bk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new lb(r,"GET",db(e,n),i);return a.errorHandler=vb(t),a}(e.storage,e._location,ob());return e.storage.makeRequestWithTokens(t,Nb).then((function(e){if(null===e)throw new Ek(mk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Db(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Dk(e._location.bucket,n);return new Ob(e.storage,r)}function Lb(e,t){if(e instanceof jb){var n=e;if(null==n._bucket)throw new Ek(mk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kk+"' property when initializing the app?");var r=new Ob(n,n._bucket);return null!=t?Lb(r,t):r}return void 0!==t?Db(e,t):e}function Mb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof jb)return new Ob(e,t);throw Ik("To use ref(service, url), the first argument must be a Storage instance.")}return Lb(e,t)}function Fb(e,t){var n=null===t||void 0===t?void 0:t[kk];return null==n?null:Dk.makeFromBucketSpec(n,e)}var jb=function(){function e(t,n,r,i,a){s(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=gk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bk,this._maxUploadRetryTime=_k,this._requests=new Set,this._bucket=null!=i?Dk.makeFromBucketSpec(i,this._host):Fb(this._host,this.app.options)}return f(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Dk.makeFromBucketSpec(this._url,e):this._bucket=Fb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Uk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Uk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=E(_().mark((function e(){var t,n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=E(_().mark((function e(){var t,n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Ob(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Lk(Nk());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=Vk(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new qk(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=E(_().mark((function e(t,n){var r,i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=b(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ub="@firebase/storage",Bb="0.11.1",Vb="storage";function zb(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Rb(e,new eb(t),n)}(e=ma(e),t,n)}function qb(e){return Pb(e=ma(e))}function Wb(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:qi(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Hb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new jb(r,i,a,n,co)}io(new ga(Vb,Hb,"PUBLIC").setMultipleInstances(!0)),ho(Ub,Bb,""),ho(Ub,Bb,"esm2017");function Kb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Qb;Object.create;function Gb(){return x({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Yb=Gb,Xb=new $i("auth","Firebase",Gb()),Jb=new Ia("@firebase/auth");function $b(e){if(Jb.logLevel<=wa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jb.error.apply(Jb,["Auth (".concat(co,"): ").concat(e)].concat(n))}}function Zb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw n_.apply(void 0,[e].concat(n))}function e_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n_.apply(void 0,[e].concat(n))}function t_(e,t,n){var r=Object.assign(Object.assign({},Yb()),x({},t,n));return new $i("auth","Firebase",r).create(t,{appName:e.name})}function n_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],s=o(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(o(s)))}return Xb.create.apply(Xb,[e].concat(n))}function r_(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw n_.apply(void 0,[t].concat(r))}}function i_(e){var t="INTERNAL ASSERTION FAILED: "+e;throw $b(t),new Error(t)}function a_(e,t){e||i_(t)}var o_=new Map;function s_(e){a_(e instanceof Function,"Expected a class definition");var t=o_.get(e);return t?(a_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,o_.set(e,t),t)}function u_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function c_(){return"http:"===l_()||"https:"===l_()}function l_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function f_(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(c_()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var h_=function(){function e(t,n){s(this,e),this.shortDelay=t,this.longDelay=n,a_(n>t,"Short delay should be less than long delay!"),this.isMobile=Hi()||Qi()}return f(e,[{key:"get",value:function(){return f_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function d_(e,t){a_(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var p_=function(){function e(){s(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void i_("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void i_("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void i_("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),v_=(x(Qb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),x(Qb,"MISSING_CUSTOM_TOKEN","internal-error"),x(Qb,"INVALID_IDENTIFIER","invalid-email"),x(Qb,"MISSING_CONTINUE_URI","internal-error"),x(Qb,"INVALID_PASSWORD","wrong-password"),x(Qb,"MISSING_PASSWORD","internal-error"),x(Qb,"EMAIL_EXISTS","email-already-in-use"),x(Qb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),x(Qb,"INVALID_IDP_RESPONSE","invalid-credential"),x(Qb,"INVALID_PENDING_TOKEN","invalid-credential"),x(Qb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),x(Qb,"MISSING_REQ_TYPE","internal-error"),x(Qb,"EMAIL_NOT_FOUND","user-not-found"),x(Qb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),x(Qb,"EXPIRED_OOB_CODE","expired-action-code"),x(Qb,"INVALID_OOB_CODE","invalid-action-code"),x(Qb,"MISSING_OOB_CODE","internal-error"),x(Qb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),x(Qb,"INVALID_ID_TOKEN","invalid-user-token"),x(Qb,"TOKEN_EXPIRED","user-token-expired"),x(Qb,"USER_NOT_FOUND","user-token-expired"),x(Qb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),x(Qb,"INVALID_CODE","invalid-verification-code"),x(Qb,"INVALID_SESSION_INFO","invalid-verification-id"),x(Qb,"INVALID_TEMPORARY_PROOF","invalid-credential"),x(Qb,"MISSING_SESSION_INFO","missing-verification-id"),x(Qb,"SESSION_EXPIRED","code-expired"),x(Qb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),x(Qb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),x(Qb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),x(Qb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),x(Qb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),x(Qb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),x(Qb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),x(Qb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),x(Qb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),x(Qb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),x(Qb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Qb),y_=new h_(3e4,6e4);function m_(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function g_(e,t,n,r){return k_.apply(this,arguments)}function k_(){return k_=E(_().mark((function e(t,n,r,i){var a,o=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",b_(t,a,E(_().mark((function e(){var a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ca(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",p_.fetch()(x_(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function b_(e,t,n){return __.apply(this,arguments)}function __(){return __=E(_().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},v_),n),e.prev=2,a=new T_(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw S_(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=b(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw S_(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw S_(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw S_(t,"user-disabled",s);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw t_(t,d,h);case 34:Zb(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ji)){e.next=41;break}throw e.t0;case 41:Zb(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),__.apply(this,arguments)}function w_(e,t,n,r){return E_.apply(this,arguments)}function E_(){return E_=E(_().mark((function e(t,n,r,i){var a,o,s=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,g_(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Zb(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function x_(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?d_(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var T_=function(){function e(t){var n=this;s(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(e_(n.auth,"network-request-failed"))}),y_.get())}))}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function S_(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=e_(e,t,r);return i.customData._tokenResponse=n,i}function C_(e,t){return A_.apply(this,arguments)}function A_(){return A_=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g_(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function I_(e,t){return N_.apply(this,arguments)}function N_(){return N_=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g_(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}function R_(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function O_(){return O_=E(_().mark((function e(t){var n,r,i,a,o,s,u=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ma(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,r_((a=D_(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:R_(P_(a.auth_time)),issuedAtTime:R_(P_(a.iat)),expirationTime:R_(P_(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function P_(e){return 1e3*Number(e)}function D_(e){var t=b(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return $b("JWT malformed, contained fewer than 3 sections"),null;try{var a=Pi(r);return a?JSON.parse(a):($b("Failed to decode base64 JWT payload"),null)}catch(o){return $b("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=E(_().mark((function e(t,n){var r=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ji&&F_(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),M_.apply(this,arguments)}function F_(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var j_=function(){function e(t){s(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(E(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),U_=function(){function e(t,n){s(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=R_(this.lastLoginAt),this.creationTime=R_(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function B_(e){return V_.apply(this,arguments)}function V_(){return V_=E(_().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,L_(t,I_(r,{idToken:i}));case 6:r_(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Kb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=q_(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new U_(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function z_(){return(z_=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma(t),e.next=3,B_(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q_(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(o(n),o(t))}function W_(e,t){return H_.apply(this,arguments)}function H_(){return H_=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b_(t,{},E(_().mark((function e(){var r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ca({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=x_(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",p_.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}var K_=function(){function e(){s(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){r_(e.idToken,"internal-error"),r_("undefined"!==typeof e.idToken,"internal-error"),r_("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=D_(e);return r_(t,"internal-error"),r_("undefined"!==typeof t.exp,"internal-error"),r_("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=E(_().mark((function e(t){var n,r=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],r_(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=E(_().mark((function e(t,n){var r,i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W_(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return i_("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(r_("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(r_("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(r_("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Q_(e,t){r_("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var G_=function(){function e(t){s(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Kb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?o(a.providerData):[],this.metadata=new U_(a.createdAt||void 0,a.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L_(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(r_(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return O_.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return z_.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(r_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){r_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=E(_().mark((function e(t){var n,r,i=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,B_(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,L_(this,C_(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,_=n.isAnonymous,w=n.providerData,E=n.stsTokenManager;r_(k&&E,t,"internal-error");var x=K_.fromJSON(this.name,E);r_("string"===typeof k,t,"internal-error"),Q_(f,t.name),Q_(h,t.name),r_("boolean"===typeof b,t,"internal-error"),r_("boolean"===typeof _,t,"internal-error"),Q_(d,t.name),Q_(p,t.name),Q_(v,t.name),Q_(y,t.name),Q_(m,t.name),Q_(g,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=E(_().mark((function t(n,r){var i,a,o,s=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new K_).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,B_(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Y_=function(){function e(){s(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Y_.type="NONE";var X_=Y_;function J_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var $_=function(){function e(t,n,r){s(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=J_(this.userKey,a.apiKey,o),this.fullPersistenceKey=J_("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?G_._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=E(_().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(s_(X_),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||s_(X_),s=J_(i,n.config.apiKey,n.name),u=null,c=C(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=G_._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Z_(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ew(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(aw(t))return"Blackberry";if(ow(t))return"Webos";if(tw(t))return"Safari";if((t.includes("chrome/")||nw(t))&&!t.includes("edge/"))return"Chrome";if(iw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ew(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/firefox\//i.test(e)}function tw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/crios\//i.test(e)}function rw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/iemobile/i.test(e)}function iw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/android/i.test(e)}function aw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/blackberry/i.test(e)}function ow(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/webos/i.test(e)}function sw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function uw(){return function(){var e=Wi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function cw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi();return sw(e)||iw(e)||ow(e)||aw(e)||/windows phone/i.test(e)||rw(e)}function lw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Z_(Wi());break;case"Worker":t="".concat(Z_(Wi()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(co,"/").concat(r)}var fw=function(){function e(t){s(this,e),this.auth=t,this.queue=[]}return f(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=E(_().mark((function e(t){var n,r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=C(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=C(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(Jn){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),hw=function(){function e(t,n,r){s(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pw(this),this.idTokenSubscription=new pw(this),this.beforeStateQueue=new fw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xb,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=s_(t)),this._initializationPromise=this.queue(E(_().mark((function r(){var i,a;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,$_.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=E(_().mark((function e(t){var n,r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return r_(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B_(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ma(t):null)&&r_(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=E(_().mark((function e(t){var n,r=this,i=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&r_(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(E(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(s_(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $i("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return r_(n=t&&s_(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,$_.create(this,[s_(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=E(_().mark((function e(t){var n=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return r_(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return r_(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=E(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dw(e){return ma(e)}var pw=function(){function e(t){var n=this;s(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new da(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return f(e,[{key:"next",get:function(){return r_(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function vw(e,t,n){var r=dw(e);r_(r._canInitEmulator,r,"emulator-config-failed"),r_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=yw(t),o=function(e){var t=yw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:mw(r.substr(a.length+1))}}var o=b(r.split(":"),2);return{host:o[0],port:mw(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var gw=function(){function e(t,n){s(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return i_("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return i_("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return i_("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return i_("not implemented")}}]),e}();function kw(e,t){return bw.apply(this,arguments)}function bw(){return bw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g_(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function _w(e,t){return ww.apply(this,arguments)}function ww(){return ww=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithPassword",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function Ew(e,t){return xw.apply(this,arguments)}function xw(){return xw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithEmailLink",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithEmailLink",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}var Cw=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return s(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_w(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ew(t,{email:this._email,oobCode:this._password}));case 5:Zb(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",kw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Tw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Zb(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(gw);function Aw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithIdp",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}var Nw=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Aw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Aw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Aw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ca(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zb("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Kb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(gw);function Rw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g_(t,"POST","/v1/accounts:sendVerificationCode",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Pw(){return Pw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithPhoneNumber",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Dw(){return Dw=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w_(t,"POST","/v1/accounts:signInWithPhoneNumber",m_(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw S_(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}var Lw=x({},"USER_NOT_FOUND","user-not-found");function Mw(){return Mw=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",w_(t,"POST","/v1/accounts:signInWithPhoneNumber",m_(t,r),Lw));case 2:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}var Fw=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Pw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Dw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Mw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(gw);var jw=function(){function e(t){var n,r,i,a,o,u;s(this,e);var c=la(fa(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);r_(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=la(fa(e)).link,n=t?la(fa(t)).deep_link_id:null,r=la(fa(e)).deep_link_id;return(r?la(fa(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Bm){return null}}}]),e}();var Uw=function(){function e(){s(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return Cw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=jw.parseLink(t);return r_(n,"argument-error"),Cw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Uw.PROVIDER_ID="password",Uw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Uw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Bw=function(){function e(t){s(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Vw=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return o(this.scopes)}}]),n}(Bw),zw=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bm){return null}}}]),n}(Vw);zw.FACEBOOK_SIGN_IN_METHOD="facebook.com",zw.PROVIDER_ID="facebook.com";var qw=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Bm){return null}}}]),n}(Vw);qw.GOOGLE_SIGN_IN_METHOD="google.com",qw.PROVIDER_ID="google.com";var Ww=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bm){return null}}}]),n}(Vw);Ww.GITHUB_SIGN_IN_METHOD="github.com",Ww.PROVIDER_ID="github.com";var Hw=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Bm){return null}}}]),n}(Vw);function Kw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w_(t,"POST","/v1/accounts:signUp",m_(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}Hw.TWITTER_SIGN_IN_METHOD="twitter.com",Hw.PROVIDER_ID="twitter.com";var Gw=function(){function e(t){s(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=E(_().mark((function t(n,r,i){var a,o,s,u,c=arguments;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,G_._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Yw(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=E(_().mark((function t(n,r,i){var a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Yw(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Yw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Xw=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,u;return s(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ji);function Jw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Xw._fromErrorAndOperation(e,n,t,r);throw n}))}function $w(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=E(_().mark((function e(t,n){var r,i,a=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=L_,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Gw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=E(_().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,L_(t,Jw(i,a,n,t),r);case 6:return r_((o=e.sent).idToken,i,"internal-error"),r_(s=D_(o.idToken),i,"internal-error"),u=s.sub,r_(t.uid===u,i,"user-mismatch"),e.abrupt("return",Gw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Zb(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=E(_().mark((function e(t,n){var r,i,a,o,s=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Jw(t,i,n);case 4:return a=e.sent,e.next=7,Gw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){return aE.apply(this,arguments)}function aE(){return aE=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nE(dw(t),n));case 1:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(){return oE=E(_().mark((function e(t,n,r){var i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dw(t),e.next=3,Kw(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Gw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function sE(e,t){return g_(e,"POST","/v2/accounts/mfaEnrollment:start",m_(e,t))}new WeakMap;var uE="__sak",cE=function(){function e(t,n){s(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(uE,"1"),this.storage.removeItem(uE),Promise.resolve(!0)):Promise.resolve(!1)}catch(Bm){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var lE=10,fE=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Wi();return tw(e)||sw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=cw(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);uw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lE):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=E(_().mark((function e(t,r){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(p(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=E(_().mark((function e(t){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(p(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(p(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(cE);fE.type="LOCAL";var hE=fE,dE=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(cE);dE.type="SESSION";var pE=dE;function vE(e){return Promise.all(e.map(function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var yE=function(){function e(t){s(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=E(_().mark((function e(t){var n,r,i,a,o,s,u,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,vE(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function mE(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yE.receivers=[];var gE=function(){function e(t){s(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=mE("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function kE(){return window}function bE(){return"undefined"!==typeof kE().WorkerGlobalScope&&"function"===typeof kE().importScripts}function _E(){return wE.apply(this,arguments)}function wE(){return(wE=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function EE(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var xE="firebaseLocalStorageDb",TE=1,SE="firebaseLocalStorage",CE="fbase_key",AE=function(){function e(t){s(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function IE(e,t){return e.transaction([SE],t?"readwrite":"readonly").objectStore(SE)}function NE(){var e=indexedDB.deleteDatabase(xE);return new AE(e).toPromise()}function RE(){var e=indexedDB.open(xE,TE);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(SE,{keyPath:CE})}catch(r){n(r)}})),e.addEventListener("success",E(_().mark((function n(){var r;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(SE)){n.next=12;break}return r.close(),n.next=5,NE();case 5:return n.t0=t,n.next=8,RE();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function OE(e,t,n){return PE.apply(this,arguments)}function PE(){return PE=E(_().mark((function e(t,n,r){var i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=IE(t,!0).put((x(i={},CE,n),x(i,"value",r),i)),e.abrupt("return",new AE(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),PE.apply(this,arguments)}function DE(e,t){return LE.apply(this,arguments)}function LE(){return LE=E(_().mark((function e(t,n){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=IE(t,!1).get(n),e.next=3,new AE(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}function ME(e,t){var n=IE(e,!0).delete(t);return new AE(n).toPromise()}var FE=function(){function e(){s(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return f(e,[{key:"_openDb",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,RE();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bE()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=E(_().mark((function e(){var t=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=yE._getInstance(bE()?self:null),this.receiver._subscribe("keyChanged",function(){var e=E(_().mark((function e(n,r){var i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=E(_().mark((function e(t,n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=E(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_E();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new gE(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&EE()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,RE();case 5:return t=e.sent,e.next=8,OE(t,uE,"1");case 8:return e.next=10,ME(t,uE);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=E(_().mark((function e(t,n){var r=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return OE(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return DE(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=E(_().mark((function e(t){var n=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ME(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=E(_().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=IE(e,!1).getAll();return new AE(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=C(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(E(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();FE.type="LOCAL";var jE=FE;function UE(e,t){return g_(e,"POST","/v2/accounts/mfaSignIn:start",m_(e,t))}function BE(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=e_("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function VE(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}VE("rcb"),new h_(3e4,6e4);var zE="recaptcha";function qE(e,t,n){return WE.apply(this,arguments)}function WE(){return WE=E(_().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,r_("string"===typeof a,t,"argument-error"),r_(r.type===zE,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return r_("enroll"===s.type,t,"internal-error"),e.next=13,sE(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return r_("signin"===s.type,t,"internal-error"),r_(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,UE(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Rw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),WE.apply(this,arguments)}var HE=function(){function e(t){s(this,e),this.providerId=e.PROVIDER_ID,this.auth=dw(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return qE(this.auth,e,ma(t))}}],[{key:"credential",value:function(e,t){return Fw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fw._fromTokenResponse(n,r):null}}]),e}();function KE(e,t){return t?s_(t):(r_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}HE.PROVIDER_ID="phone",HE.PHONE_SIGN_IN_METHOD="phone";var QE=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return Aw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Aw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Aw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(gw);function GE(e){return nE(e.auth,new QE(e),e.bypassAuthState)}function YE(e){var t=e.auth,n=e.user;return r_(n,t,"internal-error"),eE(n,new QE(e),e.bypassAuthState)}function XE(e){return JE.apply(this,arguments)}function JE(){return JE=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r_(r=t.user,n,"internal-error"),e.abrupt("return",$w(r,new QE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}var $E=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=E(_().mark((function t(n,r){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=E(_().mark((function e(t){var n,r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GE;case"linkViaPopup":case"linkViaRedirect":return XE;case"reauthViaPopup":case"reauthViaRedirect":return YE;default:Zb(this.auth,"internal-error")}}},{key:"resolve",value:function(e){a_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){a_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ZE=new h_(2e3,1e4);var ex=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o){var u;return s(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(u),u}return f(n,[{key:"executeNotNull",value:function(){var e=E(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return r_(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=E(_().mark((function e(){var t,n=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a_(1===this.filter.length,"Popup operations only handle one event"),t=mE(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(e_(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(e_(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(e_(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ZE.get())}()}}]),n}($E);ex.currentPopupAction=null;var tx="pendingRedirect",nx=new Map,rx=function(e){d(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=E(_().mark((function e(){var t,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=nx.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ix(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ro(p(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:nx.set(this.auth._key(),t);case 21:return this.bypassAuthState||nx.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=E(_().mark((function e(t){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ro(p(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ro(p(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=E(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}($E);function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=E(_().mark((function e(t,n){var r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ux(n),i=sx(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t){nx.set(e._key(),t)}function sx(e){return s_(e._redirectPersistence)}function ux(e){return J_(tx,e.config.apiKey,e.name)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return lx=E(_().mark((function e(t,n){var r,i,a,o,s,u=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=dw(t),a=KE(i,n),o=new rx(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}var fx=function(){function e(t){s(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dx(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!dx(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(e_(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hx(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(hx(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function hx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function dx(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function px(e){return vx.apply(this,arguments)}function vx(){return vx=E(_().mark((function e(t){var n,r=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",g_(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}var yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mx=/^https?/;function gx(){return gx=E(_().mark((function e(t){var n,r,i,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,px(t);case 4:n=e.sent,r=n.authorizedDomains,i=C(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!kx(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Zb(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),gx.apply(this,arguments)}function kx(e){var t=u_(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!mx.test(r))return!1;if(yx.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var bx=new h_(3e4,6e4);function _x(){var e=kE().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=o(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var wx=null;function Ex(e){return wx=wx||function(e){return new Promise((function(t,n){var r,i,a;function o(){_x(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){_x(),n(e_(e,"network-request-failed"))},timeout:bx.get()})}if(null===(i=null===(r=kE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=kE().gapi)||void 0===a?void 0:a.load)){var s=VE("iframefcb");return kE()[s]=function(){gapi.load?o():n(e_(e,"network-request-failed"))},BE("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw wx=null,e}))}(e),wx}var xx=new h_(5e3,15e3),Tx="__/auth/iframe",Sx="emulator/auth/iframe",Cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ix(e){var t=e.config;r_(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?d_(t,Sx):"https://".concat(e.config.authDomain,"/").concat(Tx),r={apiKey:t.apiKey,appName:e.name,v:co},i=Ax.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ca(r).slice(1))}function Nx(e){return Rx.apply(this,arguments)}function Rx(){return Rx=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ex(t);case 2:return n=e.sent,r_(r=kE().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ix(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cx,dontclear:!0},(function(e){return new Promise(function(){var n=E(_().mark((function n(r,i){var a,o,s;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){kE().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=e_(t,"network-request-failed"),o=kE().setTimeout((function(){i(a)}),xx.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}var Ox={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Px=500,Dx=600,Lx="_blank",Mx="http://localhost",Fx=function(){function e(t){s(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function jx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Px,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dx,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Ox),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Wi().toLowerCase();n&&(s=nw(c)?Lx:n),ew(c)&&(t=t||Mx,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=b(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return sw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Fx(null);var f=window.open(t||"",s,l);r_(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Fx(f)}var Ux="__/auth/handler",Bx="emulator/auth/handler";function Vx(e,t,n,r,i,a){r_(e.config.authDomain,e,"auth-domain-config-required"),r_(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:co,eventId:i};if(t instanceof Bw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",aa(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=b(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Vw){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ux);return d_(t,Bx)}(e),"?").concat(ca(d).slice(1))}var zx="webStorageSupport",qx=function(){function e(){s(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pE,this._completeRedirectFn=cx,this._overrideRedirectResult=ox}return f(e,[{key:"_openPopup",value:function(){var e=E(_().mark((function e(t,n,r,i){var a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a_(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Vx(t,n,r,u_(),i),e.abrupt("return",jx(t,o,mE()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=E(_().mark((function e(t,n,r,i){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Vx(t,n,r,u_(),i),kE().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(a_(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=E(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nx(t);case 2:return n=e.sent,r=new fx(t),n.register("authEvent",(function(e){return r_(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(zx,{type:zx},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[zx];void 0!==i&&t(!!i),Zb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return gx.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return cw()||tw()||sw()}}]),e}(),Wx=qx,Hx=function(){function e(t){s(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return i_("unexpected MultiFactorSessionType")}}}]),e}(),Kx=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return g_(e,"POST","/v2/accounts/mfaEnrollment:finalize",m_(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return g_(e,"POST","/v2/accounts/mfaSignIn:finalize",m_(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Hx);(function(){function e(){s(this,e)}return f(e,null,[{key:"assertion",value:function(e){return Kx._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Qx="@firebase/auth",Gx="0.21.3",Yx=function(){function e(t){s(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=E(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){r_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Xx,Jx=Vi("authIdTokenMaxAge")||300,$x=null,Zx=function(e){return function(){var t=E(_().mark((function t(n){var r,i,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Jx)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,$x!==a){t.next=12;break}return t.abrupt("return");case 12:return $x=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Xx="Browser",io(new ga("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){r_(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),r_(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Xx,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lw(Xx)},i=new hw(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(s_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),io(new ga("auth-internal",(function(e){return function(e){return new Yx(e)}(dw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ho(Qx,Gx,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xx)),ho(Qx,Gx,"esm2017");var eT="@firebase/database",tT="0.14.3",nT="";var rT=function(){function e(t){s(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ta(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ea(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),iT=function(){function e(){s(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ra(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),aT=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new rT(t)}}catch(n){}return new iT},oT=aT("localStorage"),sT=aT("sessionStorage"),uT=new Ia("@firebase/database"),cT=function(){var e=1;return function(){return e++}}(),lT=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ci(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ha;n.update(t);var r=n.digest();return Ni.encodeByteArray(r)},fT=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ta(r):r,t+=" "}return t},hT=null,dT=!0,pT=function(e,t){Ci(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(uT.logLevel=wa.VERBOSE,hT=uT.log.bind(uT),t&&sT.set("logging_enabled",!0)):"function"===typeof e?hT=e:(hT=null,sT.remove("logging_enabled"))},vT=function(){if(!0===dT&&(dT=!1,null===hT&&!0===sT.get("logging_enabled")&&pT(!0)),hT){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=fT.apply(null,t);hT(r)}},yT=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];vT.apply(void 0,[e].concat(n))}},mT=function(){var e="FIREBASE INTERNAL ERROR: "+fT.apply(void 0,arguments);uT.error(e)},gT=function(){var e="FIREBASE FATAL ERROR: ".concat(fT.apply(void 0,arguments));throw uT.error(e),new Error(e)},kT=function(){var e="FIREBASE WARNING: "+fT.apply(void 0,arguments);uT.warn(e)},bT=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},_T="[MIN_NAME]",wT="[MAX_NAME]",ET=function(e,t){if(e===t)return 0;if(e===_T||t===wT)return-1;if(t===_T||e===wT)return 1;var n=RT(e),r=RT(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},xT=function(e,t){return e===t?0:e<t?-1:1},TT=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ta(t))},ST=function e(t){if("object"!==typeof t||null===t)return ta(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ta(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},CT=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function AT(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var IT=function(e){Ci(!bT(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var NT=new RegExp("^-?(0*)\\d{1,10}$"),RT=function(e){if(NT.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},OT=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw kT("Exception was thrown by user callback.",e),t}),Math.floor(0))}},PT=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},DT=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},LT=function(){function e(t,n){var r=this;s(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){kT('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),MT=function(){function e(t,n,r){var i=this;s(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(vT("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kT(e)}}]),e}(),FT=function(){function e(t){s(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();FT.OWNER="owner";var jT="5",UT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BT="ac",VT="websocket",zT="long_polling",qT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];s(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=oT.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&oT.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function WT(e,t,n){var r;if(Ci("string"===typeof t,"typeof type must == string"),Ci("object"===typeof n,"typeof params must == object"),t===VT)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==zT)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return AT(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var HT=function(){function e(){s(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ra(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Di(this.counters_)}}]),e}(),KT={},QT={};function GT(e){var t=e.toString();return KT[t]||(KT[t]=new HT),KT[t]}var YT=function(){function e(t){s(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&OT((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),XT="start",JT="close",$T="pLPCommand",ZT="pRTLPCB",eS=function(){function e(t,n,r,i,a,o,u){var c=this;s(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yT(t),this.stats_=GT(n),this.urlFn=function(e){return c.appCheckToken&&(e[BT]=c.appCheckToken),WT(n,zT,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new YT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Gi()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new tS((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===XT)n.id=a,n.password=o;else{if(i!==JT)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[XT]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=jT,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[BT]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&UT.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ta(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ri(t),r=CT(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Gi()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ta(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Gi()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),tS=function(){function e(t,n,r,i){if(s(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Gi())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=cT(),window[$T+this.uniqueCallbackIdentifier]=t,window[ZT+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){vT("frame writing exception"),u.stack&&vT(u.stack),vT(u)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Gi()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){vT("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||vT("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),nS=null;"undefined"!==typeof MozWebSocket?nS=MozWebSocket:"undefined"!==typeof WebSocket&&(nS=WebSocket);var rS=function(){function e(t,n,r,i,a,o,u){s(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yT(this.connId),this.stats_=GT(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,oT.set("previous_websocket_failure",!0);try{var r;if(Gi()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(jT,"/").concat(nT,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/bookShelf",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBdYLyrEZ-laggH8VLBm5CyF2AgWYw_SJ4",REACT_APP_FIREBASE_APP_ID:"1:857447729693:web:bc8a31bf38c47efc9354f4",REACT_APP_FIREBASE_AUTH_DOMAIN:"bookshelf-3479c.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://bookshelf-3479c-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"857447729693",REACT_APP_FIREBASE_PROJECT_ID:"bookshelf-3479c",REACT_APP_FIREBASE_STORAGE_BUCKET:"bookshelf-3479c.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new nS(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){oT.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ea(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ci(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ta(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=CT(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=jT,!Gi()&&"undefined"!==typeof location&&location.hostname&&UT.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[BT]=r),i&&(a.p=i),WT(e,VT,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==nS&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return oT.isInMemoryStorage||!0===oT.get("previous_websocket_failure")}}]),e}();rS.responsesRequiredToBeHealthy=2,rS.healthyTimeout=3e4;var iS=function(){function e(t){s(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=rS&&rS.isAvailable(),r=n&&!rS.previouslyFailed();if(t.webSocketOnly&&(n||kT("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rS];else{var i,a=this.transports_=[],o=C(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[eS,rS]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();iS.globalTransportInitialized_=!1;var aS=function(){function e(t,n,r,i,a,o,u,c,l,f){s(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yT("c:"+this.id+":"),this.transportManager_=new iS(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=DT((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=TT("t",e),n=TT("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=TT("t",e),n=TT("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=TT("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?mT("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mT("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),jT!==n&&kT("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),DT((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):DT((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(oT.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),oS=function(){function e(){s(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),sS=function(){function e(t){s(this,e),this.allowedEvents_=t,this.listeners_={},Ci(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=o(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ci(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),uS=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Hi()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ci("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(sS),cS=32,lS=768,fS=function(){function e(t,n){if(s(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function hS(){return new fS("")}function dS(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pS(e){return e.pieces_.length-e.pieceNum_}function vS(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new fS(e.pieces_,t)}function yS(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function gS(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fS(t,0)}function kS(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fS)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new fS(n,0)}function bS(e){return e.pieceNum_>=e.pieces_.length}function _S(e,t){var n=dS(e),r=dS(t);if(null===n)return t;if(n===r)return _S(vS(e),vS(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function wS(e,t){for(var n=mS(e,0),r=mS(t,0),i=0;i<n.length&&i<r.length;i++){var a=ET(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function ES(e,t){if(pS(e)!==pS(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function xS(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(pS(e)>pS(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var TS=f((function e(t,n){s(this,e),this.errorPrefix_=n,this.parts_=mS(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ya(this.parts_[r]);SS(this)}));function SS(e){if(e.byteLength_>lS)throw new Error(e.errorPrefix_+"has a key path longer than "+lS+" bytes ("+e.byteLength_+").");if(e.parts_.length>cS)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cS+") or object contains a cycle "+CS(e))}function CS(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var AS=function(e){d(n,e);var t=m(n);function n(){var e,r,i;return s(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ci("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(sS),IS=1e3,NS=3e5,RS=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u,c,l){var f;if(s(this,n),(f=t.call(this)).repoInfo_=e,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=a,f.onServerInfoUpdate_=o,f.authTokenProvider_=u,f.appCheckTokenProvider_=c,f.authOverride_=l,f.id=n.nextPersistentConnectionId_++,f.log_=yT("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=IS,f.maxReconnectDelay_=NS,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,l&&!Gi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return AS.getInstance().on("visible",f.onVisible_,y(f)),-1===e.host.indexOf("fblocal")&&uS.getInstance().on("online",f.onOnline_,y(f)),f}return f(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ta(i)),Ci(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new zi,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ci(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ci(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=na(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=na(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ci(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ta(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):mT("Unrecognized action received from server: "+ta(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ci(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=IS,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=IS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=IS),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=E(_().mark((function e(){var t,r,i,a,o,s,u,c,l,f,h,d,p,v,y=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){Ci(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=b(h,2),p=d[0],v=d[1],s?vT("getToken() completed but was canceled"):(vT("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new aS(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){kT(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&kT(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){vT("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){vT("Resuming connection for reason: "+e),delete this.interruptReasons_[e],aa(this.interruptReasons_)&&(this.reconnectDelay_=IS,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return ST(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new fS(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){vT("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){vT("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=C(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=C(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Gi()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+nT.replace(/\./g,"-")]=1,Hi()?e["framework.cordova"]=1:Qi()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=uS.getInstance().currentlyOnline();return aa(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ra(e,"w")){var n=ia(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();kT("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(oS);RS.nextPersistentConnectionId_=0,RS.nextConnectionId_=0;var OS,PS=function(){function e(t,n){s(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),DS=function(){function e(){s(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new PS(_T,e),r=new PS(_T,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return PS.MIN}}]),e}(),LS=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return ET(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ai("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return PS.MIN}},{key:"maxPost",value:function(){return new PS(wT,OS)}},{key:"makePost",value:function(e,t){return Ci("string"===typeof e,"KeyIndex indexValue must always be a string."),new PS(e,OS)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return OS},set:function(e){OS=e}}]),n}(DS),MS=new LS,FS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;s(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),jS=function(){function e(t,n,r,i,a){s(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:VS.EMPTY_NODE,this.right=null!=a?a:VS.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return VS.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return VS.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();jS.RED=!0,jS.BLACK=!1;var US,BS=function(){function e(){s(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jS(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),VS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;s(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jS.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jS.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new FS(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new FS(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new FS(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new FS(this.root_,null,this.comparator_,!0,e)}}]),e}();function zS(e,t){return ET(e.name,t.name)}function qS(e,t){return ET(e,t)}VS.EMPTY_NODE=new BS;var WS,HS,KS,QS=function(e){return"number"===typeof e?"number:"+IT(e):"string:"+e},GS=function(e){if(e.isLeafNode()){var t=e.val();Ci("string"===typeof t||"number"===typeof t||"object"===typeof t&&ra(t,".sv"),"Priority must be a string or number.")}else Ci(e===US||e.isEmpty(),"priority of unexpected type.");Ci(e===US||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},YS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;s(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ci(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),GS(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return bS(t)?this:".priority"===dS(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=dS(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ci(".priority"!==r||1===pS(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(vS(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+QS(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?IT(this.value_):this.value_,this.lazyHash_=lT(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ci(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ci(i>=0,"Unknown leaf type: "+n),Ci(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return WS},set:function(e){WS=e}}]),e}();YS.VALUE_TYPE_ORDER=["object","boolean","number","string"];var XS,JS,$S=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ET(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return PS.MIN}},{key:"maxPost",value:function(){return new PS(wT,new YS("[PRIORITY-POST]",KS))}},{key:"makePost",value:function(e,t){var n=HS(e);return new PS(t,new YS("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(DS),ZS=new $S,eC=Math.log(2),tC=function(){function e(t){s(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/eC,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),nC=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new jS(o,a.node,jS.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new jS(o,a.node,jS.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new jS(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,jS.BLACK):(s(f,jS.BLACK),s(f,jS.RED))}return a}(new tC(e.length));return new VS(r||t,a)},rC={},iC=function(){function e(t,n){s(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=ia(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof VS?t:null}},{key:"hasIndex",value:function(e){return ra(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ci(t!==MS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(PS.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?nC(i,t.getCompare()):rC;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(oa(this.indexes_,(function(e,i){var a=ia(r.indexSet_,i);if(Ci(a,"Missing index implementation for "+i),e===rC){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(PS.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),nC(o,a.getCompare())}return rC}var c=n.get(t.name),l=e;return c&&(l=l.remove(new PS(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(oa(this.indexes_,(function(e){if(e===rC)return e;var r=n.get(t.name);return r?e.remove(new PS(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ci(rC&&ZS,"ChildrenNode.ts has not been loaded"),XS=XS||new e({".priority":rC},{".priority":ZS})}}]),e}(),aC=function(){function e(t,n,r){s(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&GS(this.priorityNode_),this.children_.isEmpty()&&Ci(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||JS}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?JS:t}},{key:"getChild",value:function(e){var t=dS(e);return null===t?this:this.getImmediateChild(t).getChild(vS(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ci(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new PS(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?JS:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=dS(e);if(null===n)return t;Ci(".priority"!==dS(e)||1===pS(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(vS(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ZS,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+QS(this.getPriority().val())+":"),this.forEachChild(ZS,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":lT(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new PS(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new PS(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new PS(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,PS.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,PS.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oC?-1:0}},{key:"withIndex",value:function(t){if(t===MS||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===MS||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ZS),r=t.getIterator(ZS),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===MS?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return JS||(JS=new e(new VS(qS),null,iC.Default))}}]),e}();aC.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var oC=new(function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.call(this,new VS(qS),aC.EMPTY_NODE,iC.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return aC.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(aC));Object.defineProperties(PS,{MIN:{value:new PS(_T,aC.EMPTY_NODE)},MAX:{value:new PS(wT,oC)}}),LS.__EMPTY_NODE=aC.EMPTY_NODE,YS.__childrenNodeConstructor=aC,US=oC,function(e){KS=e}(oC);var sC=!0;function uC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return aC.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ci(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new YS(e,uC(t));if(e instanceof Array||!sC){var n=aC.EMPTY_NODE;return AT(e,(function(t,r){if(ra(e,t)&&"."!==t.substring(0,1)){var i=uC(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(uC(t))}var r=[],i=!1;if(AT(e,(function(e,t){if("."!==e.substring(0,1)){var n=uC(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new PS(e,n)))}})),0===r.length)return aC.EMPTY_NODE;var a=nC(r,zS,(function(e){return e.name}),qS);if(i){var o=nC(r,ZS.getCompare());return new aC(a,uC(t),new iC({".priority":o},{".priority":ZS}))}return new aC(a,uC(t),iC.Default)}!function(e){HS=e}(uC);var cC=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).indexPath_=e,Ci(!bS(e)&&".priority"!==dS(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ET(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=uC(e),r=aC.EMPTY_NODE.updateChild(this.indexPath_,n);return new PS(t,r)}},{key:"maxPost",value:function(){var e=aC.EMPTY_NODE.updateChild(this.indexPath_,oC);return new PS(wT,e)}},{key:"toString",value:function(){return mS(this.indexPath_,0).join("/")}}]),n}(DS),lC=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?ET(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return PS.MIN}},{key:"maxPost",value:function(){return PS.MAX}},{key:"makePost",value:function(e,t){var n=uC(e);return new PS(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(DS),fC=new lC;function hC(e){return{type:"value",snapshotNode:e}}function dC(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function pC(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vC(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var yC=function(){function e(t){s(this,e),this.index_=t}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ci(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(pC(t,o)):Ci(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(dC(t,n)):a.trackChildChange(vC(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ZS,(function(e,r){t.hasChild(e)||n.trackChildChange(pC(e,r))})),t.isLeafNode()||t.forEachChild(ZS,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(vC(t,r,i))}else n.trackChildChange(dC(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?aC.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),mC=function(){function e(t){s(this,e),this.indexedFilter_=new yC(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new PS(t,n))||(n=aC.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=aC.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(aC.EMPTY_NODE);var i=this;return t.forEachChild(ZS,(function(e,t){i.matches(new PS(e,t))||(r=r.updateImmediateChild(e,aC.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),gC=function(){function e(t){var n=this;s(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new mC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new PS(t,n))||(n=aC.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=aC.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=aC.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(aC.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,aC.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ci(s.numChildren()===this.limit_,"");var u=new PS(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(vC(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(pC(t,f));var p=s.updateImmediateChild(t,aC.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(dC(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(pC(c.name,c.node)),i.trackChildChange(dC(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,aC.EMPTY_NODE)):e}}]),e}(),kC=function(){function e(){s(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ZS}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ci(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ci(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_T}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ci(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ci(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wT}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ci(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ZS}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function bC(e){var t,n={};if(e.isDefault())return n;if(e.index_===ZS?t="$priority":e.index_===fC?t="$value":e.index_===MS?t="$key":(Ci(e.index_ instanceof cC,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ta(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ta(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ta(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ta(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ta(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function _C(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ZS&&(t.i=e.index_.toString()),t}var wC=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=yT("p:rest:"),o.listens_={},o}return f(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=bC(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ia(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=bC(e._queryParams),r=e._path.toString(),i=new zi;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=b(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ca(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ea(c.responseText)}catch(n){kT("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&kT("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ci(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(oS),EC=function(){function e(){s(this,e),this.rootNode_=aC.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function xC(){return{value:null,children:new Map}}function TC(e,t,n){if(bS(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=dS(t);e.children.has(r)||e.children.set(r,xC()),TC(e.children.get(r),t=vS(t),n)}}function SC(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){SC(r,new fS(t.toString()+"/"+e),n)}))}var CC,AC=function(){function e(t){s(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&AT(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),IC=1e4,NC=3e4,RC=function(){function e(t,n){s(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new AC(t);var r=IC+(NC-IC)*Math.random();DT(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;AT(t,(function(t,i){i>0&&ra(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),DT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function OC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(CC||(CC={}));var PC,DC=function(){function e(t,n,r){s(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=CC.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(bS(this.path)){if(null!=this.affectedTree.value)return Ci(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new fS(t));return new e(hS(),n,this.revert)}return Ci(dS(this.path)===t,"operationForChild called for unrelated child."),new e(vS(this.path),this.affectedTree,this.revert)}}]),e}(),LC=function(){function e(t,n){s(this,e),this.source=t,this.path=n,this.type=CC.LISTEN_COMPLETE}return f(e,[{key:"operationForChild",value:function(t){return bS(this.path)?new e(this.source,hS()):new e(this.source,vS(this.path))}}]),e}(),MC=function(){function e(t,n,r){s(this,e),this.source=t,this.path=n,this.snap=r,this.type=CC.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return bS(this.path)?new e(this.source,hS(),this.snap.getImmediateChild(t)):new e(this.source,vS(this.path),this.snap)}}]),e}(),FC=function(){function e(t,n,r){s(this,e),this.source=t,this.path=n,this.children=r,this.type=CC.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(bS(this.path)){var n=this.children.subtree(new fS(t));return n.isEmpty()?null:n.value?new MC(this.source,hS(),n.value):new e(this.source,hS(),n)}return Ci(dS(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,vS(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),jC=function(){function e(t,n,r){s(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(bS(e))return this.isFullyInitialized()&&!this.filtered_;var t=dS(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),UC=f((function e(t){s(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function BC(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ai("Should only compare child_ events.");var r=new PS(t.childName,t.snapshotNode),i=new PS(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function VC(e,t){return{eventCache:e,serverCache:t}}function zC(e,t,n,r){return VC(new jC(t,n,r),e.serverCache)}function qC(e,t,n,r){return VC(e.eventCache,new jC(t,n,r))}function WC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function HC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var KC=function(){return PC||(PC=new VS(xT)),PC},QC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KC();s(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:hS(),value:this.value};if(bS(e))return null;var n=dS(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(vS(e),t);return null!=i?{path:kS(new fS(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(bS(t))return this;var n=dS(t),r=this.children.get(n);return null!==r?r.subtree(vS(t)):new e(null)}},{key:"set",value:function(t,n){if(bS(t))return new e(n,this.children);var r=dS(t),i=(this.children.get(r)||new e(null)).set(vS(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(bS(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=dS(t),r=this.children.get(n);if(r){var i,a=r.remove(vS(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(bS(e))return this.value;var t=dS(e),n=this.children.get(t);return n?n.get(vS(e)):null}},{key:"setTree",value:function(t,n){if(bS(t))return n;var r,i=dS(t),a=(this.children.get(i)||new e(null)).setTree(vS(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(hS(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(kS(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,hS(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(bS(e))return null;var i=dS(e),a=this.children.get(i);return a?a.findOnPath_(vS(e),kS(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,hS(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(bS(t))return this;this.value&&r(n,this.value);var i=dS(t),a=this.children.get(i);return a?a.foreachOnPath_(vS(t),kS(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(hS(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(kS(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return AT(t,(function(e,t){n=n.set(new fS(e),t)})),n}}]),e}(),GC=function(){function e(t){s(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new QC(null))}}]),e}();function YC(e,t,n){if(bS(t))return new GC(new QC(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=_S(i,t);return a=a.updateChild(o,n),new GC(e.writeTree_.set(i,a))}var s=new QC(n),u=e.writeTree_.setTree(t,s);return new GC(u)}function XC(e,t,n){var r=e;return AT(n,(function(e,n){r=YC(r,kS(t,e),n)})),r}function JC(e,t){if(bS(t))return GC.empty();var n=e.writeTree_.setTree(t,new QC(null));return new GC(n)}function $C(e,t){return null!=ZC(e,t)}function ZC(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(_S(n.path,t)):null}function eA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ZS,(function(e,n){t.push(new PS(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new PS(e,n.value))})),t}function tA(e,t){if(bS(t))return e;var n=ZC(e,t);return new GC(null!=n?new QC(n):e.writeTree_.subtree(t))}function nA(e){return e.writeTree_.isEmpty()}function rA(e,t){return iA(hS(),e.writeTree_,t)}function iA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ci(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=iA(kS(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(kS(e,".priority"),r)),n}function aA(e,t){return gA(t,e)}function oA(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ci(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&sA(s,r.path)?i=!1:xS(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=cA(e.allWrites,uA,hS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=JC(e.visibleWrites,r.path):AT(r.children,(function(t){e.visibleWrites=JC(e.visibleWrites,kS(r.path,t))}));return!0}return!1}function sA(e,t){if(e.snap)return xS(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&xS(kS(e.path,n),t))return!0;return!1}function uA(e){return e.visible}function cA(e,t,n){for(var r=GC.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)xS(n,o)?r=YC(r,s=_S(n,o),a.snap):xS(o,n)&&(s=_S(o,n),r=YC(r,hS(),a.snap.getChild(s)));else{if(!a.children)throw Ai("WriteRecord should have .snap or .children");if(xS(n,o))r=XC(r,s=_S(n,o),a.children);else if(xS(o,n))if(bS(s=_S(o,n)))r=XC(r,hS(),a.children);else{var u=ia(a.children,dS(s));if(u){var c=u.getChild(vS(s));r=YC(r,hS(),c)}}}}}return r}function lA(e,t,n,r,i){if(r||i){var a=tA(e.visibleWrites,t);if(!i&&nA(a))return n;if(i||null!=n||$C(a,hS())){return rA(cA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(xS(e.path,t)||xS(t,e.path))}),t),n||aC.EMPTY_NODE)}return null}var o=ZC(e.visibleWrites,t);if(null!=o)return o;var s=tA(e.visibleWrites,t);return nA(s)?n:null!=n||$C(s,hS())?rA(s,n||aC.EMPTY_NODE):null}function fA(e,t,n,r){return lA(e.writeTree,e.treePath,t,n,r)}function hA(e,t){return function(e,t,n){var r=aC.EMPTY_NODE,i=ZC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ZS,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=tA(e.visibleWrites,t);return n.forEachChild(ZS,(function(e,t){var n=rA(tA(a,new fS(e)),t);r=r.updateImmediateChild(e,n)})),eA(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return eA(tA(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function dA(e,t,n,r){return function(e,t,n,r,i){Ci(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=kS(t,n);if($C(e.visibleWrites,a))return null;var o=tA(e.visibleWrites,a);return nA(o)?i.getChild(n):rA(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function pA(e,t){return function(e,t){return ZC(e.visibleWrites,t)}(e.writeTree,kS(e.treePath,t))}function vA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=tA(e.visibleWrites,t),c=ZC(u,hS());if(null!=c)s=c;else{if(null==n)return[];s=rA(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function yA(e,t,n){return function(e,t,n,r){var i=kS(t,n),a=ZC(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?rA(tA(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function mA(e,t){return gA(kS(e.treePath,t),e.writeTree)}function gA(e,t){return{treePath:e,writeTree:t}}var kA=function(){function e(){s(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ci("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ci(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,vC(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,pC(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,dC(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ai("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,vC(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),bA=new(function(){function e(){s(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),_A=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new jC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:HC(this.viewCache_),i=vA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function wA(e,t,n,r,i){var a,o,s=new kA;if(n.type===CC.OVERWRITE){var u=n;u.source.fromUser?a=TA(e,t,u.path,u.snap,r,i,s):(Ci(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!bS(u.path),a=xA(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===CC.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=kS(n,r);SA(t,dS(c))&&(s=TA(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=kS(n,r);SA(t,dS(c))||(s=TA(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ci(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=AA(e,t,c.path,c.children,r,i,o,s))}else if(n.type===CC.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=pA(r,n))return t;var s,u=new _A(r,t,i),c=t.eventCache.getNode();if(bS(n)||".priority"===dS(n)){var l;if(t.serverCache.isFullyInitialized())l=fA(r,HC(t));else{var f=t.serverCache.getNode();Ci(f instanceof aC,"serverChildren would be complete if leaf node"),l=hA(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=dS(n),d=yA(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,vS(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,aC.EMPTY_NODE,vS(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=fA(r,HC(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=pA(r,hS()),zC(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=pA(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(bS(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xA(e,t,n,u.getNode().getChild(n),i,a,s,o);if(bS(n)){var c=new QC(null);return u.getNode().forEachChild(MS,(function(e,t){c=c.set(new fS(e),t)})),AA(e,t,n,c,i,a,s,o)}return t}var l=new QC(null);return r.foreach((function(e,t){var r=kS(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),AA(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==CC.LISTEN_COMPLETE)throw Ai("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=qC(t,a.getNode(),a.isFullyInitialized()||bS(n),a.isFiltered());return EA(e,o,n,r,bA,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=WC(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(hC(WC(t)))}}(t,a,f),{viewCache:a,changes:f}}function EA(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=pA(r,n))return t;if(bS(n))if(Ci(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=HC(t),l=hA(r,c instanceof aC?c:aC.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=fA(r,HC(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=dS(n);if(".priority"===h){Ci(1===pS(n),"Can't have a priority with additional path components");var d=u.getNode(),p=dA(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=vS(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var m=dA(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(h).updateChild(y,m):u.getNode().getImmediateChild(h)}else v=yA(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,y,i,a):u.getNode()}}return zC(t,o,u.isFullyInitialized()||bS(n),e.filter.filtersNodes())}function xA(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(bS(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=dS(n);if(!c.isCompleteForPath(n)&&pS(n)>1)return t;var d=vS(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,bA,null)}var v=qC(t,u,c.isFullyInitialized()||bS(n),l.filtersNodes());return EA(e,v,n,i,new _A(i,v,a),s)}function TA(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new _A(i,t,a);if(bS(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=zC(t,u,!0,e.filter.filtersNodes());else{var f=dS(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=zC(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=vS(n),p=c.getNode().getImmediateChild(f);if(bS(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===yS(d)&&v.getChild(gS(d)).isEmpty()?v:v.updateChild(d,r):aC.EMPTY_NODE}if(p.equals(h))s=t;else s=zC(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function SA(e,t){return e.eventCache.isCompleteForChild(t)}function CA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function AA(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=bS(n)?r:new QC(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=CA(0,t.serverCache.getNode().getImmediateChild(n),r);c=xA(e,c,new fS(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var f=CA(0,t.serverCache.getNode().getImmediateChild(n),r);c=xA(e,c,new fS(n),f,i,a,o,s)}})),c}var IA,NA=function(){function e(t,n){s(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new yC(i.getIndex()),o=(r=i).loadsAllData()?new yC(r.getIndex()):r.hasLimit()?new gC(r):new mC(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,c=n.eventCache,l=a.updateFullNode(aC.EMPTY_NODE,u.getNode(),null),f=o.updateFullNode(aC.EMPTY_NODE,c.getNode(),null),h=new jC(l,u.isFullyInitialized(),a.filtersNodes()),d=new jC(f,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=VC(d,h),this.eventGenerator_=new UC(this.query_)}return f(e,[{key:"query",get:function(){return this.query_}}]),e}();function RA(e,t){var n=HC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bS(t)&&!n.getImmediateChild(dS(t)).isEmpty())?n.getChild(t):null}function OA(e){return 0===e.eventRegistrations_.length}function PA(e,t,n){var r=[];if(n){Ci(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function DA(e,t,n,r){t.type===CC.MERGE&&null!==t.source.queryId&&(Ci(HC(e.viewCache_),"We should always have a full cache before handling merges"),Ci(WC(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=wA(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ci(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ci(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ci(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,LA(e,s.changes,s.viewCache.eventCache.getNode(),null)}function LA(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),BC(e,i,"child_removed",t,r,n),BC(e,i,"child_added",t,r,n),BC(e,i,"child_moved",a,r,n),BC(e,i,"child_changed",t,r,n),BC(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var MA,FA=f((function e(){s(this,e),this.views=new Map}));function jA(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ci(null!=a,"SyncTree gave us an op for an invalid query."),DA(a,t,n,r)}var o,s=[],u=C(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(DA(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function UA(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=fA(n,i?r:null),u=!1;s?u=!0:r instanceof aC?(s=hA(n,r),u=!1):(s=aC.EMPTY_NODE,u=!1);var c=VC(new jC(s,u,!1),new jC(r,i,!1));return new NA(t,c)}return o}function BA(e,t,n,r,i,a){var o=UA(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ZS,(function(e,t){r.push(dC(e,t))})),n.isFullyInitialized()&&r.push(hC(n.getNode())),LA(e,r,n.getNode(),t)}(o,n)}function VA(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=KA(e);if("default"===i){var u,c=C(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=b(u.value,2),f=l[0],h=l[1];o=o.concat(PA(h,n,r)),OA(h)&&(e.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(PA(d,n,r)),OA(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return s&&!KA(e)&&a.push(new(Ci(IA,"Reference.ts has not been loaded"),IA)(t._repo,t._path)),{removed:a,events:o}}function zA(e){var t,n=[],r=C(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function qA(e,t){var n,r=null,i=C(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||RA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function WA(e,t){if(t._queryParams.loadsAllData())return QA(e);var n=t._queryIdentifier;return e.views.get(n)}function HA(e,t){return null!=WA(e,t)}function KA(e){return null!=QA(e)}function QA(e){var t,n=C(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var GA=1,YA=f((function e(t){s(this,e),this.listenProvider_=t,this.syncPointTree_=new QC(null),this.pendingWriteTree_={visibleWrites:GC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function XA(e,t,n,r,i){return function(e,t,n,r,i){Ci(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=YC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?iI(e,new MC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function JA(e,t,n,r){!function(e,t,n,r){Ci(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=XC(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=QC.fromObject(n);return iI(e,new FC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function $A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(oA(e.pendingWriteTree_,t)){var i=new QC(null);return null!=r.snap?i=i.set(hS(),!0):AT(r.children,(function(e){i=i.set(new fS(e),!0)})),iI(e,new DC(r.path,i,n))}return[]}function ZA(e,t,n){return iI(e,new MC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function eI(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||HA(o,t))){var u=VA(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return KA(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&KA(t))return[QA(t)];var r=[];return t&&(r=zA(t)),AT(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=sI(e,v);e.listenProvider_.startListening(dI(y),uI(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(dI(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(cI(t));e.listenProvider_.stopListening(dI(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=cI(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function tI(e,t,n,r){var i=lI(e,r);if(null!=i){var a=fI(i),o=a.path,s=a.queryId,u=_S(o,t);return hI(e,o,new MC(OC(s),u,n))}return[]}function nI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=_S(e,i);a=a||qA(t,n),o=o||KA(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||KA(u),a=a||qA(u,hS())):(u=new FA,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=aC.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=qA(t,hS());n&&(a=a.updateImmediateChild(e,n))})));var c=HA(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=cI(t);Ci(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=GA++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=BA(u,t,n,aA(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var d=WA(u,t);h=h.concat(function(e,t,n){var r=t._path,i=uI(e,t),a=sI(e,n),o=e.listenProvider_.startListening(dI(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ci(!KA(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!bS(e)&&t&&KA(t))return[QA(t).query];var r=[];return t&&(r=r.concat(zA(t).map((function(e){return e.query})))),AT(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(dI(l),uI(e,l))}return o}(e,t,d))}return h}function rI(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=qA(n,_S(e,t));if(r)return r}));return lA(r,t,i,n,!0)}function iI(e,t){return aI(t,e.syncPointTree_,null,aA(e.pendingWriteTree_,hS()))}function aI(e,t,n,r){if(bS(e.path))return oI(e,t,n,r);var i=t.get(hS());null==n&&null!=i&&(n=qA(i,hS()));var a=[],o=dS(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=mA(r,o);a=a.concat(aI(s,u,c,l))}return i&&(a=a.concat(jA(i,e,r,n))),a}function oI(e,t,n,r){var i=t.get(hS());null==n&&null!=i&&(n=qA(i,hS()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=mA(r,t),u=e.operationForChild(t);u&&(a=a.concat(oI(u,i,o,s)))})),i&&(a=a.concat(jA(i,e,r,n))),a}function sI(e,t){var n=t.query,r=uI(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||aC.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=lI(e,n);if(r){var i=fI(r),a=i.path,o=i.queryId,s=_S(a,t);return hI(e,a,new LC(OC(o),s))}return[]}(e,n._path,r):function(e,t){return iI(e,new LC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return eI(e,n,null,i)}}}function uI(e,t){var n=cI(t);return e.queryToTagMap.get(n)}function cI(e){return e._path.toString()+"$"+e._queryIdentifier}function lI(e,t){return e.tagToQueryMap.get(t)}function fI(e){var t=e.indexOf("$");return Ci(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fS(e.substr(0,t))}}function hI(e,t,n){var r=e.syncPointTree_.get(t);return Ci(r,"Missing sync point for query tag that we're tracking"),jA(r,n,aA(e.pendingWriteTree_,t),null)}function dI(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ci(MA,"Reference.ts has not been loaded"),MA)(e._repo,e._path):e}var pI=function(){function e(t){s(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),vI=function(){function e(t,n){s(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=kS(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return rI(this.syncTree_,this.path_)}}]),e}(),yI=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},mI=function(e,t,n){return e&&"object"===typeof e?(Ci(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?gI(e[".sv"],t,n):"object"===typeof e[".sv"]?kI(e[".sv"],t):void Ci(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gI=function(e,t,n){if("timestamp"===e)return n.timestamp;Ci(!1,"Unexpected server value: "+e)},kI=function(e,t,n){e.hasOwnProperty("increment")||Ci(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ci(!1,"Unexpected increment value: "+r);var i=t.node();if(Ci(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},bI=function(e,t,n,r){return wI(t,new vI(n,e),r)},_I=function(e,t,n){return wI(e,new pI(t),n)};function wI(e,t,n){var r,i=e.getPriority().val(),a=mI(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=mI(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new YS(s,uC(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new YS(a))),u.forEachChild(ZS,(function(e,i){var a=wI(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var EI=f((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};s(this,e),this.name=t,this.parent=n,this.node=r}));function xI(e,t){for(var n=t instanceof fS?t:new fS(t),r=e,i=dS(n);null!==i;){var a=ia(r.node.children,i)||{children:{},childCount:0};r=new EI(i,r,a),i=dS(n=vS(n))}return r}function TI(e){return e.node.value}function SI(e,t){e.node.value=t,RI(e)}function CI(e){return e.node.childCount>0}function AI(e,t){AT(e.node.children,(function(n,r){t(new EI(n,e,r))}))}function II(e,t,n,r){n&&!r&&t(e),AI(e,(function(e){II(e,t,!0,r)})),n&&r&&t(e)}function NI(e){return new fS(null===e.parent?e.name:NI(e.parent)+"/"+e.name)}function RI(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===TI(e)&&!CI(e)}(n),i=ra(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,RI(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,RI(e))}(e.parent,e.name,e)}var OI=/[\[\].#$\/\u0000-\u001F\u007F]/,PI=/[\[\].#$\u0000-\u001F\u007F]/,DI=10485760,LI=function(e){return"string"===typeof e&&0!==e.length&&!OI.test(e)},MI=function(e){return"string"===typeof e&&0!==e.length&&!PI.test(e)},FI=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!bT(e)||e&&"object"===typeof e&&ra(e,".sv")},jI=function(e,t,n,r){r&&void 0===t||UI(va(e,"value"),t,n)},UI=function e(t,n,r){var i=r instanceof fS?new TS(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+CS(i));if("function"===typeof n)throw new Error(t+"contains a function "+CS(i)+" with contents = "+n.toString());if(bT(n))throw new Error(t+"contains "+n.toString()+" "+CS(i));if("string"===typeof n&&n.length>DI/3&&ya(n)>DI)throw new Error(t+"contains a string greater than "+DI+" utf8 bytes "+CS(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(AT(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!LI(n)))throw new Error(t+" contains an invalid key ("+n+") "+CS(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ya(t),SS(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ya(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+CS(i)+" in addition to actual children.")}},BI=function(e,t,n,r){if(!r||void 0!==t){var i=va(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];AT(t,(function(e,t){var r=new fS(e);if(UI(i,t,kS(n,r)),".priority"===yS(r)&&!FI(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=mS(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!LI(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(wS);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&xS(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},VI=function(e,t,n,r){if((!r||void 0!==n)&&!MI(n))throw new Error(va(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zI=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),VI(e,t,n,r)},qI=function(e,t){if(".info"===dS(t))throw new Error(e+" failed = Can't modify data under /.info/")},WI=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!LI(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),MI(e)}(n))throw new Error(va(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},HI=f((function e(){s(this,e),this.eventLists_=[],this.recursionDepth_=0}));function KI(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||ES(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function QI(e,t,n){KI(e,n),YI(e,(function(e){return ES(e,t)}))}function GI(e,t,n){KI(e,n),YI(e,(function(e){return xS(e,t)||xS(t,e)}))}function YI(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(XI(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function XI(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();hT&&vT("event: "+n.toString()),OT(r)}}}var JI="repo_interrupt",$I=25,ZI=function(){function e(t,n,r,i){s(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xC(),this.transactionQueueTree_=new EI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function eN(e,t,n){if(e.stats_=GT(e.repoInfo_),e.forceRestClient_||PT())e.server_=new wC(e.repoInfo_,(function(t,n,r,i){rN(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return iN(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ta(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new RS(e.repoInfo_,t,(function(t,n,r,i){rN(e,t,n,r,i)}),(function(t){iN(e,t)}),(function(t){!function(e,t){AT(t,(function(t,n){aN(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return QT[n]||(QT[n]=t()),QT[n]}(e.repoInfo_,(function(){return new RC(e.stats_,e.server_)})),e.infoData_=new EC,e.infoSyncTree_=new YA({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=ZA(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),aN(e,"connected",!1),e.serverSyncTree_=new YA({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);GI(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function tN(e){var t=e.infoData_.getNode(new fS(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function nN(e){return yI({timestamp:tN(e)})}function rN(e,t,n,r,i){e.dataUpdateCount++;var a=new fS(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=oa(n,(function(e){return uC(e)}));o=function(e,t,n,r){var i=lI(e,r);if(i){var a=fI(i),o=a.path,s=a.queryId,u=_S(o,t),c=QC.fromObject(n);return hI(e,o,new FC(OC(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=uC(n);o=tI(e.serverSyncTree_,a,u,i)}else if(r){var c=oa(n,(function(e){return uC(e)}));o=function(e,t,n){var r=QC.fromObject(n);return iI(e,new FC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=uC(n);o=ZA(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=pN(e,a)),GI(e.eventQueue_,f,o)}function iN(e,t){aN(e,"connected",t),!1===t&&function(e){lN(e,"onDisconnectEvents");var t=nN(e),n=xC();SC(e.onDisconnect_,hS(),(function(r,i){var a=bI(r,i,e.serverSyncTree_,t);TC(n,r,a)}));var r=[];SC(n,hS(),(function(t,n){r=r.concat(ZA(e.serverSyncTree_,t,n));var i=kN(e,t);pN(e,i)})),e.onDisconnect_=xC(),GI(e.eventQueue_,hS(),r)}(e)}function aN(e,t,n){var r=new fS("/.info/"+t),i=uC(n);e.infoData_.updateSnapshot(r,i);var a=ZA(e.infoSyncTree_,r,i);GI(e.eventQueue_,r,a)}function oN(e){return e.nextWriteId_++}function sN(e,t,n,r,i){lN(e,"set",{path:t.toString(),value:n,priority:r});var a=nN(e),o=uC(n,r),s=rI(e.serverSyncTree_,t),u=_I(o,s,a),c=oN(e),l=XA(e.serverSyncTree_,t,u,c,!0);KI(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||kT("set at "+t+" failed: "+n);var o=$A(e.serverSyncTree_,c,!a);GI(e.eventQueue_,t,o),fN(e,i,n,r)}));var f=kN(e,t);pN(e,f),GI(e.eventQueue_,f,[])}function uN(e,t,n){var r;r=".info"===dS(t._path)?eI(e.infoSyncTree_,t,n):eI(e.serverSyncTree_,t,n),QI(e.eventQueue_,t._path,r)}function cN(e){e.persistentConnection_&&e.persistentConnection_.interrupt(JI)}function lN(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];vT.apply(void 0,[t].concat(r))}function fN(e,t,n,r){t&&OT((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function hN(e,t,n){return rI(e.serverSyncTree_,t,n)||aC.EMPTY_NODE}function dN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||gN(e,t),TI(t)){var n=yN(e,t);Ci(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=hN(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ci(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=_S(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){lN(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat($A(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);gN(e,xI(e.transactionQueueTree_,t)),dN(e,e.transactionQueueTree_),GI(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)OT(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{kT("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}pN(e,t)}}),o)}(e,NI(t),n)}else CI(t)&&AI(t,(function(t){dN(e,t)}))}function pN(e,t){var n=vN(e,t),r=NI(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=_S(n,c.path),f=!1;if(Ci(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,s=c.abortReason,i=i.concat($A(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=$I)f=!0,s="maxretry",i=i.concat($A(e.serverSyncTree_,c.currentWriteId,!0));else{var h=hN(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){UI("transaction failed: Data returned ",d,c.path);var p=uC(d);"object"===typeof d&&null!=d&&ra(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=nN(e),m=_I(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=oN(e),o.splice(o.indexOf(v),1),i=(i=i.concat(XA(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat($A(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat($A(e.serverSyncTree_,c.currentWriteId,!0))}GI(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);gN(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)OT(r[c]);dN(e,e.transactionQueueTree_)}(e,yN(e,n),r),r}function vN(e,t){var n,r=e.transactionQueueTree_;for(n=dS(t);null!==n&&void 0===TI(r);)r=xI(r,n),n=dS(t=vS(t));return r}function yN(e,t){var n=[];return mN(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function mN(e,t,n){var r=TI(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);AI(t,(function(t){mN(e,t,n)}))}function gN(e,t){var n=TI(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,SI(t,n.length>0?n:void 0)}AI(t,(function(t){gN(e,t)}))}function kN(e,t){var n=NI(vN(e,t)),r=xI(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){bN(e,t)})),bN(e,r),II(r,(function(t){bN(e,t)})),n}function bN(e,t){var n=TI(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ci(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ci(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat($A(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?SI(t,void 0):n.length=a+1,GI(e.eventQueue_,NI(t),i);for(var s=0;s<r.length;s++)OT(r[s])}}var _N=function(e,t){var n=wN(e),r=n.namespace;"firebase.com"===n.domain&&gT(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||gT("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&kT("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new qT(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new fS(n.pathString)}},wN=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=C(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):kT("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},EN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xN=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=EN.charAt(n%64),n=Math.floor(n/64);Ci(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=EN.charAt(t[r]);return Ci(20===o.length,"nextPushId: Length should be 20."),o}}(),TN=function(){function e(t,n,r,i){s(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return f(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ta(this.snapshot.exportVal())}}]),e}(),SN=function(){function e(t,n,r){s(this,e),this.eventRegistration=t,this.error=n,this.path=r}return f(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),CN=function(){function e(t,n){s(this,e),this.snapshotCallback=t,this.cancelCallback=n}return f(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ci(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),AN=function(){function e(t,n,r,i){s(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return bS(this._path)?null:yS(this._path)}},{key:"ref",get:function(){return new IN(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=_C(this._queryParams),t=ST(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return _C(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ma(t))instanceof e))return!1;var n=this._repo===t._repo,r=ES(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var IN=function(e){d(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,r,new kC,!1)}return f(n,[{key:"parent",get:function(){var e=gS(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(AN),NN=function(){function e(t,n,r){s(this,e),this._node=t,this.ref=n,this._index=r}return f(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new fS(t),r=ON(this.ref,t);return new e(this._node.getChild(n),r,ZS)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,ON(n.ref,r),ZS))}))}},{key:"hasChild",value:function(e){var t=new fS(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function RN(e,t){return(e=ma(e))._checkNotDeleted("ref"),void 0!==t?ON(e._root,t):e._root}function ON(e,t){return null===dS((e=ma(e))._path)?zI("child","path",t,!1):VI("child","path",t,!1),new IN(e._repo,kS(e._path,t))}function PN(e,t){e=ma(e),qI("push",e._path),jI("push",t,e._path,!0);var n,r=tN(e._repo),i=xN(r),a=ON(e,i),o=ON(e,i);return n=null!=t?LN(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function DN(e){return qI("remove",e._path),LN(e,null)}function LN(e,t){e=ma(e),qI("set",e._path),jI("set",t,e._path,!1);var n=new zi;return sN(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function MN(e,t){BI("update",t,e._path,!1);var n=new zi;return function(e,t,n,r){lN(e,"update",{path:t.toString(),value:n});var i=!0,a=nN(e),o={};if(AT(n,(function(n,r){i=!1,o[n]=bI(kS(t,n),uC(r),e.serverSyncTree_,a)})),i)vT("update() called with empty data.  Don't do anything."),fN(0,r,"ok",void 0);else{var s=oN(e),u=JA(e.serverSyncTree_,t,o,s);KI(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||kT("update at "+t+" failed: "+n);var o=$A(e.serverSyncTree_,s,!a),u=o.length>0?pN(e,t):t;GI(e.eventQueue_,u,o),fN(0,r,n,i)})),AT(n,(function(n){var r=kN(e,kS(t,n));pN(e,r)})),GI(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}var FN=function(){function e(t){s(this,e),this.callbackContext=t}return f(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new TN("value",this,new NN(e.snapshotNode,new IN(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new SN(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),jN=function(){function e(t,n){s(this,e),this.eventType=t,this.callbackContext=n}return f(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new SN(this,e,t):null}},{key:"createEvent",value:function(e,t){Ci(null!=e.childName,"Child events should have a childName.");var n=ON(new IN(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new TN(e.type,this,new NN(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function UN(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){uN(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new CN(n,a||void 0),c="value"===t?new FN(u):new jN(t,u);return function(e,t,n){var r;r=".info"===dS(t._path)?nI(e.infoSyncTree_,t,n):nI(e.serverSyncTree_,t,n),QI(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return uN(e._repo,e,c)}}function BN(e,t,n,r){return UN(e,"value",t,n,r)}!function(e){Ci(!IA,"__referenceConstructor has already been defined"),IA=e}(IN),function(e){Ci(!MA,"__referenceConstructor has already been defined"),MA=e}(IN);var VN="FIREBASE_DATABASE_EMULATOR_HOST",zN={},qN=!1;function WN(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||gT("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vT("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=_N(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/bookShelf",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBdYLyrEZ-laggH8VLBm5CyF2AgWYw_SJ4",REACT_APP_FIREBASE_APP_ID:"1:857447729693:web:bc8a31bf38c47efc9354f4",REACT_APP_FIREBASE_AUTH_DOMAIN:"bookshelf-3479c.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://bookshelf-3479c-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"857447729693",REACT_APP_FIREBASE_PROJECT_ID:"bookshelf-3479c",REACT_APP_FIREBASE_STORAGE_BUCKET:"bookshelf-3479c.appspot.com"}[VN]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=_N(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new FT(FT.OWNER):new MT(e.name,e.options,t);WI("Invalid Firebase Database URL",s),bS(s.path)||gT("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=zN[t.name];i||(i={},zN[t.name]=i);var a=i[e.toURLString()];a&&gT("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ZI(e,qN,n,r),i[e.toURLString()]=a,a}(u,e,l,new LT(e.name,n));return new HN(f,e)}var HN=function(){function e(t,n){s(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(eN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new IN(this._repo,hS())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=zN[t];n&&n[e.key]===e||gT("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),cN(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&gT("Cannot call "+e+" on a deleted database.")}}]),e}();function KN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ma(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&gT("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gT('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new FT(FT.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:qi(r.mockUserToken,e.app.options.projectId);a=new FT(o)}!function(e,t,n,r){e.repoInfo_=new qT("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}var QN={".sv":"timestamp"};function GN(){return QN}RS.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},RS.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){nT=e}(co),io(new ga("database",(function(e,t){var n=t.instanceIdentifier;return WN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ho(eT,tT,e),ho(eT,tT,"esm2017")}();var YN=lo({apiKey:"AIzaSyBdYLyrEZ-laggH8VLBm5CyF2AgWYw_SJ4",authDomain:"bookshelf-3479c.firebaseapp.com",projectId:"bookshelf-3479c",storageBucket:"bookshelf-3479c.appspot.com",messagingSenderId:"857447729693",appId:"1:857447729693:web:bc8a31bf38c47efc9354f4",databaseURL:"https://bookshelf-3479c-default-rtdb.europe-west1.firebasedatabase.app"}),XN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo(),t=ao(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=ao(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(sa(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Zb(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Wx,persistence:[jE,hE,pE]}),r=Vi("authTokenSyncURL");if(r){var i=Zx(r);!function(e,t,n){ma(e).beforeAuthStateChanged(t,n)}(n,i,(function(){return i(n.currentUser)})),function(e,t,n,r){ma(e).onIdTokenChanged(t,n,r)}(n,(function(e){return i(e)}))}var a=ji("auth");return a&&vw(n,"http://".concat(a)),n}(YN),JN=function(e,t){var n="string"==typeof e?e:t||"(default)",r=ao("object"==typeof e?e:fo(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=Ui("firestore");i&&qm.apply(void 0,[r].concat(o(i)))}return r}(YN),$N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo(),t=arguments.length>1?arguments[1]:void 0,n=ao(e=ma(e),Vb).getImmediate({identifier:t}),r=Ui("storage");return r&&Wb.apply(void 0,[n].concat(o(r))),n}(YN),ZN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo(),t=arguments.length>1?arguments[1]:void 0,n=ao(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=Ui("database");r&&KN.apply(void 0,[n].concat(o(r)))}return n}(),eR=_i("user/fetchSeesBooksEveryone",E(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Qg(Qm(JN,"books-sees-everyone"),Yg("seesEveryone","==",!0)),e.next=4,ck(t);case 4:return n=e.sent,r=n.docs.map((function(e){return Lr({},e.data())})),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),tR=vi({name:"main",initialState:{visibleAddingBookForm:!1,visibleMenu:!0,isOpenSearchMenu:!1,visibleMessageForm:!1,search:"",currentBook:{},booksSeesEveryone:[],isOpenChatList:!1},reducers:{setVisibleAddingBookForm:function(e,t){e.visibleAddingBookForm=t.payload},setVisibleMessageForm:function(e,t){e.visibleMessageForm=t.payload},setVisibleMenu:function(e,t){e.visibleMenu=t.payload},setSearch:function(e,t){e.search=t.payload},setCurrentBook:function(e,t){e.currentBook=t.payload},setOpenSearchMenu:function(e,t){e.isOpenSearchMenu=t.payload},setVisibleChatList:function(e,t){e.isOpenChatList=t.payload}},extraReducers:function(e){e.addCase(eR.fulfilled,(function(e,t){e.booksSeesEveryone=t.payload}))}}),nR=tR.actions,rR=nR.setVisibleAddingBookForm,iR=nR.setVisibleMessageForm,aR=nR.setSearch,oR=nR.setCurrentBook,sR=nR.setVisibleMenu,uR=nR.setOpenSearchMenu,cR=nR.setVisibleChatList,lR=tR.reducer,fR=_i("user/fetchChats",function(){var e=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.dispatch,e.prev=1,BN(RN(ZN,"users/".concat(t,"/chats/")),(function(e){var t=e.val();r(tO(null!==t?Object.values(t):[]))})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),hR=_i("user/fetchDataLibrary",function(){var e=E(_().mark((function e(t,n){var r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.prev=1,e.next=4,ck(Qm(JN,"books-user-".concat(t)));case 4:return i=e.sent,a=i.docs.map((function(e){return Lr(Lr({},e.data()),{},{id:e.id})})),r(fR(t)),e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),dR=_i("user/fetchFavoriteBooks",function(){var e=E(_().mark((function e(t){var n,r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Qg(Qm(JN,"books-user-".concat(t.id)),Yg("favorite","==",!0)),e.next=4,ck(n);case 4:return r=e.sent,i=r.docs.map((function(e){return Lr(Lr({},e.data()),{},{id:e.id})})),e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),pR=_i("user/uploadBook",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l,f,h,d,p,v,y;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,i=t.user,a=t.navigate,o=n.dispatch,s=n.rejectWithValue,e.prev=2,u={contentType:"image/jpeg"},m=$N,g="images/"+r.cover.name,c=Mb(m=ma(m),g),l=zb(c,r.cover,u),e.next=8,new Promise((function(e,t){l.on("state_changed",null,t,e)}));case 8:return e.next=10,qb(l.snapshot.ref);case 10:if(f=e.sent,h={userId:i.id,userEmail:i.email,title:r.title,description:r.description,cover:f,favorite:!1,seesEveryone:r.seesEveryone,usersWhoLikesBook:[],usersWhoUnlikesBook:[],usersWhoSendMessage:[],rating:0},!r.seesEveryone){e.next=27;break}return d=Qm(JN,"books-user-".concat(i.id)),p=Qm(JN,"books-sees-everyone"),e.next=17,dk(p,h);case 17:return v=e.sent,e.next=20,dk(d,Lr(Lr({},h),{},{booksEveryoneCollectionID:v.id}));case 20:return y=e.sent,e.next=23,lk(Gm(JN,"books-sees-everyone","".concat(v.id)),{id:y.id,booksEveryoneCollectionID:v.id},{merge:!0});case 23:o(eR()),a("/book-shelf/all-books"),e.next=30;break;case 27:return e.next=29,dk(Qm(JN,"books-user-".concat(i.id)),h);case 29:a("/book-shelf/all-books");case 30:return e.abrupt("return",h);case 33:return e.prev=33,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",s("Invalid uploading. Try again later."));case 37:case"end":return e.stop()}var m,g}),e,null,[[2,33]])})));return function(t,n){return e.apply(this,arguments)}}());function vR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yR(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=yR(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var mR=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=yR(e))&&(r&&(r+=" "),r+=t);return r},gR=["theme","type"],kR=["delay","staleId"],bR=function(e){return"number"==typeof e&&!isNaN(e)},_R=function(e){return"string"==typeof e},wR=function(e){return"function"==typeof e},ER=function(e){return _R(e)||wR(e)?e:null},xR=function(e){return(0,nt.isValidElement)(e)||_R(e)||wR(e)||bR(e)};function TR(e){var t=e.enter,n=e.exit,r=e.appendPosition,i=void 0!==r&&r,a=e.collapse,s=void 0===a||a,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var r=e.children,a=e.position,u=e.preventExitTransition,l=e.done,f=e.nodeRef,h=e.isIn,d=i?"".concat(t,"--").concat(a):t,p=i?"".concat(n,"--").concat(a):n,v=(0,nt.useRef)(0);return(0,nt.useLayoutEffect)((function(){var e,t=f.current,n=d.split(" "),r=function e(r){var i;r.target===f.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===v.current&&"animationcancel"!==r.type&&(i=t.classList).remove.apply(i,o(n)))};(e=t.classList).add.apply(e,o(n)),t.addEventListener("animationend",r),t.addEventListener("animationcancel",r)}),[]),(0,nt.useEffect)((function(){var e=f.current,t=function t(){e.removeEventListener("animationend",t),s?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()};h||(u?t():(v.current=1,e.className+=" ".concat(p),e.addEventListener("animationend",t)))}),[h]),nt.createElement(nt.Fragment,null,r)}}function SR(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var CR={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,o([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},AR=function(e){var t=e.theme,n=e.type,r=vR(e,gR);return nt.createElement("svg",Lr({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},r))},IR={info:function(e){return nt.createElement(AR,Lr({},e),nt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return nt.createElement(AR,Lr({},e),nt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return nt.createElement(AR,Lr({},e),nt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return nt.createElement(AR,Lr({},e),nt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return nt.createElement("div",{className:"Toastify__spinner"})}};function NR(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function RR(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function OR(e){var t=e.closeToast,n=e.theme,r=e.ariaLabel,i=void 0===r?"close":r;return nt.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":i},nt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},nt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function PR(e){var t=e.delay,n=e.isRunning,r=e.closeToast,i=e.type,a=void 0===i?"default":i,o=e.hide,s=e.className,u=e.style,c=e.controlledProgress,l=e.progress,f=e.rtl,h=e.isIn,d=e.theme,p=o||c&&0===l,v=Lr(Lr({},u),{},{animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:p?0:1});c&&(v.transform="scaleX(".concat(l,")"));var y=mR("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(d),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":f}),m=wR(s)?s({rtl:f,type:a,defaultClassName:y}):mR(y,s);return nt.createElement("div",x({role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:m,style:v},c&&l>=1?"onTransitionEnd":"onAnimationEnd",c&&l<1?null:function(){h&&r()}))}var DR=function(e){var t=function(e){var t=b((0,nt.useState)(!1),2),n=t[0],r=t[1],i=b((0,nt.useState)(!1),2),a=i[0],o=i[1],s=(0,nt.useRef)(null),u=(0,nt.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,nt.useRef)(e),l=e.autoClose,f=e.pauseOnHover,h=e.closeToast,d=e.onClick,p=e.closeOnClick;function v(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),u.didMove=!1,document.addEventListener("mousemove",k),document.addEventListener("mouseup",_),document.addEventListener("touchmove",k),document.addEventListener("touchend",_);var n=s.current;u.canCloseOnClick=!0,u.canDrag=!0,u.boundingRect=n.getBoundingClientRect(),n.style.transition="",u.x=NR(t.nativeEvent),u.y=RR(t.nativeEvent),"x"===e.draggableDirection?(u.start=u.x,u.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(u.start=u.y,u.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function y(t){if(u.boundingRect){var n=u.boundingRect,r=n.top,i=n.bottom,a=n.left,o=n.right;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&u.x>=a&&u.x<=o&&u.y>=r&&u.y<=i?g():m()}}function m(){r(!0)}function g(){r(!1)}function k(t){var r=s.current;u.canDrag&&r&&(u.didMove=!0,n&&g(),u.x=NR(t),u.y=RR(t),u.delta="x"===e.draggableDirection?u.x-u.start:u.y-u.start,u.start!==u.x&&(u.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(u.delta,"px)"),r.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance)))}function _(){document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",_),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",_);var t=s.current;if(u.canDrag&&u.didMove&&t){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,nt.useEffect)((function(){c.current=e})),(0,nt.useEffect)((function(){return s.current&&s.current.addEventListener("d",m,{once:!0}),wR(e.onOpen)&&e.onOpen((0,nt.isValidElement)(e.children)&&e.children.props),function(){var e=c.current;wR(e.onClose)&&e.onClose((0,nt.isValidElement)(e.children)&&e.children.props)}}),[]),(0,nt.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||g(),window.addEventListener("focus",m),window.addEventListener("blur",g)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",m),window.removeEventListener("blur",g))}}),[e.pauseOnFocusLoss]);var w={onMouseDown:v,onTouchStart:v,onMouseUp:y,onTouchEnd:y};return l&&f&&(w.onMouseEnter=g,w.onMouseLeave=m),p&&(w.onClick=function(e){d&&d(e),u.canCloseOnClick&&h()}),{playToast:m,pauseToast:g,isRunning:n,preventExitTransition:a,toastRef:s,eventHandlers:w}}(e),n=t.isRunning,r=t.preventExitTransition,i=t.toastRef,a=t.eventHandlers,o=e.closeButton,s=e.children,u=e.autoClose,c=e.onClick,l=e.type,f=e.hideProgressBar,h=e.closeToast,d=e.transition,p=e.position,v=e.className,y=e.style,m=e.bodyClassName,g=e.bodyStyle,k=e.progressClassName,_=e.progressStyle,w=e.updateId,E=e.role,x=e.progress,T=e.rtl,S=e.toastId,C=e.deleteToast,A=e.isIn,I=e.isLoading,N=e.iconOut,R=e.closeOnClick,O=e.theme,P=mR("Toastify__toast","Toastify__toast-theme--".concat(O),"Toastify__toast--".concat(l),{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":R}),D=wR(v)?v({rtl:T,position:p,type:l,defaultClassName:P}):mR(P,v),L=!!x||!u,M={closeToast:h,type:l,theme:O},F=null;return!1===o||(F=wR(o)?o(M):(0,nt.isValidElement)(o)?(0,nt.cloneElement)(o,M):OR(M)),nt.createElement(d,{isIn:A,done:C,position:p,preventExitTransition:r,nodeRef:i},nt.createElement("div",Lr(Lr({id:S,onClick:c,className:D},a),{},{style:y,ref:i}),nt.createElement("div",Lr(Lr({},A&&{role:E}),{},{className:wR(m)?m({type:l}):mR("Toastify__toast-body",m),style:g}),null!=N&&nt.createElement("div",{className:mR("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},N),nt.createElement("div",null,s)),F,nt.createElement(PR,Lr(Lr({},w&&!L?{key:"pb-".concat(w)}:{}),{},{rtl:T,theme:O,delay:u,isRunning:n,isIn:A,closeToast:h,hide:f,type:l,style:_,className:k,controlledProgress:L,progress:x||0}))))},LR=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},MR=TR(LR("bounce",!0)),FR=(TR(LR("slide",!0)),TR(LR("zoom")),TR(LR("flip")),(0,nt.forwardRef)((function(e,t){var n=function(e){var t=(0,nt.useReducer)((function(e){return e+1}),0),n=b(t,2)[1],r=b((0,nt.useState)([]),2),i=r[0],a=r[1],s=(0,nt.useRef)(null),u=(0,nt.useRef)(new Map).current,c=function(e){return-1!==i.indexOf(e)},l=(0,nt.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:function(e){return u.get(e)}}).current;function f(e){var t=e.containerId;!l.props.limit||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function h(e){a((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function d(){var e=l.queue.shift();v(e.toastContent,e.toastProps,e.staleId)}function p(e,t){var r=t.delay,i=t.staleId,a=vR(t,kR);if(xR(e)&&!function(e){return!s.current||l.props.enableMultiContainer&&e.containerId!==l.props.containerId||u.has(e.toastId)&&null==e.updateId}(a)){var o=a.toastId,c=a.updateId,f=a.data,p=l.props,y=function(){return h(o)},m=null==c;m&&l.count++;var g,k,b=Lr(Lr(Lr({},p),{},{style:p.toastStyle,key:l.toastKey++},a),{},{toastId:o,updateId:c,data:f,closeToast:y,isIn:!1,className:ER(a.className||p.toastClassName),bodyClassName:ER(a.bodyClassName||p.bodyClassName),progressClassName:ER(a.progressClassName||p.progressClassName),autoClose:!a.isLoading&&(g=a.autoClose,k=p.autoClose,!1===g||bR(g)&&g>0?g:k),deleteToast:function(){var e=SR(u.get(o),"removed");u.delete(o),CR.emit(4,e);var t=l.queue.length;if(l.count=null==o?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),t>0){var r=null==o?l.props.limit:1;if(1===t||1===r)l.displayedToast++,d();else{var i=r>t?t:r;l.displayedToast=i;for(var a=0;a<i;a++)d()}}else n()}});b.iconOut=function(e){var t=e.theme,n=e.type,r=e.isLoading,i=e.icon,a=null,o={theme:t,type:n};return!1===i||(wR(i)?a=i(o):(0,nt.isValidElement)(i)?a=(0,nt.cloneElement)(i,o):_R(i)||bR(i)?a=i:r?a=IR.spinner():function(e){return e in IR}(n)&&(a=IR[n](o))),a}(b),wR(a.onOpen)&&(b.onOpen=a.onOpen),wR(a.onClose)&&(b.onClose=a.onClose),b.closeButton=p.closeButton,!1===a.closeButton||xR(a.closeButton)?b.closeButton=a.closeButton:!0===a.closeButton&&(b.closeButton=!xR(p.closeButton)||p.closeButton);var _=e;(0,nt.isValidElement)(e)&&!_R(e.type)?_=(0,nt.cloneElement)(e,{closeToast:y,toastProps:b,data:f}):wR(e)&&(_=e({closeToast:y,toastProps:b,data:f})),p.limit&&p.limit>0&&l.count>p.limit&&m?l.queue.push({toastContent:_,toastProps:b,staleId:i}):bR(r)?setTimeout((function(){v(_,b,i)}),r):v(_,b,i)}}function v(e,t,n){var r=t.toastId;n&&u.delete(n);var i={content:e,props:t};u.set(r,i),a((function(e){return[].concat(o(e),[r]).filter((function(e){return e!==n}))})),CR.emit(4,SR(i,null==i.props.updateId?"added":"updated"))}return(0,nt.useEffect)((function(){return l.containerId=e.containerId,CR.cancelEmit(3).on(0,p).on(1,(function(e){return s.current&&h(e)})).on(5,f).emit(2,l),function(){u.clear(),CR.emit(3,l)}}),[]),(0,nt.useEffect)((function(){l.props=e,l.isToastActive=c,l.displayedToast=i.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(u.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:s,isToastActive:c}}(e),r=n.getToastToRender,i=n.containerRef,a=n.isToastActive,s=e.className,u=e.style,c=e.rtl,l=e.containerId;function f(e){var t=mR("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":c});return wR(s)?s({position:e,rtl:c,defaultClassName:t}):mR(t,ER(s))}return(0,nt.useEffect)((function(){t&&(t.current=i.current)}),[]),nt.createElement("div",{ref:i,className:"Toastify",id:l},r((function(e,t){var n=t.length?Lr({},u):Lr(Lr({},u),{},{pointerEvents:"none"});return nt.createElement("div",{className:f(e),style:n,key:"container-".concat(e)},t.map((function(e,n){var r=e.content,i=e.props;return nt.createElement(DR,Lr(Lr({},i),{},{isIn:a(i.toastId),style:Lr(Lr({},i.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-".concat(i.key)}),r)})))})))})));FR.displayName="ToastContainer",FR.defaultProps={position:"top-right",transition:MR,autoClose:5e3,closeButton:OR,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var jR,UR=new Map,BR=[],VR=1;function zR(){return""+VR++}function qR(e){return e&&(_R(e.toastId)||bR(e.toastId))?e.toastId:zR()}function WR(e,t){return UR.size>0?CR.emit(0,e,t):BR.push({content:e,options:t}),t.toastId}function HR(e,t){return Lr(Lr({},t),{},{type:t&&t.type||e,toastId:qR(t)})}function KR(e){return function(t,n){return WR(t,HR(e,n))}}function QR(e,t){return WR(e,HR("default",t))}QR.loading=function(e,t){return WR(e,HR("default",Lr({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},QR.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=_R(i)?QR.loading(i,n):QR.loading(i.render,Lr(Lr({},n),i)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},u=function(e,t,i){if(null!=t){var a=Lr(Lr(Lr({type:e},s),n),{},{data:i}),o=_R(t)?{render:t}:t;return r?QR.update(r,Lr(Lr({},a),o)):QR(o.render,Lr(Lr({},a),o)),i}QR.dismiss(r)},c=wR(e)?e():e;return c.then((function(e){return u("success",o,e)})).catch((function(e){return u("error",a,e)})),c},QR.success=KR("success"),QR.info=KR("info"),QR.error=KR("error"),QR.warning=KR("warning"),QR.warn=QR.warning,QR.dark=function(e,t){return WR(e,HR("default",Lr({theme:"dark"},t)))},QR.dismiss=function(e){UR.size>0?CR.emit(1,e):BR=BR.filter((function(t){return null!=e&&t.options.toastId!==e}))},QR.clearWaitingQueue=function(e){return void 0===e&&(e={}),CR.emit(5,e)},QR.isActive=function(e){var t=!1;return UR.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},QR.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=UR.get(n||jR);return r&&r.getToast(e)}(e,t);if(n){var r=n.props,i=n.content,a=Lr(Lr(Lr({},r),t),{},{toastId:t.toastId||e,updateId:zR()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,WR(o,a)}}),0)},QR.done=function(e){QR.update(e,{progress:1})},QR.onChange=function(e){return CR.on(4,e),function(){CR.off(4,e)}},QR.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},QR.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},CR.on(2,(function(e){jR=e.containerId||e,UR.set(jR,e),BR.forEach((function(e){CR.emit(0,e.content,e.options)})),BR=[]})).on(3,(function(e){UR.delete(e.containerId||e),0===UR.size&&CR.off(0).off(1).off(5)}));var GR=function(e,t){switch(t){case"error":QR.error("".concat(e),{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});break;case"success":QR.success("".concat(e),{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},YR=_i("user/removeBook",function(){var e=E(_().mark((function e(t,n){var r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,i=t.book,a=n.dispatch,e.prev=2,e.next=5,hk(Gm(JN,"books-user-".concat(r.id),"".concat(i.id)));case 5:if(!i.seesEveryone){e.next=9;break}return e.next=8,hk(Gm(JN,"books-sees-everyone","".concat(i.booksEveryoneCollectionID)));case 8:a(eR());case 9:i.favorite&&a(dR(r)),a(hR(r.id)),GR("The book has been deleted","success"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}()),XR=vi({name:"user",initialState:{user:{id:"",email:""},library:[],favoriteBooks:[],loading:!1,error:"",chats:[],messages:[]},reducers:{setUser:function(e,t){e.user=t.payload},removeUser:function(e){e.user={id:"",email:""}},setLibrary:function(e,t){e.library=t.payload},setFavorite:function(e,t){e.favoriteBooks=t.payload},setChats:function(e,t){e.chats=t.payload},setMessages:function(e,t){e.messages=t.payload}},extraReducers:function(e){e.addCase(hR.fulfilled,(function(e,t){e.library=t.payload})).addCase(dR.fulfilled,(function(e,t){e.favoriteBooks=t.payload})).addCase(pR.pending,(function(e){e.loading=!0,e.error=""})).addCase(pR.fulfilled,(function(e){e.loading=!1})).addCase(pR.rejected,(function(e,t){e.loading=!1,e.error=t.payload})).addCase(YR.rejected,(function(e,t){e.error=t.payload}))}}),JR=XR.actions,$R=JR.setUser,ZR=JR.removeUser,eO=JR.setLibrary,tO=JR.setChats,nO=JR.setMessages,rO=JR.setFavorite,iO=XR.reducer,aO=n(184);function oO(e){var t=e.children,n=Nn(),r=_t();return(0,aO.jsx)("span",{onClick:function(){(function(e){return ma(e).signOut()})(XN).then((function(){n(ZR()),r("/")})).catch((function(e){console.error(e)}))},children:t})}var sO={linkToBookShelf:"styles_linkToBookShelf__x5SqT"};function uO(e){var t=e.children,n=On().isAuth;return(0,aO.jsx)(aO.Fragment,{children:n?(0,aO.jsx)(Jt,{className:sO.linkToBookShelf,to:"book-shelf/all-books",children:t}):(0,aO.jsx)(Jt,{className:sO.linkToBookShelf,to:"sign-in",children:t})})}var cO=function(){var e=On().isAuth,t=Nn(),n=Rn((function(e){return e.main})).visibleMenu,r=bt().pathname.startsWith("/book-shelf/");return(0,aO.jsxs)("header",{className:qt.header,children:[(0,aO.jsx)(Jt,{to:"/",children:"BookShelf"}),e?(0,aO.jsx)(oO,{children:(0,aO.jsx)("img",{className:qt.userLink,src:on,alt:"log-out"})}):(0,aO.jsx)(uO,{children:(0,aO.jsx)("img",{className:qt.userLink,src:an,alt:"log-in"})}),(0,aO.jsx)("img",{onClick:function(){t(sR(!n)),t(uR(!1))},className:nn()(qt.menuBtn,x({},qt.showMenu,r)),src:rn,alt:""})]})},lO={main:"styles_main__Znzof"};var fO=function(e){var t=e.children,n=Nn();return(0,aO.jsx)("main",{onClick:function(){return n(sR(!1))},className:lO.main,children:t})},hO={footer:"styles_footer__OkW0p"};var dO=function(){return(0,aO.jsx)("footer",{className:hO.footer})};var pO=function(){return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)(FR,{}),(0,aO.jsx)(cO,{}),(0,aO.jsx)(fO,{children:(0,aO.jsx)(Mt,{})}),(0,aO.jsx)(dO,{})]})},vO={window:"styles_window__IOqbJ",head:"styles_head__GH11I",chatListImg:"styles_chatListImg__Ajnb1",chatWrapper:"styles_chatWrapper__0ld4T",emptyChat:"styles_emptyChat__+7r80",chat:"styles_chat__nbVyG",receiveUser:"styles_receiveUser__VpE0d",message:"styles_message__FVoHU",sendingUser:"styles_sendingUser__+RoFX",scrollToBottomBtn:"styles_scrollToBottomBtn__5IzLz",scrollToBottomBtnActive:"styles_scrollToBottomBtnActive__gxWTx",chatMenu:"styles_chatMenu__AF8Oh",chatMenuList:"styles_chatMenuList__psrq3",chatMenuItem:"styles_chatMenuItem__zc13k"},yO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVR4nN2Uu27CQBBFLSTc8zdBIhTQh4cQvxQnfAZJPomYVws1jpsIKScasUguBmd2NxRwJDfe3XutneubJHcNkAJT4APIgdI9uXsna2mo+BjY8jcbYOQj3ABe8edFzloMZoSTWa4llmHdQOU+Y9mqg3eJuMQ3sPMwmWgGEjuNA9AGWh4Gb5rB6oL4Q2WPlVwzKJSNvdpUnM51lHOF1aBvMHi0GiyVjSXQDbiiT83g/R+HPPeN6RHYx8a0Cay51o8mSCtGiv8AT0kdgU165rlWvFLXUr2+X56Z6rpiNDTORBpgYBZWBj+RbpFsA1/uWUgU3VozSPxm+AWo+OMS+Nn5QAAAAABJRU5ErkJggg==",mO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/0lEQVR4nN2UzU4CQRCEJyRwxmfhtIYT3nEhxFcS4TEEH0mXn71yNBG9GBI/0mEIHJrZnlk9SCVz2Z6umnTXlnNXDaAFPAAvQAF8+VP4b1JrpZIPgZJqrIFBDHEDmBCPJ+m1CExJx9gylrrIQwuVedZFqS7eO8KKDfAdqI80AbGdFW0gAz4u1GeawNLK7k49HeBduVJoAlvl4m3QFYe+ntK3tQp0DQJ3VoFFwoiyC3t40wTmVgHgpmLJz79h012sTZvAir/60QSSijXJf4C+CyExSY94DJKfxbVEb+zLx6a4PhPKjTuRBLg3EyuLH0m2iLeBT39exYq+1kwi/zfYA7HB4v1XhuwDAAAAAElFTkSuQmCC",gO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCUlEQVR4nO2aS2sUQRDH5+TjoCj4uukhBwluNtP/yYMo5CKKoMSjiZ9BIn6BnCRs1QQTFMSrH0ETNN8gBM9ms9mTT1Y0Z+NKRmozYZXtmd2e6dkZQwoKFna6p35T1dXVD8c5lAMqpdL8acC/CzArxStKcRXgbYB3Qt0GaEP+k2cAmiqXn5xyiiADA0tHlfLvA7yqFP0GODDRsM0bgGakL6ffMj6+cBygRwB/NjU+WumTUvRwcnLuWF8gPI9vAVy3B9ABtKWUfzMzAHE9QEvZAXSE3UvxvFWIsbHF8wC96xcE2jDrQ0N8zgpEuTx/Sdzdbwi0tSY2pIIYHn58NkyjQc5aHxmhC4kgJHvkEU6ICbNEKVopep638eiEeZokxQbFVLphMFvTZoFBtnqaNMMZuwAGc0yI+bNdvSGlQvFB+GPswA8LwOD/UH86Jqx4NX8DuVevrESuJ5KU4jmCNEdHl05qvNFaFOVuIIxgKrd12crP2zAYK5EOZNmwk6uuW/EAalgwqKGUD8C/Ztj2tW6g18zc6kPaeR5fSQdDDelD+nJbH8bEBq5qUi/9MDTiG7BQCsfXZYC+JAD5pw+l+Ktpe51HdtIaYgiTFiIA6KctkKQwFiBYD5IgtJLCWIJgfWilr3jbgzY6AfTyDJu8c0MD0toBTNFpV8/Y9EQQgrzSjRG2ABLx1W17gluqFFc0IDRlB6QTJgsIRJUosqFst2hsw2QBAdAvbdEYeuWtvRftwchsba+U4b/7XtZChCAzdl+WnXoe3zsQS93BwbkjTpzI1n7ehqJ7WD2Ihdj3SkG2SYMIrfW84yjnEwX1xK7n0XXHRAB+VkCQRSOIdojReoEg1roO8Giv+GcKMl7qctjkpD/oMVsG21SlaNN1+aJjQ+T4K58wozU5bHKyOQyl3T5BvMj07F3OJ7IMNaW4apxiU954mJVSweJY+CAzdi43IPbCzZ8O7540E3z9plSxUgAmTq22RdYGrst3ZBtTdgDDCzTf9y/VhL/fy/JUVnayKJqYqJywbsihOMWQP6t/inNVHyzQAAAAAElFTkSuQmCC",kO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnklEQVR4nO2VwQrCMAyGv8fZYZ7qzXnX195gvoeCkr1EpZBDKQOha62O/BAIackHP0kLph/WDfBJzKWaTyvNc2NqBR5LubFf+UJh4I8yqz1wAhwgkSOitaHmcDk96xUomgcda4IlAvVJLrXXaQEO0b0OeH1jj5cV8LM2WFpZ7VoN16CAdJ1C7WxvNf/2Oz0KQO854OtGeIBecsCmfegNq9hJaNirIjEAAAAASUVORK5CYII=",bO=_i("user/fetchMessages",function(){var e=E(_().mark((function e(t,n){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.dispatch,e.prev=1,BN(RN(ZN,"chats/".concat(t,"/messages")),(function(e){var t=e.val();r(nO(null!==t?Object.values(t):[]))})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),_O={wrapper:"styles_wrapper__CPUDR",form:"styles_form__WtUNt",message:"styles_message__gXk11",submit:"styles_submit__20dfC"},wO=n(77),EO=n.n(wO),xO=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===TO}(e)}(e)};var TO="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function SO(e,t){return!1!==t.clone&&t.isMergeableObject(e)?AO(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function CO(e,t,n){return e.concat(t).map((function(e){return SO(e,n)}))}function AO(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||CO,n.isMergeableObject=n.isMergeableObject||xO;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=SO(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=AO(e[i],t[i],n):r[i]=SO(t[i],n)})),r}(e,t,n):SO(t,n)}AO.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return AO(e,n,t)}),{})};var IO=AO,NO="object"==typeof global&&global&&global.Object===Object&&global,RO="object"==typeof self&&self&&self.Object===Object&&self,OO=NO||RO||Function("return this")(),PO=OO.Symbol,DO=Object.prototype,LO=DO.hasOwnProperty,MO=DO.toString,FO=PO?PO.toStringTag:void 0;var jO=function(e){var t=LO.call(e,FO),n=e[FO];try{e[FO]=void 0;var r=!0}catch(a){}var i=MO.call(e);return r&&(t?e[FO]=n:delete e[FO]),i},UO=Object.prototype.toString;var BO=function(e){return UO.call(e)},VO="[object Null]",zO="[object Undefined]",qO=PO?PO.toStringTag:void 0;var WO=function(e){return null==e?void 0===e?zO:VO:qO&&qO in Object(e)?jO(e):BO(e)};var HO=function(e,t){return function(n){return e(t(n))}},KO=HO(Object.getPrototypeOf,Object);var QO=function(e){return null!=e&&"object"==typeof e},GO="[object Object]",YO=Function.prototype,XO=Object.prototype,JO=YO.toString,$O=XO.hasOwnProperty,ZO=JO.call(Object);var eP=function(e){if(!QO(e)||WO(e)!=GO)return!1;var t=KO(e);if(null===t)return!0;var n=$O.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&JO.call(n)==ZO};var tP=function(){this.__data__=[],this.size=0};var nP=function(e,t){return e===t||e!==e&&t!==t};var rP=function(e,t){for(var n=e.length;n--;)if(nP(e[n][0],t))return n;return-1},iP=Array.prototype.splice;var aP=function(e){var t=this.__data__,n=rP(t,e);return!(n<0)&&(n==t.length-1?t.pop():iP.call(t,n,1),--this.size,!0)};var oP=function(e){var t=this.__data__,n=rP(t,e);return n<0?void 0:t[n][1]};var sP=function(e){return rP(this.__data__,e)>-1};var uP=function(e,t){var n=this.__data__,r=rP(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function cP(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cP.prototype.clear=tP,cP.prototype.delete=aP,cP.prototype.get=oP,cP.prototype.has=sP,cP.prototype.set=uP;var lP=cP;var fP=function(){this.__data__=new lP,this.size=0};var hP=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var dP=function(e){return this.__data__.get(e)};var pP=function(e){return this.__data__.has(e)};var vP=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},yP="[object AsyncFunction]",mP="[object Function]",gP="[object GeneratorFunction]",kP="[object Proxy]";var bP=function(e){if(!vP(e))return!1;var t=WO(e);return t==mP||t==gP||t==yP||t==kP},_P=OO["__core-js_shared__"],wP=function(){var e=/[^.]+$/.exec(_P&&_P.keys&&_P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var EP=function(e){return!!wP&&wP in e},xP=Function.prototype.toString;var TP=function(e){if(null!=e){try{return xP.call(e)}catch(t){}try{return e+""}catch(t){}}return""},SP=/^\[object .+?Constructor\]$/,CP=Function.prototype,AP=Object.prototype,IP=CP.toString,NP=AP.hasOwnProperty,RP=RegExp("^"+IP.call(NP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var OP=function(e){return!(!vP(e)||EP(e))&&(bP(e)?RP:SP).test(TP(e))};var PP=function(e,t){return null==e?void 0:e[t]};var DP=function(e,t){var n=PP(e,t);return OP(n)?n:void 0},LP=DP(OO,"Map"),MP=DP(Object,"create");var FP=function(){this.__data__=MP?MP(null):{},this.size=0};var jP=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},UP="__lodash_hash_undefined__",BP=Object.prototype.hasOwnProperty;var VP=function(e){var t=this.__data__;if(MP){var n=t[e];return n===UP?void 0:n}return BP.call(t,e)?t[e]:void 0},zP=Object.prototype.hasOwnProperty;var qP=function(e){var t=this.__data__;return MP?void 0!==t[e]:zP.call(t,e)},WP="__lodash_hash_undefined__";var HP=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=MP&&void 0===t?WP:t,this};function KP(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}KP.prototype.clear=FP,KP.prototype.delete=jP,KP.prototype.get=VP,KP.prototype.has=qP,KP.prototype.set=HP;var QP=KP;var GP=function(){this.size=0,this.__data__={hash:new QP,map:new(LP||lP),string:new QP}};var YP=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var XP=function(e,t){var n=e.__data__;return YP(t)?n["string"==typeof t?"string":"hash"]:n.map};var JP=function(e){var t=XP(this,e).delete(e);return this.size-=t?1:0,t};var $P=function(e){return XP(this,e).get(e)};var ZP=function(e){return XP(this,e).has(e)};var eD=function(e,t){var n=XP(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function tD(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tD.prototype.clear=GP,tD.prototype.delete=JP,tD.prototype.get=$P,tD.prototype.has=ZP,tD.prototype.set=eD;var nD=tD,rD=200;var iD=function(e,t){var n=this.__data__;if(n instanceof lP){var r=n.__data__;if(!LP||r.length<rD-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new nD(r)}return n.set(e,t),this.size=n.size,this};function aD(e){var t=this.__data__=new lP(e);this.size=t.size}aD.prototype.clear=fP,aD.prototype.delete=hP,aD.prototype.get=dP,aD.prototype.has=pP,aD.prototype.set=iD;var oD=aD;var sD=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},uD=function(){try{var e=DP(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var cD=function(e,t,n){"__proto__"==t&&uD?uD(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},lD=Object.prototype.hasOwnProperty;var fD=function(e,t,n){var r=e[t];lD.call(e,t)&&nP(r,n)&&(void 0!==n||t in e)||cD(e,t,n)};var hD=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?cD(n,s,u):fD(n,s,u)}return n};var dD=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},pD="[object Arguments]";var vD=function(e){return QO(e)&&WO(e)==pD},yD=Object.prototype,mD=yD.hasOwnProperty,gD=yD.propertyIsEnumerable,kD=vD(function(){return arguments}())?vD:function(e){return QO(e)&&mD.call(e,"callee")&&!gD.call(e,"callee")},bD=kD,_D=Array.isArray;var wD=function(){return!1},ED="object"==typeof exports&&exports&&!exports.nodeType&&exports,xD=ED&&"object"==typeof module&&module&&!module.nodeType&&module,TD=xD&&xD.exports===ED?OO.Buffer:void 0,SD=(TD?TD.isBuffer:void 0)||wD,CD=9007199254740991,AD=/^(?:0|[1-9]\d*)$/;var ID=function(e,t){var n=typeof e;return!!(t=null==t?CD:t)&&("number"==n||"symbol"!=n&&AD.test(e))&&e>-1&&e%1==0&&e<t},ND=9007199254740991;var RD=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ND},OD={};OD["[object Float32Array]"]=OD["[object Float64Array]"]=OD["[object Int8Array]"]=OD["[object Int16Array]"]=OD["[object Int32Array]"]=OD["[object Uint8Array]"]=OD["[object Uint8ClampedArray]"]=OD["[object Uint16Array]"]=OD["[object Uint32Array]"]=!0,OD["[object Arguments]"]=OD["[object Array]"]=OD["[object ArrayBuffer]"]=OD["[object Boolean]"]=OD["[object DataView]"]=OD["[object Date]"]=OD["[object Error]"]=OD["[object Function]"]=OD["[object Map]"]=OD["[object Number]"]=OD["[object Object]"]=OD["[object RegExp]"]=OD["[object Set]"]=OD["[object String]"]=OD["[object WeakMap]"]=!1;var PD=function(e){return QO(e)&&RD(e.length)&&!!OD[WO(e)]};var DD=function(e){return function(t){return e(t)}},LD="object"==typeof exports&&exports&&!exports.nodeType&&exports,MD=LD&&"object"==typeof module&&module&&!module.nodeType&&module,FD=MD&&MD.exports===LD&&NO.process,jD=function(){try{var e=MD&&MD.require&&MD.require("util").types;return e||FD&&FD.binding&&FD.binding("util")}catch(t){}}(),UD=jD&&jD.isTypedArray,BD=UD?DD(UD):PD,VD=Object.prototype.hasOwnProperty;var zD=function(e,t){var n=_D(e),r=!n&&bD(e),i=!n&&!r&&SD(e),a=!n&&!r&&!i&&BD(e),o=n||r||i||a,s=o?dD(e.length,String):[],u=s.length;for(var c in e)!t&&!VD.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ID(c,u))||s.push(c);return s},qD=Object.prototype;var WD=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qD)},HD=HO(Object.keys,Object),KD=Object.prototype.hasOwnProperty;var QD=function(e){if(!WD(e))return HD(e);var t=[];for(var n in Object(e))KD.call(e,n)&&"constructor"!=n&&t.push(n);return t};var GD=function(e){return null!=e&&RD(e.length)&&!bP(e)};var YD=function(e){return GD(e)?zD(e):QD(e)};var XD=function(e,t){return e&&hD(t,YD(t),e)};var JD=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},$D=Object.prototype.hasOwnProperty;var ZD=function(e){if(!vP(e))return JD(e);var t=WD(e),n=[];for(var r in e)("constructor"!=r||!t&&$D.call(e,r))&&n.push(r);return n};var eL=function(e){return GD(e)?zD(e,!0):ZD(e)};var tL=function(e,t){return e&&hD(t,eL(t),e)},nL="object"==typeof exports&&exports&&!exports.nodeType&&exports,rL=nL&&"object"==typeof module&&module&&!module.nodeType&&module,iL=rL&&rL.exports===nL?OO.Buffer:void 0,aL=iL?iL.allocUnsafe:void 0;var oL=function(e,t){if(t)return e.slice();var n=e.length,r=aL?aL(n):new e.constructor(n);return e.copy(r),r};var sL=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var uL=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var cL=function(){return[]},lL=Object.prototype.propertyIsEnumerable,fL=Object.getOwnPropertySymbols,hL=fL?function(e){return null==e?[]:(e=Object(e),uL(fL(e),(function(t){return lL.call(e,t)})))}:cL,dL=hL;var pL=function(e,t){return hD(e,dL(e),t)};var vL=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},yL=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)vL(t,dL(e)),e=KO(e);return t}:cL,mL=yL;var gL=function(e,t){return hD(e,mL(e),t)};var kL=function(e,t,n){var r=t(e);return _D(e)?r:vL(r,n(e))};var bL=function(e){return kL(e,YD,dL)};var _L=function(e){return kL(e,eL,mL)},wL=DP(OO,"DataView"),EL=DP(OO,"Promise"),xL=DP(OO,"Set"),TL=DP(OO,"WeakMap"),SL="[object Map]",CL="[object Promise]",AL="[object Set]",IL="[object WeakMap]",NL="[object DataView]",RL=TP(wL),OL=TP(LP),PL=TP(EL),DL=TP(xL),LL=TP(TL),ML=WO;(wL&&ML(new wL(new ArrayBuffer(1)))!=NL||LP&&ML(new LP)!=SL||EL&&ML(EL.resolve())!=CL||xL&&ML(new xL)!=AL||TL&&ML(new TL)!=IL)&&(ML=function(e){var t=WO(e),n="[object Object]"==t?e.constructor:void 0,r=n?TP(n):"";if(r)switch(r){case RL:return NL;case OL:return SL;case PL:return CL;case DL:return AL;case LL:return IL}return t});var FL=ML,jL=Object.prototype.hasOwnProperty;var UL=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&jL.call(e,"index")&&(n.index=e.index,n.input=e.input),n},BL=OO.Uint8Array;var VL=function(e){var t=new e.constructor(e.byteLength);return new BL(t).set(new BL(e)),t};var zL=function(e,t){var n=t?VL(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},qL=/\w*$/;var WL=function(e){var t=new e.constructor(e.source,qL.exec(e));return t.lastIndex=e.lastIndex,t},HL=PO?PO.prototype:void 0,KL=HL?HL.valueOf:void 0;var QL=function(e){return KL?Object(KL.call(e)):{}};var GL=function(e,t){var n=t?VL(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},YL="[object Boolean]",XL="[object Date]",JL="[object Map]",$L="[object Number]",ZL="[object RegExp]",eM="[object Set]",tM="[object String]",nM="[object Symbol]",rM="[object ArrayBuffer]",iM="[object DataView]",aM="[object Float32Array]",oM="[object Float64Array]",sM="[object Int8Array]",uM="[object Int16Array]",cM="[object Int32Array]",lM="[object Uint8Array]",fM="[object Uint8ClampedArray]",hM="[object Uint16Array]",dM="[object Uint32Array]";var pM=function(e,t,n){var r=e.constructor;switch(t){case rM:return VL(e);case YL:case XL:return new r(+e);case iM:return zL(e,n);case aM:case oM:case sM:case uM:case cM:case lM:case fM:case hM:case dM:return GL(e,n);case JL:return new r;case $L:case tM:return new r(e);case ZL:return WL(e);case eM:return new r;case nM:return QL(e)}},vM=Object.create,yM=function(){function e(){}return function(t){if(!vP(t))return{};if(vM)return vM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),mM=yM;var gM=function(e){return"function"!=typeof e.constructor||WD(e)?{}:mM(KO(e))},kM="[object Map]";var bM=function(e){return QO(e)&&FL(e)==kM},_M=jD&&jD.isMap,wM=_M?DD(_M):bM,EM="[object Set]";var xM=function(e){return QO(e)&&FL(e)==EM},TM=jD&&jD.isSet,SM=TM?DD(TM):xM,CM=1,AM=2,IM=4,NM="[object Arguments]",RM="[object Function]",OM="[object GeneratorFunction]",PM="[object Object]",DM={};DM[NM]=DM["[object Array]"]=DM["[object ArrayBuffer]"]=DM["[object DataView]"]=DM["[object Boolean]"]=DM["[object Date]"]=DM["[object Float32Array]"]=DM["[object Float64Array]"]=DM["[object Int8Array]"]=DM["[object Int16Array]"]=DM["[object Int32Array]"]=DM["[object Map]"]=DM["[object Number]"]=DM[PM]=DM["[object RegExp]"]=DM["[object Set]"]=DM["[object String]"]=DM["[object Symbol]"]=DM["[object Uint8Array]"]=DM["[object Uint8ClampedArray]"]=DM["[object Uint16Array]"]=DM["[object Uint32Array]"]=!0,DM["[object Error]"]=DM[RM]=DM["[object WeakMap]"]=!1;var LM=function e(t,n,r,i,a,o){var s,u=n&CM,c=n&AM,l=n&IM;if(r&&(s=a?r(t,i,a,o):r(t)),void 0!==s)return s;if(!vP(t))return t;var f=_D(t);if(f){if(s=UL(t),!u)return sL(t,s)}else{var h=FL(t),d=h==RM||h==OM;if(SD(t))return oL(t,u);if(h==PM||h==NM||d&&!a){if(s=c||d?{}:gM(t),!u)return c?gL(t,tL(s,t)):pL(t,XD(s,t))}else{if(!DM[h])return a?t:{};s=pM(t,h,u)}}o||(o=new oD);var p=o.get(t);if(p)return p;o.set(t,s),SM(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,o))})):wM(t)&&t.forEach((function(i,a){s.set(a,e(i,n,r,a,t,o))}));var v=f?void 0:(l?c?_L:bL:c?eL:YD)(t);return sD(v||t,(function(i,a){v&&(i=t[a=i]),fD(s,a,e(i,n,r,a,t,o))})),s},MM=4;var FM=function(e){return LM(e,MM)};var jM=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},UM="[object Symbol]";var BM=function(e){return"symbol"==typeof e||QO(e)&&WO(e)==UM},VM="Expected a function";function zM(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(VM);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(zM.Cache||nD),n}zM.Cache=nD;var qM=zM,WM=500;var HM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KM=/\\(\\)?/g,QM=function(e){var t=qM(e,(function(e){return n.size===WM&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(HM,(function(e,n,r,i){t.push(r?i.replace(KM,"$1"):n||e)})),t})),GM=QM,YM=1/0;var XM=function(e){if("string"==typeof e||BM(e))return e;var t=e+"";return"0"==t&&1/e==-YM?"-0":t},JM=1/0,$M=PO?PO.prototype:void 0,ZM=$M?$M.toString:void 0;var eF=function e(t){if("string"==typeof t)return t;if(_D(t))return jM(t,e)+"";if(BM(t))return ZM?ZM.call(t):"";var n=t+"";return"0"==n&&1/t==-JM?"-0":n};var tF=function(e){return null==e?"":eF(e)};var nF=function(e){return _D(e)?jM(e,XM):BM(e)?[e]:sL(GM(tF(e)))},rF=!0;var iF=function(e,t){if(!rF){if(e)return;var n="Warning: "+t;"undefined"!==typeof console&&console.warn(n);try{throw Error(n)}catch(or){}}},aF=1,oF=4;var sF=function(e){return LM(e,aF|oF)};function uF(){return uF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uF.apply(this,arguments)}function cF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function lF(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function fF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hF=function(e){return Array.isArray(e)&&0===e.length},dF=function(e){return"function"===typeof e},pF=function(e){return null!==e&&"object"===typeof e},vF=function(e){return String(Math.floor(Number(e)))===e},yF=function(e){return"[object String]"===Object.prototype.toString.call(e)},mF=function(e){return 0===nt.Children.count(e)},gF=function(e){return pF(e)&&dF(e.then)};function kF(e,t,n,r){void 0===r&&(r=0);for(var i=nF(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function bF(e,t,n){for(var r=FM(e),i=r,a=0,o=nF(t);a<o.length-1;a++){var s=o[a],u=kF(e,o.slice(0,a+1));if(u&&(pF(u)||Array.isArray(u)))i=i[s]=FM(u);else{var c=o[a+1];i=i[s]=vF(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function _F(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];pF(s)?n.get(s)||(n.set(s,!0),r[o]=Array.isArray(s)?[]:{},_F(s,t,n,r[o])):r[o]=t}return r}var wF=(0,nt.createContext)(void 0);wF.displayName="FormikContext";var EF=wF.Provider,xF=wF.Consumer;function TF(){var e=(0,nt.useContext)(wF);return e||iF(!1),e}function SF(e,t){switch(t.type){case"SET_VALUES":return uF({},e,{values:t.payload});case"SET_TOUCHED":return uF({},e,{touched:t.payload});case"SET_ERRORS":return EO()(e.errors,t.payload)?e:uF({},e,{errors:t.payload});case"SET_STATUS":return uF({},e,{status:t.payload});case"SET_ISSUBMITTING":return uF({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return uF({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return uF({},e,{values:bF(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return uF({},e,{touched:bF(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return uF({},e,{errors:bF(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return uF({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return uF({},e,{touched:_F(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return uF({},e,{isSubmitting:!1});default:return e}}var CF={},AF={};function IF(e){var t=e.validateOnChange,n=void 0===t||t,r=e.validateOnBlur,i=void 0===r||r,a=e.validateOnMount,o=void 0!==a&&a,s=e.isInitialValid,u=e.enableReinitialize,c=void 0!==u&&u,l=e.onSubmit,f=lF(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=uF({validateOnChange:n,validateOnBlur:i,validateOnMount:o,onSubmit:l},f),d=(0,nt.useRef)(h.initialValues),p=(0,nt.useRef)(h.initialErrors||CF),v=(0,nt.useRef)(h.initialTouched||AF),y=(0,nt.useRef)(h.initialStatus),m=(0,nt.useRef)(!1),g=(0,nt.useRef)({});(0,nt.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var k=(0,nt.useReducer)(SF,{values:h.initialValues,errors:h.initialErrors||CF,touched:h.initialTouched||AF,status:h.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),b=k[0],_=k[1],w=(0,nt.useCallback)((function(e,t){return new Promise((function(n,r){var i=h.validate(e,t);null==i?n(CF):gF(i)?i.then((function(e){n(e||CF)}),(function(e){r(e)})):n(i)}))}),[h.validate]),E=(0,nt.useCallback)((function(e,t){var n=h.validationSchema,r=dF(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=RF(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(CF)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return bF(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;kF(t,o.path)||(t=bF(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[h.validationSchema]),x=(0,nt.useCallback)((function(e,t){return new Promise((function(n){return n(g.current[e].validate(t))}))}),[]),T=(0,nt.useCallback)((function(e){var t=Object.keys(g.current).filter((function(e){return dF(g.current[e].validate)})),n=t.length>0?t.map((function(t){return x(t,kF(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=bF(e,t[r],n)),e}),{})}))}),[x]),S=(0,nt.useCallback)((function(e){return Promise.all([T(e),h.validationSchema?E(e):{},h.validate?w(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return IO.all([t,n,r],{arrayMerge:OF})}))}),[h.validate,h.validationSchema,T,w,E]),C=DF((function(e){return void 0===e&&(e=b.values),_({type:"SET_ISVALIDATING",payload:!0}),S(e).then((function(e){return m.current&&(_({type:"SET_ISVALIDATING",payload:!1}),_({type:"SET_ERRORS",payload:e})),e}))}));(0,nt.useEffect)((function(){o&&!0===m.current&&EO()(d.current,h.initialValues)&&C(d.current)}),[o,C]);var A=(0,nt.useCallback)((function(e){var t=e&&e.values?e.values:d.current,n=e&&e.errors?e.errors:p.current?p.current:h.initialErrors||{},r=e&&e.touched?e.touched:v.current?v.current:h.initialTouched||{},i=e&&e.status?e.status:y.current?y.current:h.initialStatus;d.current=t,p.current=n,v.current=r,y.current=i;var a=function(){_({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(h.onReset){var o=h.onReset(b.values,Q);gF(o)?o.then(a):a()}else a()}),[h.initialErrors,h.initialStatus,h.initialTouched]);(0,nt.useEffect)((function(){!0!==m.current||EO()(d.current,h.initialValues)||(c&&(d.current=h.initialValues,A()),o&&C(d.current))}),[c,h.initialValues,A,o,C]),(0,nt.useEffect)((function(){c&&!0===m.current&&!EO()(p.current,h.initialErrors)&&(p.current=h.initialErrors||CF,_({type:"SET_ERRORS",payload:h.initialErrors||CF}))}),[c,h.initialErrors]),(0,nt.useEffect)((function(){c&&!0===m.current&&!EO()(v.current,h.initialTouched)&&(v.current=h.initialTouched||AF,_({type:"SET_TOUCHED",payload:h.initialTouched||AF}))}),[c,h.initialTouched]),(0,nt.useEffect)((function(){c&&!0===m.current&&!EO()(y.current,h.initialStatus)&&(y.current=h.initialStatus,_({type:"SET_STATUS",payload:h.initialStatus}))}),[c,h.initialStatus,h.initialTouched]);var I=DF((function(e){if(g.current[e]&&dF(g.current[e].validate)){var t=kF(b.values,e),n=g.current[e].validate(t);return gF(n)?(_({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),_({type:"SET_ISVALIDATING",payload:!1})}))):(_({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return h.validationSchema?(_({type:"SET_ISVALIDATING",payload:!0}),E(b.values,e).then((function(e){return e})).then((function(t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),_({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),N=(0,nt.useCallback)((function(e,t){var n=t.validate;g.current[e]={validate:n}}),[]),R=(0,nt.useCallback)((function(e){delete g.current[e]}),[]),O=DF((function(e,t){return _({type:"SET_TOUCHED",payload:e}),(void 0===t?i:t)?C(b.values):Promise.resolve()})),P=(0,nt.useCallback)((function(e){_({type:"SET_ERRORS",payload:e})}),[]),D=DF((function(e,t){var r=dF(e)?e(b.values):e;return _({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?C(r):Promise.resolve()})),L=(0,nt.useCallback)((function(e,t){_({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),M=DF((function(e,t,r){return _({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?C(bF(b.values,e,t)):Promise.resolve()})),F=(0,nt.useCallback)((function(e,t){var n,r=t,i=e;if(!yF(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,s=a.name,u=a.id,c=a.value,l=a.checked,f=(a.outerHTML,a.options),h=a.multiple;r=t||(s||u),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(kF(b.values,r),l,c):f&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(f):c}r&&M(r,i)}),[M,b.values]),j=DF((function(e){if(yF(e))return function(t){return F(t,e)};F(e)})),U=DF((function(e,t,n){return void 0===t&&(t=!0),_({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?i:n)?C(b.values):Promise.resolve()})),B=(0,nt.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));U(a,!0)}),[U]),V=DF((function(e){if(yF(e))return function(t){return B(t,e)};B(e)})),z=(0,nt.useCallback)((function(e){dF(e)?_({type:"SET_FORMIK_STATE",payload:e}):_({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),q=(0,nt.useCallback)((function(e){_({type:"SET_STATUS",payload:e})}),[]),W=(0,nt.useCallback)((function(e){_({type:"SET_ISSUBMITTING",payload:e})}),[]),H=DF((function(){return _({type:"SUBMIT_ATTEMPT"}),C().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=G()))return}catch(mT){throw mT}return Promise.resolve(n).then((function(e){return m.current&&_({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(m.current)throw _({type:"SUBMIT_FAILURE"}),e}))}if(m.current&&(_({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=DF((function(e){e&&e.preventDefault&&dF(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&dF(e.stopPropagation)&&e.stopPropagation(),H().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Q={resetForm:A,validateForm:C,validateField:I,setErrors:P,setFieldError:L,setFieldTouched:U,setFieldValue:M,setStatus:q,setSubmitting:W,setTouched:O,setValues:D,setFormikState:z,submitForm:H},G=DF((function(){return l(b.values,Q)})),Y=DF((function(e){e&&e.preventDefault&&dF(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&dF(e.stopPropagation)&&e.stopPropagation(),A()})),X=(0,nt.useCallback)((function(e){return{value:kF(b.values,e),error:kF(b.errors,e),touched:!!kF(b.touched,e),initialValue:kF(d.current,e),initialTouched:!!kF(v.current,e),initialError:kF(p.current,e)}}),[b.errors,b.touched,b.values]),J=(0,nt.useCallback)((function(e){return{setValue:function(t,n){return M(e,t,n)},setTouched:function(t,n){return U(e,t,n)},setError:function(t){return L(e,t)}}}),[M,U,L]),$=(0,nt.useCallback)((function(e){var t=pF(e),n=t?e.name:e,r=kF(b.values,n),i={name:n,value:r,onChange:j,onBlur:V};if(t){var a=e.type,o=e.value,s=e.as,u=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===s&&u&&(i.value=i.value||[],i.multiple=!0)}return i}),[V,j,b.values]),Z=(0,nt.useMemo)((function(){return!EO()(d.current,b.values)}),[d.current,b.values]),ee=(0,nt.useMemo)((function(){return"undefined"!==typeof s?Z?b.errors&&0===Object.keys(b.errors).length:!1!==s&&dF(s)?s(h):s:b.errors&&0===Object.keys(b.errors).length}),[s,Z,b.errors,h]);return uF({},b,{initialValues:d.current,initialErrors:p.current,initialTouched:v.current,initialStatus:y.current,handleBlur:V,handleChange:j,handleReset:Y,handleSubmit:K,resetForm:A,setErrors:P,setFormikState:z,setFieldTouched:U,setFieldValue:M,setFieldError:L,setStatus:q,setSubmitting:W,setTouched:O,setValues:D,submitForm:H,validateForm:C,validateField:I,isValid:ee,dirty:Z,unregisterField:R,registerField:N,getFieldProps:$,getFieldMeta:X,getFieldHelpers:J,validateOnBlur:i,validateOnChange:n,validateOnMount:o})}function NF(e){var t=IF(e),n=e.component,r=e.children,i=e.render,a=e.innerRef;return(0,nt.useImperativeHandle)(a,(function(){return t})),(0,nt.createElement)(EF,{value:t},n?(0,nt.createElement)(n,t):i?i(t):r?dF(r)?r(t):mF(r)?null:nt.Children.only(r):null)}function RF(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||eP(e)?RF(e):""!==e?e:void 0})):eP(e[r])?t[r]=RF(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function OF(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?IO(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=IO(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var PF="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?nt.useLayoutEffect:nt.useEffect;function DF(e){var t=(0,nt.useRef)(e);return PF((function(){t.current=e})),(0,nt.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}function LF(e){var t=e.validate,n=e.name,r=e.render,i=e.children,a=e.as,o=e.component,s=lF(e,["validate","name","render","children","as","component"]),u=lF(TF(),["validate","validationSchema"]);var c=u.registerField,l=u.unregisterField;(0,nt.useEffect)((function(){return c(n,{validate:t}),function(){l(n)}}),[c,l,n,t]);var f=u.getFieldProps(uF({name:n},s)),h=u.getFieldMeta(n),d={field:f,form:u};if(r)return r(uF({},d,{meta:h}));if(dF(i))return i(uF({},d,{meta:h}));if(o){if("string"===typeof o){var p=s.innerRef,v=lF(s,["innerRef"]);return(0,nt.createElement)(o,uF({ref:p},f,v),i)}return(0,nt.createElement)(o,uF({field:f,form:u},s),i)}var y=a||"input";if("string"===typeof y){var m=s.innerRef,g=lF(s,["innerRef"]);return(0,nt.createElement)(y,uF({ref:m},f,g),i)}return(0,nt.createElement)(y,uF({},f,s),i)}var MF=(0,nt.forwardRef)((function(e,t){var n=e.action,r=lF(e,["action"]),i=null!=n?n:"#",a=TF(),o=a.handleReset,s=a.handleSubmit;return(0,nt.createElement)("form",Object.assign({onSubmit:s,ref:t,onReset:o,action:i},r))}));function FF(e){var t=function(t){return(0,nt.createElement)(xF,null,(function(n){return n||iF(!1),(0,nt.createElement)(e,Object.assign({},t,{formik:n}))}))},n=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t.WrappedComponent=e,t.displayName="FormikConnect("+n+")",bn()(t,e)}MF.displayName="Form";var jF=function(e,t,n){var r=zF(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r},UF=function(e,t,n){var r=zF(e),i=r[t];return r[t]=r[n],r[n]=i,r},BF=function(e,t,n){var r=zF(e);return r.splice(t,0,n),r},VF=function(e,t,n){var r=zF(e);return r[t]=n,r},zF=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(uF({},e,{length:t+1}))}return[]},qF=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,s=bF(n.values,a,e(kF(n.values,a))),u=r?i(kF(n.errors,a)):void 0,c=t?o(kF(n.touched,a)):void 0;return hF(u)&&(u=void 0),hF(c)&&(c=void 0),uF({},n,{values:s,errors:r?bF(n.errors,a,u):n.errors,touched:t?bF(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(zF(t),[sF(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return UF(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return jF(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return BF(n,e,t)}),(function(t){return BF(t,e,null)}),(function(t){return BF(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return VF(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(fF(n)),n.pop=n.pop.bind(fF(n)),n}cF(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!EO()(kF(e.formik.values,e.name),kF(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?zF(n):[];return t||(t=r[e]),dF(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,r=t.render,i=t.children,a=t.name,o=uF({},e,{form:lF(t.formik,["validate","validationSchema"]),name:a});return n?(0,nt.createElement)(n,o):r?r(o):i?"function"===typeof i?i(o):mF(i)?null:nt.Children.only(i):null},t}(nt.Component);qF.defaultProps={validateOnChange:!0};var WF=function(e){function t(){return e.apply(this,arguments)||this}cF(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return kF(this.props.formik.errors,this.props.name)!==kF(e.formik.errors,this.props.name)||kF(this.props.formik.touched,this.props.name)!==kF(e.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(e).length},n.render=function(){var e=this.props,t=e.component,n=e.formik,r=e.render,i=e.children,a=e.name,o=lF(e,["component","formik","render","children","name"]),s=kF(n.touched,a),u=kF(n.errors,a);return s&&u?r?dF(r)?r(u):null:i?dF(i)?i(u):null:t?(0,nt.createElement)(t,o,u):u:null},t}(nt.Component),HF=FF(WF),KF=(nt.Component,_i("user/sendingMessage",function(){var e=E(_().mark((function e(t){var n,r,i,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.chatId,i=t.data,e.prev=1,PN(RN(ZN,"chats")),a=PN(RN(ZN,"chats/".concat(r,"/messages/"))),e.next=6,LN(RN(ZN,"chats/".concat(r,"/messages/").concat(a.key)),{senderId:n.id,messageId:a.key,message:i.message,timestamp:GN()});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()));var QF=function(e){var t=e.setShowChatMenu,n=e.prevMenu,r=b((0,nt.useState)({}),2),i=r[0],a=(r[1],Rn((function(e){return e.account})).user),o=Et().chatId,s=Nn(),u=function(){var e=E(_().mark((function e(r,u){var c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.message.trim().length){e.next=3;break}return GR("Message cannot be empty","error"),e.abrupt("return");case 3:c=Lr(Lr({},i),r),s(KF({chatId:o,user:a,data:c})),t(!1),n.forEach((function(e){e.removeAttribute("data-foo")})),u();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,aO.jsx)("div",{className:_O.wrapper,children:(0,aO.jsx)(NF,{initialValues:{message:""},onSubmit:function(e,t){var n=t.resetForm;return u(e,n)},children:function(){return(0,aO.jsxs)(MF,{className:_O.form,children:[(0,aO.jsx)(LF,{className:_O.message,name:"message",as:"textarea"}),(0,aO.jsx)("button",{className:_O.submit,type:"submit",children:"Submit"})]})}})})},GF=_i("user/removeMessage",function(){var e=E(_().mark((function e(t){var n,r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.currentChat,i=t.userId,e.prev=1,n.senderId!==i){e.next=5;break}return e.next=5,DN(RN(ZN,"chats/".concat(r.chatId,"/messages/").concat(n.messageId)));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),GR("An error occurred, please try again later","error");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}());var YF=function(){var e=Rn((function(e){return e.account})),t=e.user,n=e.messages,r=e.chats,i=Rn((function(e){return e.main})).isOpenChatList,a=b((0,nt.useState)(!1),2),o=a[0],s=a[1],u=b((0,nt.useState)(!1),2),c=u[0],l=u[1],f=b((0,nt.useState)(null),2),h=f[0],d=f[1],p=Et().chatId,v=(0,nt.useRef)(null),y=(0,nt.useRef)(0),m=(0,nt.useRef)(0),g=Nn(),k=_t(),_=r.find((function(e){return e.chatId==p})),w=document.querySelector('[data-foo="menu"]'),E=document.querySelectorAll('[data-foo="menu"]');(0,nt.useEffect)((function(){g(bO(p))}),[p]),(0,nt.useEffect)((function(){r.some((function(e){return e.chatId===p}))||k("/book-shelf/messages")}),[p,r]),(0,nt.useEffect)((function(){var e=v.current;e&&(y.current>0?e.scrollTo({top:e.scrollHeight-e.clientHeight,behavior:"smooth"}):0===y.current&&(e.scrollTop=e.scrollHeight-e.clientHeight,y.current+=1))}),[n]),(0,nt.useEffect)((function(){y.current=0,m.current=0}),[p]);var T=function(){var e=v.current;if(e){var t=e.scrollTop,n=e.clientHeight,r=e.scrollHeight;m.current=e.scrollTop,r-t-n<=300?s(!1):t>n/2&&s(!0)}};return(0,nt.useEffect)((function(){var e=v.current;if(e)return e.addEventListener("scroll",T),function(){e.removeEventListener("scroll",T)}}),[]),(0,aO.jsxs)("div",{className:vO.window,children:[(0,aO.jsxs)("div",{className:vO.head,children:[i?(0,aO.jsx)("img",{src:mO,className:vO.chatListImg,onClick:function(){return g(cR(!1))},alt:""}):(0,aO.jsx)("img",{src:yO,className:vO.chatListImg,onClick:function(){return g(cR(!0))},alt:""}),(0,aO.jsx)("h3",{children:null===_||void 0===_?void 0:_.bookTitle})]}),(0,aO.jsxs)("div",{ref:v,className:vO.chatWrapper,onClick:function(e){l(!1)},children:[(0,aO.jsxs)("ul",{className:vO.chat,children:[n.map((function(e){return(0,aO.jsx)("li",{className:nn()(vO.receiveUser,x({},vO.sendingUser,e.senderId===t.id)),onClick:function(n){return function(e,n){d(n),e.stopPropagation(),n.senderId===t.id?(l(!c),e.currentTarget.setAttribute("data-foo","menu"),c&&E.forEach((function(e){e.removeAttribute("data-foo")}))):(l(!1),c&&E.forEach((function(e){e.removeAttribute("data-foo")})))}(n,e)},children:(0,aO.jsx)("span",{className:vO.message,children:e.message})},e.messageId)})),c&&w&&(0,cn.createPortal)((0,aO.jsx)("div",{className:vO.chatMenu,children:(0,aO.jsx)("ul",{className:vO.chatMenuList,children:(0,aO.jsxs)("li",{className:vO.chatMenuItem,onClick:function(){h&&(g(GF({currentChat:_,message:h,userId:t.id})),d(null))},children:[(0,aO.jsx)("img",{src:kO,alt:""})," ",(0,aO.jsx)("span",{children:"Remove"})]})})}),w)]}),(0,aO.jsx)("img",{src:gO,className:nn()(vO.scrollToBottomBtn,x({},vO.scrollToBottomBtnActive,o)),onClick:function(){var e=v.current;e&&e.scrollTo({top:e.scrollHeight-e.clientHeight,behavior:"smooth"})}})]}),(0,aO.jsx)(QF,{setShowChatMenu:l,prevMenu:E})]})},XF={wrapper:"styles_wrapper__zAueH",title:"styles_title__c3Vqm",addBook:"styles_addBook__aK3TL"};var JF=function(){return(0,aO.jsxs)("div",{className:XF.wrapper,children:[(0,aO.jsx)("h3",{className:XF.title,children:"It`s still empty here"}),(0,aO.jsx)(Jt,{className:XF.addBook,to:"/book-shelf/new-book",children:"New Book"})]})},$F={bookshelfWrapper:"styles_bookshelfWrapper__sCrPF"};var ZF=function(e){var t=e.children;return(0,aO.jsx)("div",{className:$F.bookshelfWrapper,children:t})},ej={card:"styles_card__oVuyb",front:"styles_front__yQ3q4",back:"styles_back__ByZlr",count:"styles_count__4gO86",favoriteStar:"styles_favoriteStar__MfT+h",editIcon:"styles_editIcon__DGrMF",titleWrapper:"styles_titleWrapper__HfgME",title:"styles_title__1qnYf",description:"styles_description__W1zDt",delete:"styles_delete__r1or2",favoriteActive:"styles_favoriteActive__KQmlx",isAuth:"styles_isAuth__aZ3Ox",publicImg:"styles_publicImg__hw+vo",publicActive:"styles_publicActive__cfFDi",bookPanel:"styles_bookPanel__jVK6b",like:"styles_like__Bb922",unlike:"styles_unlike__GDdOI",messageForUser:"styles_messageForUser__dwbyG",dontCurrentUser:"styles_dontCurrentUser__USVoN"};var tj=n.p+"static/media/star-svgrepo-com.daa0330fa0faf9acb38d467583505d44.svg";var nj=function(e){var t=e.addFavoriteBook,n=e.book,r=e.isAuth,i=e.checkCurrentUser;return(0,aO.jsx)("img",{onClick:function(){return t(n)},className:nn()(ej.favoriteStar,x({},ej.isAuth,!r),x({},ej.dontCurrentUser,!i),x({},ej.favoriteActive,n.favorite)),src:tj,alt:""})},rj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrUlEQVR4nO2V34tNURTHT/kRRWhC3dn7XvFAU1Nq8uJHvIg/YK671rlkeJhSJOZF+VmSF0948OtBEfIjShTFUFJTZ61jxsiPRFIjv40HDerSuvfc6cw5+5x93UteZtd+OXuv9Vnru797H8cZHf9zKKAdCnhQIT/XyAezbt+0WmN1wZujgS8poLca+L1C3pkakFnT06SQz2mgrxr514gJ1NOS7x9vLTjvNwvMEP86W+QWc6XAZ2MB4en6HVYw8JGkeAV0JRYgUiqk78lgKmVd6rSCkW6m5HhnAPuLUrtF2l7euLR7rEberJBJI39TyG8U0KZqntza7gkK6YaxY6ShOBi4PQX60MmfH9PW6Y1LSqqRX2nkDZJr5uoHM8SYcan5sUkiSAFvDfZsTFdFpre44hc6YTDYMwPYL9aQ7I4NLOYKilxnMNcjU8exjdWZQ29eAH5i7RjoWiWftyK6lnWpLQbWyNuSk/Hyyh66bgfzoTIYGCPf7yZdgwspZ7zHfhxBV8DtQZEHIkpkjODyNSiwq5GOKeCrkYSHgy667OYKjAi0P/zdCI0OuTbhoOpTKSbTyD8TjYU0lHH9+UHHZyKmw1SoQBTw0YhMx0URUycR1+6rqOdPVUCfI0qUNPBFXfCWxKTWQFvkMU9w6+nQ0/rSAH0hQFtxujJPyQvozHIpp5GeWs6upIBWSuJMsXdudF2+yVpzwV+mgH/YvKCAu+R+Xq7BNCU5gtD1G7Eeuh0n7blYFPTFCB9Tq0O+pVbxguHkrtca2+N6rdX1bIEXaqDblpxfanL6sA9cv0MBDxikG5DXT+XvT3T+1pie75+kkfdq4A/2s6NP4u6m9fcmNwSdnfemBP9e+7mNlJIktm6wAt79p9AQfFfdYA3cVy9YI/c20vFgAx3X7tzR4fzD8RsQPgDO809zewAAAABJRU5ErkJggg==";var ij=function(e){var t=e.setPublicBook,n=e.book,r=e.isAuth,i=e.checkCurrentUser;return(0,aO.jsx)("img",{onClick:function(){return t(n)},className:nn()(ej.publicImg,x({},ej.isAuth,!r),x({},ej.dontCurrentUser,!i),x({},ej.publicActive,n.seesEveryone)),src:rj,alt:""})},aj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO2SwQnCQBBFH+LBMqxAbMACIgQvgl5zswQrsAhLsAsTPNuD8WIBnhJYmduwJMqSGVDww7/M7L63h4UvzQzIgZEHfAs0QAD21vCNgkuPlvB1BJfuPOEBmHvCn8B4KHzVA5eeLV5f98A/Ve5lGnRRy0rNw4DetCBeWgjCzwvu3oKDp6AFpp6Ck4Z7CBaegmsMtxYUKYI6Ef4AJl2CSh0q1TxLkMi/X3bB/+FdXlQTCqUh2JuTAAAAAElFTkSuQmCC";var oj=function(e){var t=e.setLike,n=e.book,r=e.checkCurrentUser;return(0,aO.jsx)("img",{onClick:function(){return t(n)},className:nn()(ej.like,x({},ej.dontCurrentUser,r)),src:aj,alt:""})},sj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVR4nO3SMQrCQBRF0QsJrsTCRrIFU7oDGwt3I1gL2UAqqyzF1kIQBIv0go0/VUAGJ2TCf2DhhV8NvNMM/EvIPq5vA7TB27d7AOspQDtivL87MEsFLPG2auCsBgxYqYFGDbyBhRIw4KgGbmrA1MB1LPCcOB79qmHVwNAShzKgjgB7D2AIueBYFkHmnkgOnAJg5wmEyAsoEJQDB6BUjP9eHSR05B+39/uOAAAAAElFTkSuQmCC";var uj=function(e){var t=e.setUnlike,n=e.book,r=e.checkCurrentUser;return(0,aO.jsx)("img",{onClick:function(){return t(n)},className:nn()(ej.unlike,x({},ej.dontCurrentUser,r)),src:sj,alt:""})},cj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVR4nOWQPQ5BURBGT6G1BPZAyx4o6URN8wrWQMse2IXETyfmvij0lCRKEhLyEoXu3pkbBb5kkmlmTr4DfxEHiYOzg8drsj1RPxJYvD0xjcDi04A5vx0H4whFIy9AoB/hv+cFpNCMaNAIUVSNaFDxAtZQtAK2UPACZpBzcDMA7tktIRE4GPTsCY2DlaHBMhggMDU0mGgaDA0NBhpA19Cgo1FU1wI2UAsGpFA2KCoFA3aQF7gq9FyyGzRx0BY4BQCOAi3V86/KE/DxxWD/dWplAAAAAElFTkSuQmCC";var lj=function(e){var t=e.book,n=e.isAuth,r=e.checkCurrentUser,i=e.user,a=Nn();return(0,aO.jsx)("img",{onClick:function(){return a(YR({book:t,user:i}))},className:nn()(ej.delete,x({},ej.isAuth,!n),x({},ej.dontCurrentUser,!r)),src:cj,alt:""})},fj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVR4nO1UvU7DQAyOBBN/CwLU1peJB0AgsTKDOnQptdOKgRdoNzZg7CuwMlWdkHiALgz83DkMCFbEzwswg4ocShp6aZQ2IHXAkpXLWfd9/mzfOc6/TYwViHcUmRdF3M3kaJ4LFd62CAD5ITM4fTkQ31sECk0eiE8zgyOf58ratQgW9y/mAyXkl0TmOKUB8kuCsVS+m7NLRPyqiPdknSvqGUBuKuL3FMAfgHyyWr1ckLOup4uA/GiXKEZi3vPXFJqrBHAfyN8MgKs6Fy3xUILewTdFXHfK7SlxhbrR2+vHUTfCOHE9GgfiVjJBX412PbMRqKlcK0BzJi7rIOtdvQ7ENwMT1HK2OtOpCOJqnNQjQNOOBU8koNCfCmhqQH5V1jGzH2YOxIdAbFZqt8ujEHQTLlYILuoUmU5v32QmgGjmyEcCLpnLV/4zEYAF/h0LSGZH7UF3WENdzxwMTF/TbvIIzwMMzTzI/jh2iuSJTUMC44CPa+pnWfoN/W0C+AvwibFPuwaHr4OEoA0AAAAASUVORK5CYII=";var hj=function(e){var t=e.book,n=Rn((function(e){return e.main})).visibleMessageForm,r=Rn((function(e){return e.account.user})).id,i=On().isAuth,a=Nn(),o=_t();return(0,aO.jsx)("img",{onClick:function(){var e=t.usersWhoSendMessage.some((function(e){return e===r}));i?e?o("/book-shelf/messages/"):(a(iR(!n)),a(oR(t))):GR("Only registered users can write messages","error")},className:ej.messageForUser,src:fj,alt:""})},dj=_i("user/setFavoriteBook",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.book,i=t.library,a=t.user,o=n.dispatch,e.prev=2,s=i.map((function(e){return e.id==r.id?Lr(Lr({},e),{},{favorite:!e.favorite}):e})),o(eO(s)),u=Gm(JN,"books-user-".concat(a.id),"".concat(r.id)),c=Gm(JN,"books-sees-everyone","".concat(r.booksEveryoneCollectionID)),e.next=9,fk(u,{favorite:!r.favorite});case 9:if(!r.seesEveryone){e.next=12;break}return e.next=12,fk(c,{favorite:!r.favorite});case 12:o(eR()),o(dR(a)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}()),pj=_i("main/setPublic",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l,f,h,d,p;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.book,i=t.library,a=t.user,o=n.dispatch,e.prev=2,s=i.map((function(e){return e.id==r.id?Lr(Lr({},e),{},{seesEveryone:!e.seesEveryone}):e})),u=Gm(JN,"books-user-".concat(a.id),"".concat(r.id)),e.next=7,fk(u,{seesEveryone:!r.seesEveryone});case 7:if(o(eO(s)),o(dR(a)),!r.seesEveryone){e.next=14;break}return e.next=12,hk(Gm(JN,"books-sees-everyone","".concat(r.booksEveryoneCollectionID)));case 12:e.next=28;break;case 14:return c={id:r.id,userEmail:a.email,userId:a.id,title:r.title,description:r.description,cover:r.cover,favorite:r.favorite,seesEveryone:!r.seesEveryone,usersWhoLikesBook:[],usersWhoUnlikesBook:[],usersWhoSendMessage:[],rating:0},e.next=17,dk(Qm(JN,"books-sees-everyone"),c);case 17:return l=e.sent,f=Gm(JN,"books-sees-everyone","".concat(l.id)),e.next=21,lk(f,{booksEveryoneCollectionID:l.id},{merge:!0});case 21:return e.next=23,lk(u,{booksEveryoneCollectionID:l.id},{merge:!0});case 23:h=s.map((function(e){return r.seesEveryone?Lr(Lr({},e),{},{booksEveryoneCollectionID:l.id}):e})),d=s.map((function(e){return e.favorite?Lr(Lr({},e),{},{booksEveryoneCollectionID:l.id}):e})),p=d.filter((function(e){if(e.favorite)return e})),o(rO(p)),o(eO(h));case 28:o(hR(a.id)),o(eR()),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 36:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(t,n){return e.apply(this,arguments)}}()),vj=_i("user/setLikeBook",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isAuth,i=t.book,a=t.user,o=n.dispatch,e.prev=2,r){e.next=6;break}return GR("Only registered users can rate","error"),e.abrupt("return");case 6:if(s=i.usersWhoLikesBook.some((function(e){return e===a.id})),u=i.usersWhoUnlikesBook.some((function(e){return e===a.id})),c=Gm(JN,"books-user-".concat(i.userId),"".concat(i.id)),l=Gm(JN,"books-sees-everyone","".concat(i.booksEveryoneCollectionID)),s||!u){e.next=22;break}return e.next=13,fk(l,{rating:i.rating+2,usersWhoLikesBook:vk(a.id)});case 13:return e.next=15,fk(c,{rating:i.rating+2,usersWhoLikesBook:vk(a.id)});case 15:return e.next=17,fk(l,{usersWhoUnlikesBook:yk(a.id)});case 17:return e.next=19,fk(c,{usersWhoUnlikesBook:yk(a.id)});case 19:GR("Your rating has been credited","success"),e.next=35;break;case 22:if(s){e.next=30;break}return e.next=25,fk(l,{rating:i.rating+1,usersWhoLikesBook:vk(a.id)});case 25:return e.next=27,fk(c,{rating:i.rating+1,usersWhoLikesBook:vk(a.id)});case 27:GR("Your rating has been credited","success"),e.next=35;break;case 30:return e.next=32,fk(l,{rating:i.rating-1,usersWhoLikesBook:yk(a.id)});case 32:return e.next=34,fk(c,{rating:i.rating-1,usersWhoLikesBook:yk(a.id)});case 34:GR("Your rating has been deleted","success");case 35:o(eR()),e.next=42;break;case 38:e.prev=38,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 42:case"end":return e.stop()}}),e,null,[[2,38]])})));return function(t,n){return e.apply(this,arguments)}}()),yj=_i("user/setUnlikeBook",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isAuth,i=t.book,a=t.user,o=n.dispatch,e.prev=2,r){e.next=6;break}return GR("Only registered users can rate","error"),e.abrupt("return");case 6:if(s=i.usersWhoUnlikesBook.some((function(e){return e===a.id})),u=i.usersWhoLikesBook.some((function(e){return e===a.id})),c=Gm(JN,"books-user-".concat(i.userId),"".concat(i.id)),l=Gm(JN,"books-sees-everyone","".concat(i.booksEveryoneCollectionID)),s||!u){e.next=22;break}return e.next=13,fk(l,{rating:i.rating-2,usersWhoUnlikesBook:vk(a.id)});case 13:return e.next=15,fk(c,{rating:i.rating-2,usersWhoUnlikesBook:vk(a.id)});case 15:return e.next=17,fk(l,{usersWhoLikesBook:yk(a.id)});case 17:return e.next=19,fk(c,{usersWhoLikesBook:yk(a.id)});case 19:GR("Your rating has been credited","success"),e.next=35;break;case 22:if(s){e.next=30;break}return e.next=25,fk(l,{rating:i.rating-1,usersWhoUnlikesBook:vk(a.id)});case 25:return e.next=27,fk(c,{rating:i.rating-1,usersWhoUnlikesBook:vk(a.id)});case 27:GR("Your rating has been credited","success"),e.next=35;break;case 30:return e.next=32,fk(l,{rating:i.rating+1,usersWhoUnlikesBook:yk(a.id)});case 32:return e.next=34,fk(c,{rating:i.rating+1,usersWhoUnlikesBook:yk(a.id)});case 34:GR("Your rating has been deleted","success");case 35:o(eR()),e.next=42;break;case 38:e.prev=38,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 42:case"end":return e.stop()}}),e,null,[[2,38]])})));return function(t,n){return e.apply(this,arguments)}}()),mj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgklEQVR4nO2TwQnAIAxF35LFg13AHQq6T8dxkPauYA+NIOKt8VDwgaA5vB+CgcXLAdyAYQIBKHIysM+QJ+Bs7ka7cye1GnJpygsQJSTJ+9CQJ5HGLixoyY3UnLY8A1ZqWzMWv+R2jeX/v4VmYeoSmUb+aYn6APXOK2VwPIpMlS8Y8QBWK2Wx+gsuywAAAABJRU5ErkJggg==";var gj=function(e){var t=e.book,n=e.isAuth,r=e.checkCurrentUser,i=e.setModalWisible,a=e.modalWisible,o=Nn();return(0,aO.jsx)("img",{onClick:function(){o(oR(t)),i(!a)},className:nn()(ej.editIcon,x({},ej.isAuth,!n),x({},ej.dontCurrentUser,!r)),src:mj,alt:""})},kj={modalWrapper:"styles_modalWrapper__QZYee",modal:"styles_modal__Qm4us",form:"styles_form__w+Pnm",title:"styles_title__yVxpG",description:"styles_description__CNb7M",submit:"styles_submit__66CGC"},bj=_i("user/updateBook",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l,f,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.user,i=t.book,a=t.values,o=t.updatedBook,s=n.dispatch,u=Gm(JN,"books-user-".concat(r.id),"".concat(i.id)),c=Gm(JN,"books-sees-everyone","".concat(i.booksEveryoneCollectionID)),!a.title){e.next=10;break}return e.next=7,lk(u,{title:a.title},{merge:!0});case 7:if(!i.seesEveryone){e.next=10;break}return e.next=10,lk(c,{title:a.title},{merge:!0});case 10:if(!a.description){e.next=16;break}return e.next=13,lk(u,{description:a.description},{merge:!0});case 13:if(!i.seesEveryone){e.next=16;break}return e.next=16,lk(c,{description:a.description},{merge:!0});case 16:if(!o){e.next=25;break}if(l=RN(ZN,"users/".concat(r.id,"/chats/").concat(o.secondUserChatId)),f=RN(ZN,"users/".concat(o.fromUserId,"/chats/").concat(o.firstUserChatId)),!a.title){e.next=25;break}return h={bookTitle:a.title},e.next=23,MN(l,h);case 23:return e.next=25,MN(f,h);case 25:s(hR(r.id)),s(eR()),s(dR(r));case 28:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var _j=function(e){var t=e.book,n=e.setModalWisible,r=Rn((function(e){return e.account})),i=r.user,a=r.chats,o=Nn();return(0,aO.jsx)("div",{className:nn()(kj.modalWrapper),onClick:function(){return n(!1)},children:(0,aO.jsx)("div",{className:kj.modal,onClick:function(e){return e.stopPropagation()},children:(0,aO.jsx)(NF,{initialValues:{title:"",description:""},onSubmit:function(e,r){return function(e,r){console.log(2);var s=a.find((function(e){return e.bookId===t.id}));console.log(s),o(bj({book:t,user:i,values:e,updatedBook:s})),n(!1),r()}(e,r.resetForm)},children:function(){return(0,aO.jsxs)(MF,{className:kj.form,children:[(0,aO.jsx)(LF,{className:kj.title,name:"title",type:"text",placeholder:"Edit title"}),(0,aO.jsx)(LF,{className:kj.description,name:"description",as:"textarea",placeholder:"Edit description"}),(0,aO.jsx)("button",{type:"submit",className:kj.submit,children:"Edit book"})]})}})})})};var wj=function(e){var t=Rn((function(e){return e.account})),n=t.user,r=t.library,i=b((0,nt.useState)(!1),2),a=i[0],o=i[1],s=Nn(),u=On(),c=u.isAuth,l=u.id===e.userId,f=function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(dj({book:t,library:r,user:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(pj({book:t,library:r,user:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(vj({isAuth:c,book:t,user:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(yj({isAuth:c,book:t,user:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsxs)("div",{className:ej.card,children:[(0,aO.jsxs)("div",{className:ej.front,children:[(0,aO.jsxs)("span",{className:ej.count,children:[e.rating,"\u2b50"]}),(0,aO.jsx)("img",{src:e.cover,alt:""})]}),(0,aO.jsxs)("div",{className:ej.back,children:[(0,aO.jsx)("div",{className:ej.titleWrapper,children:(0,aO.jsx)("h3",{className:ej.title,children:e.title})}),(0,aO.jsx)("p",{className:ej.description,children:e.description}),(0,aO.jsx)(nj,{addFavoriteBook:f,book:e,checkCurrentUser:l,isAuth:c}),(0,aO.jsx)(ij,{setPublicBook:h,book:e,checkCurrentUser:l,isAuth:c}),(0,aO.jsx)(gj,{book:e,checkCurrentUser:l,isAuth:c,setModalWisible:o,modalWisible:a}),(0,aO.jsx)(lj,{book:e,user:n,checkCurrentUser:l,isAuth:c}),(0,aO.jsxs)("div",{className:nn()(ej.bookPanel,x({},ej.dontCurrentUser,l)),children:[(0,aO.jsx)(oj,{setLike:d,book:e,checkCurrentUser:l}),(0,aO.jsx)(hj,{book:e}),(0,aO.jsx)(uj,{setUnlike:p,book:e,checkCurrentUser:l})]})]})]},e.id),a&&(0,aO.jsx)(_j,{book:e,setModalWisible:o})]})};var Ej=function(){var e=Rn((function(e){return e.main})).search,t=Rn((function(e){return e.account})),n=t.user,r=t.library,i=b((0,nt.useState)([]),2),a=i[0],o=i[1],s=Nn();return(0,nt.useEffect)((function(){s(hR(n.id)),s(aR(""))}),[]),(0,nt.useEffect)((function(){!function(){var t=r.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));o(t)}()}),[e,r]),(0,aO.jsx)(aO.Fragment,{children:0===r.length?(0,aO.jsx)(JF,{}):(0,aO.jsx)(ZF,{children:0===a.length?r.map((function(e){return(0,aO.jsx)(wj,Lr({},e),e.id)})):a.map((function(e){return(0,aO.jsx)(wj,Lr({},e),e.id)}))})})};var xj=function(){var e=Rn((function(e){return e.account})),t=e.favoriteBooks,n=e.user,r=Nn();return(0,nt.useEffect)((function(){r(dR(n))}),[]),(0,aO.jsx)(aO.Fragment,{children:0==t.length?(0,aO.jsx)(JF,{}):(0,aO.jsx)(ZF,{children:t.map((function(e){return(0,aO.jsx)(wj,Lr({},e),e.id)}))})})},Tj={wrapper:"styles_wrapper__vVDEZ",title:"styles_title__TtNzN",error:"styles_error__GZ9Un",visibleNewBookMessage:"styles_visibleNewBookMessage__9fvqb"},Sj={wrapper:"styles_wrapper__cyCmx"};var Cj=function(e){var t=e.children;return(0,aO.jsx)("div",{className:Sj.wrapper,children:t})},Aj={nav:"styles_nav__0u5dM",link:"styles_link__GGvh7",item:"styles_item__-fKqG",titleBook:"styles_titleBook__vOJ26",removeChat:"styles_removeChat__kxEOV",activeLink:"styles_activeLink__9xNeC",isOpenNav:"styles_isOpenNav__qCPGt"},Ij=_i("user/removeChat",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chat,i=t.user,a=t.navigate,o=n.dispatch,e.prev=2,s=Gm(JN,"books-user-".concat(r.toUserId||r.fromUserId),"".concat(r.bookId)),u=Gm(JN,"books-sees-everyone","".concat(r.booksEveryoneCollectionID)),e.next=7,fk(u,{usersWhoSendMessage:yk(r.fromUserId)});case 7:return e.next=9,fk(s,{usersWhoSendMessage:yk(r.fromUserId)});case 9:return e.next=11,DN(RN(ZN,"chats/".concat(r.chatId)));case 11:return e.next=13,DN(RN(ZN,"users/".concat(r.fromUserId,"/chats/").concat(r.firstUserChatId)));case 13:return e.next=15,DN(RN(ZN,"users/".concat(r.toUserId,"/chats/").concat(r.secondUserChatId)));case 15:o(fR(i.id)),a("/book-shelf/messages",{replace:!0}),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0),GR("An error occurred, please try again later","error");case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}());var Nj=function(){var e=Rn((function(e){return e.account})),t=e.chats,n=e.user,r=Rn((function(e){return e.main})).isOpenChatList,i=function(e){return e.isActive?Aj.activeLink:Aj.link},a=Nn(),o=_t(),s=function(){var e=E(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(Ij({chat:t,user:n,navigate:o}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,nt.useEffect)((function(){a(cR(!1))}),[]),(0,aO.jsx)("nav",{className:nn()(Aj.nav,x({},Aj.isOpenNav,r)),children:(0,aO.jsx)("ul",{className:Aj.list,children:t.map((function(e,t){return(0,aO.jsxs)($t,{className:i,to:"/book-shelf/messages/".concat(e.chatId),children:[(0,aO.jsx)("li",{className:Aj.item,children:e.fromUserEmail?e.fromUserEmail:e.toUserEmail}),(0,aO.jsxs)("p",{className:Aj.titleBook,children:["Book: ",e.bookTitle]}),(0,aO.jsx)("img",{onClick:function(){return s(e)},className:Aj.removeChat,src:cj,alt:""})]},t)}))})})};var Rj=function(){var e=Rn((function(e){return e.account})),t=e.chats,n=e.user,r=Nn();return(0,nt.useEffect)((function(){r(fR(n.id))}),[]),(0,aO.jsx)(aO.Fragment,{children:0==t.length?(0,aO.jsx)("div",{className:Tj.wrapper,children:(0,aO.jsx)("h3",{className:Tj.title,children:"It is still empty here, write a review about the book to start communication"})}):(0,aO.jsxs)(Cj,{children:[(0,aO.jsx)(Nj,{}),(0,aO.jsx)(Mt,{})]})})};var Oj=function(){return(0,aO.jsxs)("div",{className:"lds-roller",children:[(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{}),(0,aO.jsx)("div",{})]})},Pj={img:"styles_img__OEJMF",title:"styles_title__SXq3A",titleDescription:"styles_titleDescription__OthN2",instruction:"styles_instruction__+JAIa",descriptionBook:"styles_descriptionBook__On0dN",error:"styles_error__chExn",errorMassage:"styles_errorMassage__PETwP",addCover:"styles_addCover__x-XXL",checkboxContainer:"styles_checkboxContainer__z7Gyv",checkbox:"styles_checkbox__hZmLJ"},Dj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHJklEQVR4nO2dXVNVVRyHAaV8AS0VmJG8ETgcDwhYF/YdulPJ1DI1LbNMM+W2Gbhq8oXKtDRTjNfD2wEREM/WUjFJlBpvnKapSUVNXkT8AKvZ/3X22mvvvQ57n/f/mtlr5vkCz7PmN2v2zU5Lc4973OMe97jHPe5xj3vc455Izr47y9KrRtrSq0am06t+JzyvXZqKP4rOq8BTMcHwrOK5qDFpYfWFJ2RN4A754nQD6eoKkKtDw6T++l3y+tFBklejkLzq4HRejdK5tFopTqX8CbP4hARQkiPdwABldf9jcra7jwwPD5PR0VEyOj5FKmqv0Qg1CsmtDk4urelflnT/9OaL5cclgMJLj1x8LNIrTGzq+5MFeP78OfHf/pcFoBEUfyoCTMc9gBKbdLH46KTzrB4YMwR4NDFlCJBXozxLQYDw8tOrRlDu+iqT+Ao7Lkww+AAqpgAESYARkn6AEpfbHkzOxBjRpUsSQJeeceA2I+ETczGe0o23nac8BMIAmnhdesaBWyRjPyWxEzOZFOmMfoQBDNKZ+GGGDLteMZP4fiMIA+i3nRefsf8mmfXZzZQ/HSsc7LqddNwBBNIpvwGyTUx5WMYBhAGs0ilDZNa+IekmplwgHegbJ2V9CANYxO8b4rgh3cSU8+JD0nkQBtBvuyZdZTbwaxKejhNxnRiRdNwBBNJnf6pxXYpdL3cgHuhFGEAkXWdQil0vcyBeA18Akfi9g0Dm3kEpdr3MRrrOGMYAVumZe68xUExMn/OJEUlfyYEvABOvS8/cc5URD+kVCd51Ebx04DwFXQBdvC49c88VRnKkT8RlYsJJ58EXYI9Y/Auf/AI43fX8U/dSip14xAGs0ik/A053PT/VAWaQjjqASDqw+zLgdGLyMQfoGSOlIRAGsEqnXCIv7r7keNfzsQXgpJf2PGHgDCAQD3ysJOyTQFkET0e7XRdLN4rHG0AgXSeI4um40gY76cA5CroAIumMjy4m7JNAWYzSw01MOPF4Awikq8wBBhBPzBPH0lVKQiAMoEoPctKpeGDXQMI+CaxM0MSIpJegDmCWDuIvMFDveo9D8d0q/wHoAoikz9nVz5Bh10vD3HZePN4AAvFzP1TpAzA8HUtjlI48gFU6pRfAtuulUUjX8HUhDCCSPnenynkA7cR0O5fOgzBALyf+PGPezh4Aw9OxJELxZum4A+wUi5/3gco5FE/Hkihvu5XHGANYpet0o3g6lsQknYr3BSjoAoikA++rdEk3MT6BdB6EAazS5zMCaKSXdEcvfQUHvgAgvZuTTsXP30GRYdd9XTNLZ3QiDGCQzsR3MmTYdd9M0kPiNRAGsEqfv6MDyNreIcWur7CRjjuAQHrW9nYGiokJxCad8ghAGECTbhSftb2NZL3XlrBPAr54TYwD6SreDgq6ACLplFYApfRAZNJ5EAZo48RT6dmAn2Rv80ux6yt46WHE4w0Qkk7F+5n47G0tgAy77rWRjjoAf9t58ZRmKXbda0e7Dr4AAunZWykLtjbhm5iOyKWrFAMPMQawStdplGti2sXSefAFAOkm8VsaQzSkbGK8Md32h1baKOgC8LedF6+B4enojfK28+LxBhBIX7Clnix8l4Lh6eiNUTryAFbpC9/9iZHyXe+IbGJmwoMxgC7dKH7h5rMAhqejN5z0dmfSPa06CANYpVPqyEub61A8HYujkW4QP8pAGMAqHXjnDIDh6VgcwcSIpOMOsLmOE0+lU04DMuy6p9VePOBHGIC/7bx44O0fpdh1j410HnwBBNJVXgZOodn1YocTI5JexIEwgFU6Y9MPUuy6RyCel446gEi6zkkpdt1jIx1oeQAgDCAWr7Jo48nkPh1bY58YkXQefAFM0qn4Eww0E+N3Kl0sHnEAq/RFG79nJH5iRmOfGBvphRrNCAOIpC/a8B0j1U/HoggnxiK+2QjCAJp0o/jFG44Difok4Injroe77SLwBRBIX/yWyjFAtokpnJH7GAMc58Qf4/gWwPB0LIpgYkTSgSYKugD8bdekA+uPAhiejkVR3nZNukpBCIQBOPHrqfgljG+S9HR8ED/pzVbpBagDCKQDb6p8LcWuF4a57VIEEEnX+UqKXS+0kV7QqIMwgFh8TiUF3cQ0RS4ddwBOui6+liHVxDSG4x6wvPEexgBW6TmVRyjrjkg3MQUm8cs1GijoAuRU1k6bpeesO8yQbWIKeOmceBVfwz+GAA/NP3KrVqaSHmDJusOdVLouPhc4RHLXHkLxdCyIYGLM0nnWtvxhCNByy/Qrw5pgS9IDLK48Upyz9vBkDiedchBI+a43xSad3f76v8jZQC8LcH/sKSmvvarLr1bG8z+//EpaKs7S9QeX5a455M9d8+UzTbwhANZdb7QX763/m7xRN0QOnjgDv7O9cuMmOXPtLi//mXrzUybfPe5xj3vc4x73uMc97nFPmqznf6A/o0Z5VGHzAAAAAElFTkSuQmCC";function Lj(e){var t=e.setFieldValue;return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)("img",{src:Dj,alt:"",style:{marginTop:"10px"}}),(0,aO.jsx)("h3",{className:Pj.title,children:"Add a cover!"}),(0,aO.jsx)("p",{className:Pj.titleDescription,children:"It will make your library more convenient and stylish!"}),(0,aO.jsx)("p",{className:Pj.instruction,children:"Click on the book"}),(0,aO.jsx)("div",{className:Pj.checkboxContainer,children:(0,aO.jsxs)("label",{htmlFor:"seesEveryone",children:["Share with everyone",(0,aO.jsx)(LF,{id:"seesEveryone",name:"seesEveryone",type:"checkbox",className:Pj.checkbox})]})}),(0,aO.jsx)("p",{className:Pj.errorMassage,children:(0,aO.jsx)(HF,{name:"cover"})}),(0,aO.jsx)("input",{type:"file",name:"cover",onChange:function(e){var n;t("cover",null===(n=e.target.files)||void 0===n?void 0:n[0])},className:Pj.addCover})]})}var Mj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKIklEQVR4nO1de1BU1xk/00wnSVP/tGaSdKadPsx0pulMOh0HLAiCCajR+saIpj7GxokBUV4q2EQ0yEujAoItoBJ8RKk2gARlN8RVUAHlsSg+Y1CRKLCcswOxrfrrfHcvsi6X9+Ou8Xwzv+Hu3nPP+c73u98557t7+Q5jUqRIkSJFihQpUqRIkSJFihQpUoZDbt++/ROLxfKm1Wr1E0JECiHShRC5nPNzQohvhRDNQgiLEAKc8wf0mXN+SwhxTQhRLoQoFkLkcM4ThRChVqt1DufcxWq1/qy/OtG1ah2kUyjnPInaUNuiNq+pOjSrOkHVkXS9oZbJVfsSSTpRH6mvzNmkra3t55zzhUKIDM55lV2HBh2c83ohRB7nPEoIMU0IMVLL+EKI6ZzzDWrZ+iHU53/UZ7XvC1tbW18bdgIA/JhzPlG9g2uHqrOidwZ5xDmvEEJsJnDOK+k7nXW6KITYzjn3JVsNGRFWq/UNzvkOIUSjnh0WTxcayWZWq/X3g0YEgBc45yl633niKYbqyUkD9hgAz3POjX1VoP72dyg+WYn9WccR+0kWQlcm428L4zBraiQmTwjDRO9QeLgEYPzYFcrnGe9EYM60v2Pxgk14f3E8IsJ2Ytvmg9j32TEYC0thrr6K5iZLvw1C11IdhuOlSp1bEz5X2qC2qE1qm3QgXUgn0m2Sd6jyeeaUSEV36gP1hfpUcqpK6WM/iMkeECnqaqTbRlpaWlBeegFpqTkIWr4N0ydHKB0abHi7BynGi47KxMEDRlRVXKYOanVaOXdwv0Epu2h+NLzdgoZEJyJx5YfbkbYzR7EB2aIXxMT2iwwa97oapu7dbULuFyexOiRVuYuGorMevQCRv+Gj3cjPK1ZAx9MnrdVNH7LFmpBUxTZkoy685H5LS8uv+uMdiZ1cv9mCLXH78bbnqu7vZo9gvDsvHitWZ2FjshHJ2VXYXXgd2WWNyL3YirzaNhjqgOPfPFQ+Hz5nwcEzd/FZUR0yCq5i694yrN96DEER+7BwaRKmT1sPj7GB/TfW2EC8M3U95i5OwtLQfVgZewzr0sqw6fBVxOfVYavhLhJPWJBythXpVQ+RYQZSS9uUz9uLGhH77+v4OLMKwZsNWBKchRl+8fAaF9xtm2SjLfEHFJtpELOtP4RcdKzo0/gDmo1PmbwOgauzsDWrFAfP3kPhjUeKwQcT+Ze+R3r+FUQlFmLZinRM8unaE3zeXov3lqdjVUIhorOvYGfZfcXIg4n0qkfYZryHyLRShaSJE9dp6kLzlYaX1PSVjAVaAd4Un/DHDc2eHa3cxQdONwy68Q29AJGeabyBiLhcxRvprg3YkIe4nBuKsQabgN7g08IGBMUU4C8zoztuVp9wLUIecM7n94oMIcSariYke+b1IMHQDfQgoDvY26qbCT68J894r7sVgiQEg00IiouLgzTJsFgsv+Sct2ldVPdtPVISD0tCzP0jJCXpCG7W1WsSYrFY7gcEBEzQ8o7PtS748mjJ40CuHV6ucsjK6IEQL4fJnQLNgqMlmqSUl5eXMMZ+8ZgMWhdrTeJUgafDcnO8SwA+cVul+5xhcPI5ZMOfVyq2srcd2bIg/7RWcP3Q19d3OWPspS4nchqmiNXHQZhrIDLdg3HOIxy1nuG6E2BwckLIRmSrTPcQTHMNfCJ41Bq+srOz9zLGxrYTcsyxwI7tHXMGVVimEtEOvQkwPAWEtKPUM0y5odvtmZp8pBMhNTU1lYwxP8bYT2n+uO1YYOG8jrV05riQJxqQhKBPhBDIU9rtucg/uhMhd+7caWKMzWWM/Y4Iue9Y4C2PjscjpR5hkhBz/z1E8RKPsCceq2istv6rEuLBeoo5HCuXHoI+E0LoKTZRCZkqCTE7FSFzJCFmpyJkriTELAl5ppa9tdJDIAmRgSGkhxjkkCXjkAw5h0BO6jJSh1xlyWWvkIFhhoxDns3fQ2plYAhJiAwMIT3EIIcsGRhmyDkEclKXgSHkKksue4UMDDNkHCIDQw/5mzpkpC5fJYV8dJLhBI9L5LOsOvlwUb5KapYeAvn4Xb5sDTmHyB+oIN/tNctVlvwJ10W+/Q4Zh8h/+oR8ycGsf3QuI/U6GanLSN0sPQQyUpeROuQcIiN1yEjdLFdZMlJ3kZE6nvk4pOAGkH0F2FMDJFcCcWXAhtPAR8XA2lNA2AlgZRGw4qsOBH8NhJuAyFPAxtPAlnIgpQrIvGCri+rs778j/LMKSKqw1RlzFogqsbVD7YV83VmXoCKbPmEmYI0JiDgFfFwCbDoLbCkDkitsdTptYPjFNWBXDZBQBqw9+WTnBhORp2xGpbZyrnVNSGqlTZeo00D4iaHThwhbX2JrK6VSZ0KOXLXd/WSkoerwih6wrhjYUQFFF/obfWZoCegJ5HHRZ226DDsheiN+9Dxs+u27mkh43V93/QZKiHA86Tu+I7d5hRN0ptYBu99Y0iUhmX9Yort+jjhvl8DM1yukExlNTU1t9oRccixAaejaK9jn3jnFn94ocwtGwmj/TmRsft0f551Q333j7FL8ze+c4u/mzZu37Ak56ljAPnHyHNfAx9lInQnn3IMVb6AhikDHzkgG2W52D0kwq6urz6mEzKS9Qj7ozNgdxbXsM5NmuYegQiP/okS4pg3IVuQZ9mRQUupbNxs6EbJr1640lZBJjLZ7oy3gepNIWU9Mdw3EEY0MqV2BytqnZ9UbZMtjX57RSqT8wM3N7QOVkHHtqcZ3as38BRqpxvWEl0sAdrgF40I3RNC5He6rOqX71hNkQ62s1gSTyXT88fzB2K8VQlpbW1/hnFu1LiAXo4TyNBn5eHa/s8xwYa5rIBLdgvGVRxgqPW2gY/qOzumtH4FWqmQzsp3WMKWurlrHjBmzTCWDEim/aJ8D3ofykGtdqDe+uX4L7y+K67NRliyIwdUrdbrrr4WWlpZHGzdujLXzjj912iWhvr4+iArqrazoYvs72hFt8ls9b0RGZdL/kTug7faGmozMzMwMOzJmMsZe0NxLxGQyLaBARW+lRRf4ruEe/nWoCGtDd2LerPVKpmgCHdN3hw8VKWX01rMr0DAVFRVl7xk0VL3a7W47fn5+Y4qKivJpBaB3B8QPBGRLk8lkcHV1XeZAxm9YL+VVT0/PpXv27Emrrq4+T9Fkc3Pz93p3TDwlIFuRzSjoIxvaLW3th6lXWB/lecbYH1Um5w43RowY4b93797dA7kRmpub/5OTk3No5MiRC/Togwb81Am8Y0XVD3lRdS0KXCYxxmYNZycmTJgQYDQa8xsbG1t7SwSVNRqNR728vD7UmYBZqs3GqTYcEBHOIj9ijI1++eWX/WNjYzcbjca8y5cvX2poaLhHG2sR6Ji+o3MxMTEJo0aN+quDYWYzxmgr7ef07swPSV5ijL3JGJvRhzt0hnqNbY8nKUMizzHGXlMN7a3su2HzgNnqsbd6jspIj5AiRYoUKexZkP8DHr2rr4n8EFMAAAAASUVORK5CYII=";function Fj(e){var t=e.errors;return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)("img",{className:Pj.img,src:Mj,alt:""}),(0,aO.jsx)("h3",{className:Pj.title,children:"What can you say about this book?"}),(0,aO.jsx)(LF,{name:"description",as:"textarea",className:nn()(Pj.descriptionBook,x({},Pj.error,null===t||void 0===t?void 0:t.description))}),(0,aO.jsx)("p",{className:Pj.errorMassage,children:(0,aO.jsx)(HF,{name:"description"})})]})}var jj={label:"styles_label__qFHa7",input:"styles_input__utr9d",inputError:"styles_inputError__juz5a",textError:"styles_textError__+yqRp"},Uj=["label","type","placeholder"];function Bj(e){var t=e.label,n=e.type,r=e.placeholder,i=vR(e,Uj),a=function(e){var t=TF(),n=t.getFieldProps,r=t.getFieldMeta,i=t.getFieldHelpers,a=t.registerField,o=t.unregisterField,s=pF(e)?e:{name:e},u=s.name,c=s.validate;return(0,nt.useEffect)((function(){return u&&a(u,{validate:c}),function(){u&&o(u)}}),[a,o,u,c]),u||iF(!1),[n(s),r(u),i(u)]}(i),o=b(a,2),s=o[0],u=o[1];return(0,aO.jsxs)(aO.Fragment,{children:[!!t&&(0,aO.jsx)("label",{className:jj.label,htmlFor:i.name,children:t}),(0,aO.jsx)("input",Lr({className:nn()(jj.input,x({},jj.inputError,u.error&&u.touched)),type:n,placeholder:r},s)),u.touched&&u.error?(0,aO.jsx)("p",{className:jj.textError,children:u.error}):null]})}var Vj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR4nO1bzWsTQRRfBL3Z/8FDTx4UclgQ2YIzaWFmU6sz0zaCB6FoqPGDxLaBqk01teZSPEjFg9+0SfDiqbK59r8QxIv+A0JBJfBkWiOztZqo+9Fk3w9+l2VnZ99vZ9682ffGshAIxN+AumqIcNkgTHwiTLQol7DfSJj4SphcsoJEKnXxIOXicdzGdU0mPwcqAO0h4/UIoEzeCc54Vw2ZHVwplGC91gDP86DZbMbGp89f7jb+zTBXKaXUIStIEC4b7U6uFkuxGm3y8vVZn/GBGm1CO7x2R/XG69gNb1NkL/wUQH95KyyQH94+7arYjTbJxrI7c57LL4EPexPmPFtbr8VueJuLleq2CLl8cdMKE9QQYPraTOzOby96nleORADKJVzKF+HFqzXY2HibDBFol+vvcGYcbi/e873Uwt1lGBmdiDgWEN8oE9VwBHDVnzvPTLRMAdI824orGApFgMMPqnB0Og8nJs8DyfjFODU6DkdmZ3wjwEnXgPIdbx01QxHAerbakaYAtgOREgXgOAIApwBHHwDoBDmuAoDLYFCgGAdIDIQoRoISQ2GKewEZ2GaIn9mC4twHuFHqnvp+3a4vNkP1xuY//fXR7fpCgOZ//PpCARwcAYBTwEEfAOgEHVwFoGeXwXrS4wA2tgVz8+/hVvld19T363Z9IYCNeQHAxIiNmSHA1JiNuUHA5KiN2WHA9LiN9QGABRI2VogAlsjYWCME+69IihhHYw48eZi83SAxyuUHVqrJE4AyUW8/9PhULnkCpNlZx3zwsakcDKzc/+106DsBNAiTjzrW52YUDBYKu0pl9bmeqIulQxAgpY/NMbHaqdP06UmfACOZc9DzxdImqKtOUiZqlImPvx6cVK2b5YpPgPmFyvb1qI2nXCz7XhyBQFh74DuLyM7e+o+MaAAAAABJRU5ErkJggg==";function zj(){return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)("img",{className:Pj.img,src:Vj,alt:""}),(0,aO.jsx)("h3",{className:Pj.title,children:"What is the title of the book?"}),(0,aO.jsx)(Bj,{name:"title",type:"text",placeholder:"Title book"})]})}var qj={wrapper:"styles_wrapper__MLTeQ",activeForm:"styles_activeForm__kEZd0"},Wj=n(758),Hj=n(564),Kj=n(514),Qj=n.n(Kj),Gj=Object.prototype.toString,Yj=Error.prototype.toString,Xj=RegExp.prototype.toString,Jj="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},$j=/^Symbol\((.*)\)(.*)$/;function Zj(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return Jj.call(e).replace($j,"Symbol($1)");var r=Gj.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+Yj.call(e)+"]":"RegExp"===r?Xj.call(e):null}function eU(e,t){var n=Zj(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=Zj(this[e],t);return null!==r?r:n}),2)}function tU(e){return null==e?[]:[].concat(e)}var nU=/\$\{\s*(\w+)\s*\}/g,rU=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var u;return s(this,n),(u=t.call(this)).value=void 0,u.path=void 0,u.type=void 0,u.errors=void 0,u.params=void 0,u.inner=void 0,u.name="ValidationError",u.value=r,u.path=i,u.type=a,u.errors=[],u.inner=[],tU(e).forEach((function(e){var t;n.isError(e)?((t=u.errors).push.apply(t,o(e.errors)),u.inner=u.inner.concat(e.inner.length?e.inner:e)):u.errors.push(e)})),u.message=u.errors.length>1?"".concat(u.errors.length," errors occurred"):u.errors[0],Error.captureStackTrace&&Error.captureStackTrace(y(u),n),u}return f(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(nU,(function(e,n){return eU(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(S(Error)),iU={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r?" (cast from the value `".concat(eU(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(eU(r,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(eU(r,!0),"`")+a}},aU={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},oU={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},sU={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},uU={isValue:"${path} field must be ${value}"},cU={noUnknown:"${path} field has unspecified keys: ${unknown}"},lU={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},fU={notType:function(e){var t=e.path,n=e.value,r=e.spec.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(eU(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(eU(n,!0),"`")}return rU.formatError(iU.notType,e)}},hU=(Object.assign(Object.create(null),{mixed:iU,string:aU,number:oU,date:sU,object:cU,array:lU,boolean:uU}),function(e){return e&&e.__isYupSchema__}),dU=function(){function e(t,n){s(this,e),this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}return f(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!hU(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}],[{key:"fromOptions",value:function(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,s="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};return new e(t,(function(e,t){var n,r=s.apply(void 0,o(e))?i:a;return null!=(n=null==r?void 0:r(t))?n:t}))}}]),e}(),pU={context:"$",value:"."};var vU=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===pU.context,this.isValue=this.key[0]===pU.value,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?pU.context:this.isValue?pU.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,Wj.getter)(this.path,!0),this.map=n.map}return f(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();vU.prototype.__isYupRef=!0;var yU=function(e){return null==e};function mU(e){function t(t,n,r){var i=t.value,a=t.path,o=void 0===a?"":a,s=t.options,u=t.originalValue,c=t.schema,l=e.name,f=e.test,h=e.params,d=e.message,p=e.skipAbsent,v=s.parent,y=s.context,m=s.abortEarly;function g(e){return vU.isRef(e)?e.getValue(i,v,y):e}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({value:i,originalValue:u,label:c.spec.label,path:e.path||o,spec:c.spec},h,e.params),n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];t[a]=g(t[a])}var s=new rU(rU.formatError(e.message||d,t),i,t.path,e.type||l);return s.params=t,s}var b=(void 0===m?c.spec.abortEarly:m)?n:r,_={path:o,parent:v,type:l,from:s.from,createError:k,resolve:g,options:s,originalValue:u,schema:c},w=function(e){rU.isError(e)?b(e):e?r(null):b(k())},E=function(e){rU.isError(e)?b(e):n(e)},x=p&&yU(i);if(s.sync){var T;try{var S;if("function"===typeof(null==(S=T=!!x||f.call(_,i,_))?void 0:S.then))throw new Error('Validation test of type: "'.concat(_.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(C){return void E(C)}w(T)}else try{Promise.resolve(!!x||f.call(_,i,_)).then(w,E)}catch(C){E(C)}}return t.OPTIONS=e,t}function gU(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,Wj.forEach)(t,(function(s,u,c){var l=u?s.slice(1,s.length-1):s,f="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,h=c?parseInt(l,10):0;if(e.innerType||f){if(f&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(n&&h>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(s,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[h],e=f?e.spec.types[h]:e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=u?"["+s+"]":"."+s})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var kU=function(e){d(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return f(n,[{key:"describe",value:function(){var e,t=[],n=C(this.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(vU.isRef(r)?r.describe():r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"resolveAll",value:function(e){var t,n=[],r=C(this.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(e(i))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"clone",value:function(){return new n(this.values())}},{key:"merge",value:function(e,t){var n=this.clone();return e.forEach((function(e){return n.add(e)})),t.forEach((function(e){return n.delete(e)})),n}}]),n}(S(Set));function bU(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(hU(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(var r=0;r<e.length;r++)t[r]=bU(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);var i,a=C(e.entries());try{for(a.s();!(i=a.n()).done;){var o=b(i.value,2),s=o[0],u=o[1];t.set(s,bU(u,n))}}catch(m){a.e(m)}finally{a.f()}}else if(e instanceof Set){t=new Set,n.set(e,t);var c,l=C(e);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.add(bU(f,n))}}catch(m){l.e(m)}finally{l.f()}}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(var h=0,d=Object.entries(e);h<d.length;h++){var p=b(d[h],2),v=p[0],y=p[1];t[v]=bU(y,n)}}return t}var _U=function(){function e(t){var n=this;s(this,e),this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new kU,this._blacklist=new kU,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(iU.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((function(e){e.nonNullable()}))}return f(e,[{key:"_type",get:function(){return this.type}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=o(this.deps),t.conditions=o(this.conditions),t.tests=o(this.tests),t.transforms=o(this.transforms),t.spec=bU(Object.assign({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(o(t.transforms),o(n.transforms)),n}},{key:"isType",value:function(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"resolveOptions",value:function(e){var t,n,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive})}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&yU(i))return i;var a=eU(e),o=eU(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(a," \n")+(o!==a?"result of cast: ".concat(o):""))}return i}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault()),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.path,o=n.originalValue,s=void 0===o?e:o,u=n.strict,c=void 0===u?this.spec.strict:u,l=e;c||(l=this._cast(l,Object.assign({assert:!1},n)));for(var f=[],h=0,d=Object.values(this.internalTests);h<d.length;h++){var p=d[h];p&&f.push(p)}this.runTests({path:a,value:l,originalValue:s,options:n,tests:f},r,(function(e){if(e.length)return i(e,l);t.runTests({path:a,value:l,originalValue:s,options:n,tests:t.tests},r,i)}))}},{key:"runTests",value:function(e,t,n){var r=!1,i=e.tests,a=e.value,o=e.originalValue,s=e.path,u=e.options,c=function(e){r||(r=!0,t(e,a))},l=function(e){r||(r=!0,n(e,a))},f=i.length,h=[];if(!f)return l([]);for(var d={value:a,originalValue:o,path:s,options:u,schema:this},p=0;p<i.length;p++){(0,i[p])(d,c,(function(e){e&&(h=h.concat(e)),--f<=0&&l(h)}))}}},{key:"asNestedTest",value:function(e){var t,n=this,r=e.key,i=e.index,a=e.parent,o=e.parentPath,s=e.originalParent,u=e.options,c=null!=r?r:i;if(null==c)throw TypeError("Must include `key` or `index` for nested validations");var l="number"===typeof c,f=a[c],h=Object.assign({},u,(x(t={strict:!0,parent:a,value:f,originalValue:s[c],key:void 0},l?"index":"key",c),x(t,"path",l||c.includes(".")?"".concat(o||"","[").concat(f?c:'"'.concat(c,'"'),"]"):(o?"".concat(o,"."):"")+r),t));return function(e,t,r){return n.resolve(h)._validate(f,h,t,r)}}},{key:"validate",value:function(e,t){var n=this.resolve(Object.assign({},t,{value:e}));return new Promise((function(r,i){return n._validate(e,t,(function(e,t){rU.isError(e)&&(e.value=t),i(e)}),(function(e,t){e.length?i(new rU(e,t)):r(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(Object.assign({},t,{value:e}))._validate(e,Object.assign({},t,{sync:!0}),(function(e,t){throw rU.isError(e)&&(e.value=t),e}),(function(t,r){if(t.length)throw new rU(t,e);n=r})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(rU.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(n){if(rU.isError(n))return!1;throw n}}},{key:"_getDefault",value:function(){var e=this.spec.default;return null==e?e:"function"===typeof e?e.call(this):bU(e)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault()}},{key:"default",value:function(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}},{key:"nullability",value:function(e,t){var n=this.clone({nullable:e});return n.internalTests.nullable=mU({message:t,name:"nullable",test:function(e){return null!==e||this.schema.spec.nullable}}),n}},{key:"optionality",value:function(e,t){var n=this.clone({optional:e});return n.internalTests.optionality=mU({message:t,name:"optionality",test:function(e){return void 0!==e||this.schema.spec.optional}}),n}},{key:"optional",value:function(){return this.optionality(!0)}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.defined;return this.optionality(!1,e)}},{key:"nullable",value:function(){return this.nullability(!0)}},{key:"nonNullable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.notNull;return this.nullability(!1,e)}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.required;return this.clone().withMutation((function(t){return t.nonNullable(e).defined(e)}))}},{key:"notRequired",value:function(){return this.clone().withMutation((function(e){return e.nullable().optional()}))}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=iU.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=mU(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=tU(e).map((function(e){return new vU(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new dU(r,t):dU.fromOptions(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t.internalTests.typeError=mU({message:e,name:"typeError",test:function(e){return!(!yU(e)&&!this.schema._typeCheck(e))||this.createError({params:{type:this.schema.type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iU.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=mU({message:t,name:"oneOf",skipAbsent:!0,test:function(e){var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iU.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=mU({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(e){var t=(e?this.resolve(e):this).clone(),n=t.spec,r=n.label,i={meta:n.meta,label:r,optional:n.optional,nullable:n.nullable,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return i}}]),e}();_U.prototype.__isYupSchema__=!0;for(var wU=function(){var e=xU[EU];_U.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=gU(this,t,n,r.context),a=i.parent,o=i.parentPath;return i.schema[e](a&&a[o],Object.assign({},r,{parent:a,path:t}))}},EU=0,xU=["validate","validateSync"];EU<xU.length;EU++)wU();for(var TU=0,SU=["equals","is"];TU<SU.length;TU++){var CU=SU[TU];_U.prototype[CU]=_U.prototype.oneOf}for(var AU=0,IU=["not","nope"];AU<IU.length;AU++){var NU=IU[AU];_U.prototype[NU]=_U.prototype.notOneOf}var RU=function(){return!0};var OU=function(e){d(n,e);var t=m(n);function n(e){return s(this,n),t.call(this,"function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:RU},e))}return f(n)}(_U);OU.prototype;var PU=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),e=t.call(this,{type:"boolean",check:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return f(n,[{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uU.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return yU(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uU.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return yU(e)||!1===e}})}},{key:"default",value:function(e){return Ro(p(n.prototype),"default",this).call(this,e)}},{key:"defined",value:function(e){return Ro(p(n.prototype),"defined",this).call(this,e)}},{key:"optional",value:function(){return Ro(p(n.prototype),"optional",this).call(this)}},{key:"required",value:function(e){return Ro(p(n.prototype),"required",this).call(this,e)}},{key:"notRequired",value:function(){return Ro(p(n.prototype),"notRequired",this).call(this)}},{key:"nullable",value:function(){return Ro(p(n.prototype),"nullable",this).call(this)}},{key:"nonNullable",value:function(e){return Ro(p(n.prototype),"nonNullable",this).call(this,e)}},{key:"strip",value:function(e){return Ro(p(n.prototype),"strip",this).call(this,e)}}]),n}(_U);PU.prototype;var DU=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,LU=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,MU=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,FU=function(e){return yU(e)||e===e.trim()},jU={}.toString();function UU(){return new BU}var BU=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,{type:"string",check:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;var r=null!=e&&e.toString?e.toString():e;return r===jU?e:r}))})),e}return f(n,[{key:"required",value:function(e){return Ro(p(n.prototype),"required",this).call(this,e).withMutation((function(t){return t.test({message:e||iU.required,name:"required",skipAbsent:!0,test:function(e){return!!e.length}})}))}},{key:"notRequired",value:function(){return Ro(p(n.prototype),"notRequired",this).call(this).withMutation((function(e){return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}))}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||aU.matches,params:{regex:e},skipAbsent:!0,test:function(t){return""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.email;return this.matches(DU,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.url;return this.matches(LU,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.uuid;return this.matches(MU,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:FU})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.lowercase;return this.transform((function(e){return yU(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return yU(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.uppercase;return this.transform((function(e){return yU(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return yU(e)||e===e.toUpperCase()}})}}]),n}(_U);UU.prototype=BU.prototype;var VU=function(e){return e!=+e};var zU=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,{type:"number",check:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!VU(e)}})).withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce)return e;var r=e;if("string"===typeof r){if(""===(r=r.replace(/\s/g,"")))return NaN;r=+r}return n.isType(r)?r:parseFloat(r)}))})),e}return f(n,[{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test:function(t){return t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test:function(t){return t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:function(e){return Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return yU(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return yU(t)?t:Math[e](t)}))}}]),n}(_U);zU.prototype;var qU=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var WU=new Date(""),HU=function(e){return"[object Date]"===Object.prototype.toString.call(e)};function KU(){return new QU}var QU=function(e){d(n,e);var t=m(n);function n(){var e;return s(this,n),e=t.call(this,{type:"date",check:function(e){return HU(e)&&!isNaN(e.getTime())}}),e.withMutation((function(){e.transform((function(e,t,r){return!r.spec.coerce||r.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=qU.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?n.INVALID_DATE:new Date(e))}))})),e}return f(n,[{key:"prepareParam",value:function(e,t){var n;if(vU.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sU.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(e){return e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sU.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(e){return e<=this.resolve(n)}})}}]),n}(_U);function GU(e,t){var n=1/0;return e.some((function(e,r){var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function YU(e){return function(t,n){return GU(e,t)-GU(e,n)}}QU.INVALID_DATE=WU,KU.prototype=QU.prototype,KU.INVALID_DATE=WU;var XU=function(e,t,n){if("string"!==typeof e)return e;var r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function JU(e){if("fields"in e){for(var t={},n=0,r=Object.entries(e.fields);n<r.length;n++){var i=b(r[n],2),a=i[0],o=i[1];t[a]=JU(o)}return e.setFields(t)}if("array"===e.type){var s=e.optional();return s.innerType&&(s.innerType=JU(s.innerType)),s}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(JU)}):"optional"in e?e.optional():e}var $U=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var ZU=YU([]);function eB(e){return new tB(e)}var tB=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,{type:"object",check:function(e){return $U(e)||"function"===typeof e}})).fields=Object.create(null),r._sortErrors=ZU,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){e&&r.shape(e)})),r}return f(n,[{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Ro(p(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault();if(!this._typeCheck(a))return a;var o,s=this.fields,u=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(a).filter((function(e){return!r._nodes.includes(e)}))),l={},f=Object.assign({},i,{parent:l,__validating:i.__validating||!1}),h=!1,d=C(c);try{for(d.s();!(o=d.n()).done;){var v=o.value,y=s[v],m=v in a;if(y){var g,k=a[v];f.path=(i.path?"".concat(i.path,"."):"")+v;var b=(y=y.resolve({value:k,context:i.context,parent:l}))instanceof _U?y.spec:void 0,_=null==b?void 0:b.strict;if(null!=b&&b.strip){h=h||v in a;continue}void 0!==(g=i.__validating&&_?a[v]:y.cast(a[v],f))&&(l[v]=g)}else m&&!u&&(l[v]=a[v]);m===v in l&&l[v]===a[v]||(h=!0)}}catch(w){d.e(w)}finally{d.f()}return h?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=r.from,u=void 0===s?[]:s,c=r.originalValue,l=void 0===c?e:c,f=r.recursive,h=void 0===f?this.spec.recursive:f;r.from=[{schema:this,value:l}].concat(o(u)),r.__validating=!0,r.originalValue=l,Ro(p(n.prototype),"_validate",this).call(this,e,r,i,(function(e,n){if(h&&$U(n)){l=l||n;var o,s=[],u=C(t._nodes);try{for(u.s();!(o=u.n()).done;){var c=o.value,f=t.fields[c];f&&!vU.isRef(f)&&s.push(f.asNestedTest({options:r,key:c,parent:n,parentPath:r.path,originalParent:l}))}}catch(d){u.e(d)}finally{u.f()}t.runTests({tests:s,value:n,originalValue:l,options:r},i,(function(r){a(r.sort(t._sortErrors).concat(e),n)}))}else a(e,n)}))}},{key:"clone",value:function(e){var t=Ro(p(n.prototype),"clone",this).call(this,e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=Ro(p(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var s=b(o[a],2),u=s[0],c=s[1],l=i[u];i[u]=void 0===l?c:l}return r.withMutation((function(e){return e.setFields(i,t._excludedEdges)}))}},{key:"_getDefault",value:function(){var e=this;if("default"in this.spec)return Ro(p(n.prototype),"_getDefault",this).call(this);if(this._nodes.length){var t={};return this._nodes.forEach((function(n){var r=e.fields[n];t[n]=r&&"getDefault"in r?r.getDefault():void 0})),t}}},{key:"setFields",value:function(e,t){var n=this.clone();return n.fields=e,n._nodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=b(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,Wj.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}for(var o=function(){var t=u[s],n=e[t];r.add(t),vU.isRef(n)&&n.isSibling?a(n.path,t):hU(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))},s=0,u=Object.keys(e);s<u.length;s++)o();return Qj().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=YU(Object.keys(e)),t&&(n._excludedEdges=t),n}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((function(n){var r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[].concat(o(n._excludedEdges),o(t))),n.setFields(Object.assign(n.fields,e),r)}))}},{key:"partial",value:function(){for(var e={},t=0,n=Object.entries(this.fields);t<n.length;t++){var r=b(n[t],2),i=r[0],a=r[1];e[i]="optional"in a&&a.optional instanceof Function?a.optional():a}return this.setFields(e)}},{key:"deepPartial",value:function(){return JU(this)}},{key:"pick",value:function(e){var t,n={},r=C(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(a){r.e(a)}finally{r.f()}return this.setFields(n)}},{key:"omit",value:function(e){var t,n=Object.assign({},this.fields),r=C(e);try{for(r.s();!(t=r.n()).done;){delete n[t.value]}}catch(i){r.e(i)}finally{r.f()}return this.setFields(n)}},{key:"from",value:function(e,t,n){var r=(0,Wj.getter)(e,!0);return this.transform((function(i){if(!i)return i;var a=i;return function(e,t){var n=o((0,Wj.normalizePath)(t));if(1===n.length)return n[0]in e;var r=n.pop(),i=(0,Wj.getter)((0,Wj.join)(n),!0)(e);return!(!i||!(r in i))}(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"json",value:function(){return this.transform(XU)}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cU.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=function(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cU.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){if(!t)return t;for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];n[e(a)]=t[a]}return n}))}},{key:"camelCase",value:function(){return this.transformKeys(Hj.camelCase)}},{key:"snakeCase",value:function(){return this.transformKeys(Hj.snakeCase)}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return(0,Hj.snakeCase)(e).toUpperCase()}))}},{key:"describe",value:function(e){var t=Ro(p(n.prototype),"describe",this).call(this,e);t.fields={};for(var r=0,i=Object.entries(this.fields);r<i.length;r++){var a,o=b(i[r],2),s=o[0],u=o[1],c=e;null!=(a=c)&&a.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[s]})),t.fields[s]=u.describe(c)}return t}}]),n}(_U);eB.prototype=tB.prototype;var nB=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),r=t.call(this,{type:"array",check:function(e){return Array.isArray(e)}}),r.innerType=void 0,r.innerType=e,r}return f(n,[{key:"_cast",value:function(e,t){var r=this,i=Ro(p(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this.innerType,u=null!=(t=i.recursive)?t:this.spec.recursive;null!=i.originalValue&&i.originalValue,Ro(p(n.prototype),"_validate",this).call(this,e,i,a,(function(t,n){var c;if(u&&s&&r._typeCheck(n)){for(var l=new Array(n.length),f=0;f<n.length;f++){var h;l[f]=s.asNestedTest({options:i,index:f,parent:n,parentPath:i.path,originalParent:null!=(h=i.originalValue)?h:e})}r.runTests({value:n,tests:l,originalValue:null!=(c=i.originalValue)?c:e,options:i},a,(function(e){return o(e.concat(t),n)}))}else o(t,n)}))}},{key:"clone",value:function(e){var t=Ro(p(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"json",value:function(){return this.transform(XU)}},{key:"concat",value:function(e){var t=Ro(p(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!hU(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+eU(e));return t.innerType=e,t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lU.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||lU.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||lU.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(e){var t=Ro(p(n.prototype),"describe",this).call(this);if(this.innerType){var r,i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),t.innerType=this.innerType.describe(e)}return t}}]),n}(_U);nB.prototype;var rB=function(e){d(n,e);var t=m(n);function n(e){var r;return s(this,n),r=t.call(this,{type:"tuple",spec:{types:e},check:function(e){var t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),r.withMutation((function(){r.typeError(fU.notType)})),r}return f(n,[{key:"_cast",value:function(e,t){var r=this.spec.types,i=Ro(p(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i))return i;var a=!1,o=r.map((function(e,n){var r=e.cast(i[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return r!==i[n]&&(a=!0),r}));return a?o:i}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.spec.types;Ro(p(n.prototype),"_validate",this).call(this,e,r,i,(function(n,s){var u;if(t._typeCheck(s)){var c,l=[],f=C(o.entries());try{for(f.s();!(c=f.n()).done;){var h,d=b(c.value,2),p=d[0],v=d[1];l[p]=v.asNestedTest({options:r,index:p,parent:s,parentPath:r.path,originalParent:null!=(h=r.originalValue)?h:e})}}catch(y){f.e(y)}finally{f.f()}t.runTests({value:s,tests:l,originalValue:null!=(u=r.originalValue)?u:e,options:r},i,(function(e){return a(e.concat(n),s)}))}else a(n,s)}))}}]),n}(_U);rB.prototype;var iB=[eB().shape({title:UU().required("Title is required field")}),eB().shape({description:UU().required("Description is required field")}),eB().shape({cover:UU().required("Cover is required field")})],aB={wrapper:"styles_wrapper__c6Okp",formAddingBook:"styles_formAddingBook__5klNf"};var oB=function(e){var t=e.children;return(0,aO.jsx)("div",{className:aB.wrapper,children:(0,aO.jsx)("div",{className:aB.formAddingBook,children:t})})},sB=["type","title"];var uB=function(e){var t=e.type,n=e.title,r=vR(e,sB);return(0,aO.jsx)("button",Lr(Lr({type:"button",className:"btn-type-".concat(t)},r),{},{children:n}))},cB={buttonContainer:"styles_buttonContainer__lERE6"};var lB=function(e){var t=e.title;return(0,aO.jsx)("button",{type:"submit",className:"btn-type-submit",children:t})};var fB=function(e){var t=e.step,n=e.setStep;return(0,aO.jsxs)("div",{className:cB.buttonContainer,children:[t>0&&(0,aO.jsx)(uB,{title:"Prev",type:"button",onClick:function(){n(t-1)}}),0===t||t<=1?(0,aO.jsx)(lB,{title:"Next"}):(0,aO.jsx)(lB,{title:"Submit"})]})};function hB(){var e=b((0,nt.useState)(0),2),t=e[0],n=e[1],r=b((0,nt.useState)({}),2),i=r[0],a=(r[1],Rn((function(e){return e.main})).visibleAddingBookForm),o=Nn(),s=Rn((function(e){return e.account})).user,u=iB[t],c=[zj,Fj,Lj],l=_t(),f=function(e){var n=c[t];return(0,aO.jsx)(n,Lr({},e))};return(0,aO.jsx)(NF,{initialValues:{title:"",description:"",cover:"",seesEveryone:!1},validationSchema:u,onSubmit:function(e,r){!function(e,r){var a=Lr(Lr({},i),e);n(t+1),t===c.length-1&&(o(pR({data:a,user:s,navigate:l})),o(rR(!1)),n(0),r())}(e,r.resetForm)},children:function(e){return(0,aO.jsx)(MF,{className:nn()(qj.wrapper,x({},qj.activeForm,a)),children:(0,aO.jsxs)(oB,{children:[f(e),(0,aO.jsx)(fB,{step:t,setStep:n})]})})}})}function dB(){var e=Rn((function(e){return e.main})).visibleAddingBookForm,t=Rn((function(e){return e.account})),n=t.loading,r=t.error,i=Nn();return(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)("div",{className:nn()(Tj.wrapper,x({},Tj.visibleNewBookMessage,e)),children:n?(0,aO.jsx)(Oj,{}):(0,aO.jsxs)(aO.Fragment,{children:[(0,aO.jsx)("h3",{className:Tj.title,children:"Would you like to add more books to the library?"}),(0,aO.jsx)(uB,{title:"Add book",type:"button",onClick:function(){i(rR(!0))}}),(0,aO.jsx)("p",{className:Tj.error,children:r})]})}),(0,aO.jsx)(hB,{})]})}var pB={wrapper:"styles_wrapper__ONPMg"},vB={nav:"styles_nav__0EP0u",bookList:"styles_bookList__lVube",bookItem:"styles_bookItem__L4NF9",searchBtn:"styles_searchBtn__80ZM8",link:"styles_link__F2w8F",activeLink:"styles_activeLink__FllsK",searchContainer:"styles_searchContainer__3Ns0N",search:"styles_search__gcqyW",searchActive:"styles_searchActive__nYWpc",navActive:"styles_navActive__j-1CA"};var yB=n.p+"static/media/icons8-\u043f\u043e\u0438\u0441\u043a.09e1b9e4d74c242778644fa45fe8c3a5.svg";function mB(){var e=function(e){return e.isActive?vB.activeLink:vB.link},t=Rn((function(e){return e.main})),n=t.search,r=t.visibleMenu,i=t.isOpenSearchMenu,a=Nn(),o=bt();return(0,nt.useEffect)((function(){"/book-shelf/all-books"!==o.pathname&&a(uR(!1))}),[o.pathname]),(0,aO.jsx)("nav",{onClick:function(e){return e.stopPropagation()},className:nn()(vB.nav,x({},vB.navActive,r)),children:(0,aO.jsxs)("ul",{className:vB.bookList,children:[(0,aO.jsx)("li",{className:vB.bookItem,children:(0,aO.jsx)($t,{className:e,to:"/book-shelf/new-book",children:"New book"})}),(0,aO.jsxs)("li",{className:vB.bookItem,children:[(0,aO.jsx)($t,{className:e,to:"/book-shelf/all-books",children:"All books"}),(0,aO.jsx)("img",{onClick:function(){return a(uR(!i))},className:vB.searchBtn,src:yB,alt:""})]}),(0,aO.jsx)("li",{className:nn()(vB.searchContainer,x({},vB.searchActive,i&&r)),children:(0,aO.jsx)("input",{className:nn()(vB.search),value:n,onChange:function(e){return a(aR(e.target.value.toLocaleLowerCase()))},type:"text"})}),(0,aO.jsx)("li",{className:vB.bookItem,children:(0,aO.jsx)($t,{className:e,to:"/book-shelf/favorite-books",children:"Favorite books"})}),(0,aO.jsx)("li",{className:vB.bookItem,children:(0,aO.jsx)($t,{className:e,to:"/book-shelf/messages",children:"Messages"})})]})})}function gB(){return(0,aO.jsxs)("div",{className:pB.wrapper,children:[(0,aO.jsx)(mB,{}),(0,aO.jsx)(Mt,{})]})}var kB=function(){var e=On().isAuth,t=_t();return(0,nt.useEffect)((function(){!e&&t("/",{replace:!0})}),[]),(0,aO.jsx)(gB,{})},bB={wrapper:"styles_wrapper__4U12i"};var _B=function(){var e=Pt();return(0,aO.jsxs)("div",{className:bB.wrapper,children:[(0,aO.jsx)("h3",{children:"Oops!"}),(0,aO.jsx)("p",{children:"Sorry, an unexpected error has occurred."}),(0,aO.jsx)("p",{children:(0,aO.jsx)("i",{children:e.statusText||e.message})})]})},wB={wrapper:"styles_wrapper__rFjBT",title:"styles_title__9GVUv",linkContainer:"styles_linkContainer__oUbXn",start:"styles_start__-OX7w",choice:"styles_choice__c2Np2",linkToLibrary:"styles_linkToLibrary__5esvu",allBooksLink:"styles_allBooksLink__THQRi"};var EB=function(){var e=On().isAuth;return(0,aO.jsxs)("div",{className:wB.wrapper,children:[(0,aO.jsx)("h1",{className:wB.title,children:e?"Back to the library?":"Create your own library!"}),(0,aO.jsxs)("div",{className:wB.linkContainer,children:[(0,aO.jsx)(uO,{children:(0,aO.jsx)("span",{className:wB.start,children:e?"Continue":"Start now"})}),(0,aO.jsx)("span",{className:wB.choice,children:"or"}),(0,aO.jsx)(Jt,{className:wB.linkToLibrary,to:"library",children:"Look at the library"})]})]})},xB={wrapper:"styles_wrapper__ZdVXo"},TB={wrapper:"styles_wrapper__vKXmY",form:"styles_form__aSWXN",title:"styles_title__DBORo",message:"styles_message__QfNQy",submitBtn:"styles_submitBtn__dRlD4",messageFormActive:"styles_messageFormActive__eHRBs"},SB=_i("user/sendingFeedback",function(){var e=E(_().mark((function e(t,n){var r,i,a,o,s,u,c,l,f,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,i=t.currentBook,a=t.data,o=n.dispatch,e.prev=2,s=PN(RN(ZN,"chats")),u=PN(RN(ZN,"chats/".concat(s.key,"/messages/"))),e.next=7,PN(RN(ZN,"users/".concat(r.id,"/chats/")));case 7:return c=e.sent,e.next=10,PN(RN(ZN,"users/".concat(i.userId,"/chats/")));case 10:return l=e.sent,f=Gm(JN,"books-user-".concat(i.userId),"".concat(i.id)),h=Gm(JN,"books-sees-everyone","".concat(i.booksEveryoneCollectionID)),e.next=15,LN(RN(ZN,"chats/".concat(s.key,"/messages/").concat(u.key)),{senderId:r.id,messageId:u.key,message:a.message,timestamp:GN()});case 15:return e.next=17,LN(RN(ZN,"users/".concat(r.id,"/chats/").concat(c.key)),{toUserId:i.userId,fromUserId:r.id,toUserEmail:i.userEmail,booksEveryoneCollectionID:i.booksEveryoneCollectionID,bookId:i.id,bookTitle:i.title,chatId:s.key,firstUserChatId:c.key,secondUserChatId:l.key});case 17:return e.next=19,LN(RN(ZN,"users/".concat(i.userId,"/chats/").concat(l.key)),{fromUserId:r.id,toUserId:i.userId,fromUserEmail:r.email,booksEveryoneCollectionID:i.booksEveryoneCollectionID,bookId:i.id,bookTitle:i.title,chatId:s.key,firstUserChatId:c.key,secondUserChatId:l.key});case 19:return e.next=21,fk(h,{usersWhoSendMessage:vk(r.id)});case 21:return e.next=23,fk(f,{usersWhoSendMessage:vk(r.id)});case 23:o(eR()),o(iR(!1)),e.next=30;break;case 27:throw e.prev=27,e.t0=e.catch(2),e.t0;case 30:case"end":return e.stop()}}),e,null,[[2,27]])})));return function(t,n){return e.apply(this,arguments)}}());var CB=function(){var e=b((0,nt.useState)({}),2),t=e[0],n=(e[1],Rn((function(e){return e.main}))),r=n.visibleMessageForm,i=n.currentBook,a=Rn((function(e){return e.account})).user,o=Nn(),s=function(){var e=E(_().mark((function e(n,r){var s;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.message.trim().length){e.next=3;break}return GR("Message cannot be empty","error"),e.abrupt("return");case 3:s=Lr(Lr({},t),n),o(SB({currentBook:i,data:s,user:a})),r();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,aO.jsx)("div",{onClick:function(){return o(iR(!r))},className:nn()(TB.wrapper,x({},TB.messageFormActive,r)),children:(0,aO.jsx)(NF,{initialValues:{message:""},onSubmit:function(e,t){var n=t.resetForm;s(e,n)},children:function(){return(0,aO.jsxs)(MF,{onClick:function(e){return e.stopPropagation()},className:TB.form,children:[(0,aO.jsx)("label",{className:TB.title,htmlFor:"message",children:"Share your impressions"}),(0,aO.jsx)(LF,{className:TB.message,name:"message",as:"textarea",placeholder:"Share your thoughts with the author"}),(0,aO.jsx)("button",{className:TB.submitBtn,type:"submit",children:"Submit message"})]})}})})};var AB=function(){var e=Rn((function(e){return e.main})).booksSeesEveryone,t=Nn();return(0,nt.useEffect)((function(){t(eR())}),[]),(0,aO.jsx)(aO.Fragment,{children:0===e.length?(0,aO.jsx)("div",{className:xB.wrapper,children:(0,aO.jsx)("h3",{children:"It's empty for now, come back later"})}):(0,aO.jsxs)(ZF,{children:[e.map((function(e){return(0,aO.jsx)(wj,Lr({},e),e.id)})),(0,aO.jsx)(CB,{})]})})},IB={form:"styles_form__gSwbE",formNavigateText:"styles_formNavigateText__yXXE-"},NB=eB().shape({email:UU().required("Email is required field").email("Invalid email address"),password:UU().required("Password is required field").min(6,"Password must contain at least six characters").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Password must contain a letter, a number and one special character")}),RB={formButton:"styles_formButton__nq93s"};var OB=function(e){var t=e.children;return(0,aO.jsx)("button",{type:"submit",className:RB.formButton,children:t})};var PB=function(){var e=Nn(),t=_t(),n=function(n,r){(function(e,t,n){return iE(ma(e),Uw.credential(t,n))})(XN,n,r).then((function(n){var r=n.user;r.email&&e($R({id:r.uid,email:r.email})),t("/book-shelf/all-books")})).catch((function(){return GR("Field check","error")}))};return(0,aO.jsx)(NF,{initialValues:{email:"",password:""},validationSchema:NB,onSubmit:function(e){var t=e.email,r=e.password;n(t,r)},children:function(){return(0,aO.jsxs)(MF,{className:IB.form,children:[(0,aO.jsx)(Bj,{label:"email",name:"email",type:"email",placeholder:"email"}),(0,aO.jsx)(Bj,{label:"password",name:"password",type:"password",placeholder:"password"}),(0,aO.jsx)(OB,{children:"Sign In"}),(0,aO.jsxs)("p",{className:IB.formNavigateText,children:["Or ",(0,aO.jsx)(Jt,{to:"/sign-up",children:"register"})]})]})}})},DB={wrapper:"styles_wrapper__p8e6Z"};var LB=function(e){var t=e.children;return(0,aO.jsx)("div",{className:DB.wrapper,children:t})};var MB=function(){return(0,aO.jsx)(LB,{children:(0,aO.jsx)(PB,{})})};var FB=function(){var e=Nn(),t=_t(),n=function(n,r){(function(e,t,n){return oE.apply(this,arguments)})(XN,n,r).then((function(n){var r=n.user;r.email&&e($R({id:r.uid,email:r.email})),t("/book-shelf/all-books")})).catch((function(){return GR("The user already has an account at this address","error")}))};return(0,aO.jsx)(NF,{initialValues:{email:"",password:""},validationSchema:NB,onSubmit:function(e){var t=e.email,r=e.password;n(t,r)},children:function(){return(0,aO.jsx)(aO.Fragment,{children:(0,aO.jsxs)(MF,{className:IB.form,children:[(0,aO.jsx)(Bj,{label:"email",name:"email",type:"email",placeholder:"email"}),(0,aO.jsx)(Bj,{label:"password",name:"password",type:"password",placeholder:"password"}),(0,aO.jsx)(OB,{children:"Sign Up"}),(0,aO.jsxs)("p",{className:IB.formNavigateText,children:["Or ",(0,aO.jsx)(Jt,{to:"/sign-in",children:"Log In"})]})]})})}})};var jB=function(){return(0,aO.jsx)(LB,{children:(0,aO.jsx)(FB,{})})},UB=function(e,t){return xe({basename:null==t?void 0:t.basename,history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),F((function(e,t){var n=M(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return D("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:L(t))}),(function(e,t){O("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||Gt(),routes:zt(e)}).initialize();var n}([{path:"/",element:(0,aO.jsx)(pO,{}),errorElement:(0,aO.jsx)(_B,{}),children:[{index:!0,element:(0,aO.jsx)(EB,{})},{path:"sign-up",element:(0,aO.jsx)(jB,{})},{path:"sign-in",element:(0,aO.jsx)(MB,{})},{path:"library",element:(0,aO.jsx)(AB,{})},{path:"book-shelf",element:(0,aO.jsx)(kB,{}),children:[{path:"new-book",element:(0,aO.jsx)(dB,{})},{path:"all-books",element:(0,aO.jsx)(Ej,{})},{path:"favorite-books",element:(0,aO.jsx)(xj,{})},{path:"messages",element:(0,aO.jsx)(Rj,{}),children:[{path:":chatId",element:(0,aO.jsx)(YF,{})}]}]}]}]),BB=function(e){var t,n=fi(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,u=r.devTools,c=void 0===u||u,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ui(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=zr(a)}var p=s;if("function"===typeof p&&(p=p(n),!hi&&!Array.isArray(p)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!hi&&p.some((function(e){return"function"!==typeof e})))throw new Error("each middleware provided to configureStore must be a function");var v=Wr.apply(void 0,p),y=qr;c&&(y=si(ii({trace:!hi},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=Xr([v],d):"function"===typeof d&&(m=d(m)),Vr(t,f,y.apply(void 0,m))}({reducer:{account:iO,main:lR}});t.createRoot(document.getElementById("root")).render((0,aO.jsx)(xn,{store:BB,children:(0,aO.jsx)(Lt,{router:UB})}))}()}();
//# sourceMappingURL=main.08072820.js.map